<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c268705e6fb2b30c7690d5b2a002e072",
  "translation_date": "2025-11-07T09:05:35+00:00",
  "source_file": "05-agentic-rag/code_samples/05-dotnet-agent-framework.md",
  "language_code": "he"
}
-->
# 🔍 RAG ארגוני עם Azure AI Foundry (.NET)

## 📋 מטרות למידה

מחברת זו מדגימה כיצד לבנות מערכות RAG (Retrieval-Augmented Generation) ברמה ארגונית באמצעות Microsoft Agent Framework ב-.NET עם Azure AI Foundry. תלמדו ליצור סוכנים מוכנים לייצור שיכולים לחפש במסמכים ולספק תשובות מדויקות ומודעות להקשר עם אבטחה ויכולת הרחבה ארגונית.

**יכולות RAG ארגוניות שתבנו:**
- 📚 **אינטליגנציה מסמכית**: עיבוד מסמכים מתקדם עם שירותי Azure AI
- 🔍 **חיפוש סמנטי**: חיפוש וקטורי בעל ביצועים גבוהים עם תכונות ארגוניות
- 🛡️ **אינטגרציית אבטחה**: גישה מבוססת תפקידים ודפוסי הגנה על נתונים
- 🏢 **ארכיטקטורה ניתנת להרחבה**: מערכות RAG מוכנות לייצור עם ניטור

## 🎯 ארכיטקטורת RAG ארגונית

### רכיבים ארגוניים מרכזיים
- **Azure AI Foundry**: פלטפורמת AI מנוהלת עם אבטחה וציות ארגוני
- **סוכנים מתמשכים**: סוכנים עם היסטוריית שיחה וניהול הקשר
- **ניהול חנות וקטורים**: אינדוקס מסמכים ארגוני ושליפה
- **אינטגרציית זהות**: אימות Azure AD ובקרת גישה מבוססת תפקידים

### יתרונות .NET ארגוניים
- **בטיחות סוגים**: אימות בזמן קומפילציה לפעולות RAG ומבני נתונים
- **ביצועים אסינכרוניים**: עיבוד מסמכים וחיפושים ללא חסימה
- **ניהול זיכרון**: ניצול משאבים יעיל עבור אוספי מסמכים גדולים
- **דפוסי אינטגרציה**: אינטגרציה טבעית עם שירותי Azure באמצעות הזרקת תלות

## 🏗️ ארכיטקטורה טכנית

### צינור RAG ארגוני
```
Document Upload → Security Validation → Vector Processing → Index Creation
                      ↓                    ↓                  ↓
User Query → Authentication → Semantic Search → Context Ranking → AI Response
```

### רכיבי .NET מרכזיים
- **Azure.AI.Agents.Persistent**: ניהול סוכנים ארגוני עם שמירת מצב
- **Azure.Identity**: אימות משולב לגישה מאובטחת לשירותי Azure
- **Microsoft.Agents.AI.AzureAI**: יישום מסגרת סוכנים מותאם ל-Azure
- **System.Linq.Async**: פעולות LINQ אסינכרוניות בעלות ביצועים גבוהים

## 🔧 תכונות ויתרונות ארגוניים

### אבטחה וציות
- **אינטגרציית Azure AD**: ניהול זהות ארגוני ואימות
- **גישה מבוססת תפקידים**: הרשאות מדויקות לגישה למסמכים ולפעולות
- **הגנת נתונים**: הצפנה במנוחה ובמעבר עבור מסמכים רגישים
- **רישום ביקורת**: מעקב פעילות מקיף לדרישות ציות

### ביצועים ויכולת הרחבה
- **ניהול חיבור**: ניהול יעיל של חיבורי שירותי Azure
- **עיבוד אסינכרוני**: פעולות ללא חסימה לתרחישים בעלי תפוקה גבוהה
- **אסטרטגיות מטמון**: מטמון חכם למסמכים שניגשים אליהם לעיתים קרובות
- **איזון עומסים**: עיבוד מבוזר לפריסות בקנה מידה גדול

### ניהול וניטור
- **בדיקות בריאות**: ניטור מובנה לרכיבי מערכת RAG
- **מדדי ביצועים**: ניתוח מפורט על איכות החיפוש וזמני תגובה
- **ניהול שגיאות**: ניהול חריגים מקיף עם מדיניות ניסיונות חוזרים
- **ניהול תצורה**: הגדרות ספציפיות לסביבה עם אימות

## ⚙️ דרישות מוקדמות והגדרות

**סביבת פיתוח:**
- .NET 9.0 SDK או גרסה גבוהה יותר
- Visual Studio 2022 או VS Code עם הרחבת C#
- מנוי Azure עם גישה ל-AI Foundry

**חבילות NuGet נדרשות:**
```xml
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />
```

**הגדרת אימות Azure:**
```bash
# Install Azure CLI and authenticate
az login
az account set --subscription "your-subscription-id"
```

**תצורת סביבה:**
* תצורת Azure AI Foundry (מטופלת אוטומטית באמצעות Azure CLI)
* ודא שאתה מאומת למנוי Azure הנכון

## 📊 דפוסי RAG ארגוניים

### דפוסי ניהול מסמכים
- **העלאה בכמות גדולה**: עיבוד יעיל של אוספי מסמכים גדולים
- **עדכונים הדרגתיים**: הוספה ושינוי מסמכים בזמן אמת
- **שליטה בגרסאות**: גרסאות מסמכים ומעקב אחר שינויים
- **ניהול מטא-נתונים**: תכונות מסמכים עשירות וטקסונומיה

### דפוסי חיפוש ושליפה
- **חיפוש היברידי**: שילוב חיפוש סמנטי ומילות מפתח לתוצאות מיטביות
- **חיפוש ממוקד**: סינון וריבוד רב-ממדי
- **כיוונון רלוונטיות**: אלגוריתמי ניקוד מותאמים לצרכים ספציפיים לתחום
- **דירוג תוצאות**: דירוג מתקדם עם אינטגרציית לוגיקה עסקית

### דפוסי אבטחה
- **אבטחה ברמת מסמך**: בקרת גישה מדויקת לכל מסמך
- **סיווג נתונים**: תיוג רגישות אוטומטי והגנה
- **רישומי ביקורת**: רישום מקיף של כל פעולות RAG
- **הגנת פרטיות**: זיהוי והסתרת מידע אישי (PII)

## 🔒 תכונות אבטחה ארגוניות

### אימות והרשאה
```csharp
// Azure AD integrated authentication
var credential = new AzureCliCredential();
var agentsClient = new PersistentAgentsClient(endpoint, credential);

// Role-based access validation
if (!await ValidateUserPermissions(user, documentId))
{
    throw new UnauthorizedAccessException("Insufficient permissions");
}
```

### הגנת נתונים
- **הצפנה**: הצפנה מקצה לקצה למסמכים ואינדקסי חיפוש
- **בקרות גישה**: אינטגרציה עם Azure AD עבור הרשאות משתמשים וקבוצות
- **מיקום נתונים**: בקרות מיקום גיאוגרפי של נתונים לציות
- **גיבוי ושחזור**: גיבוי אוטומטי ויכולות התאוששות מאסון

## 📈 אופטימיזציית ביצועים

### דפוסי עיבוד אסינכרוני
```csharp
// Efficient async document processing
await foreach (var document in documentStream.AsAsyncEnumerable())
{
    await ProcessDocumentAsync(document, cancellationToken);
}
```

### ניהול זיכרון
- **עיבוד זרימה**: טיפול במסמכים גדולים ללא בעיות זיכרון
- **ניהול משאבים**: שימוש חוזר יעיל במשאבים יקרים
- **איסוף זבל**: דפוסי הקצאת זיכרון אופטימליים
- **ניהול חיבורים**: מחזור חיים נכון של חיבורי שירותי Azure

### אסטרטגיות מטמון
- **מטמון שאילתות**: מטמון חיפושים שמבוצעים לעיתים קרובות
- **מטמון מסמכים**: מטמון בזיכרון למסמכים חמים
- **מטמון אינדקס**: מטמון אינדקס וקטורי אופטימלי
- **מטמון תוצאות**: מטמון חכם של תגובות שנוצרו

## 📊 שימושים ארגוניים

### ניהול ידע
- **ויקי ארגוני**: חיפוש חכם בבסיסי ידע של החברה
- **מדיניות ונהלים**: הדרכה אוטומטית לציות ונהלים
- **חומרי הדרכה**: עזרה חכמה בלמידה ופיתוח
- **מאגרי מחקר**: מערכות ניתוח מאמרים אקדמיים ומחקריים

### תמיכת לקוחות
- **בסיס ידע תמיכה**: תגובות שירות לקוחות אוטומטיות
- **תיעוד מוצרים**: שליפת מידע חכם על מוצרים
- **מדריכי פתרון בעיות**: עזרה בהקשר לפתרון בעיות
- **מערכות שאלות נפוצות**: יצירת שאלות נפוצות דינמית מאוספי מסמכים

### ציות רגולטורי
- **ניתוח מסמכים משפטיים**: אינטליגנציה של חוזים ומסמכים משפטיים
- **ניטור ציות**: בדיקת ציות רגולטורי אוטומטית
- **הערכת סיכונים**: ניתוח ודיווח סיכונים מבוססי מסמכים
- **תמיכה בביקורת**: גילוי מסמכים חכם לביקורות

## 🚀 פריסה לייצור

### ניטור ותצפית
- **Application Insights**: טלמטריה מפורטת וניטור ביצועים
- **מדדים מותאמים אישית**: מעקב והתראה על KPI עסקיים
- **מעקב מבוזר**: מעקב בקשות מקצה לקצה בין שירותים
- **לוחות מחוונים בריאותיים**: ויזואליזציה בזמן אמת של בריאות וביצועי המערכת

### יכולת הרחבה ואמינות
- **הרחבה אוטומטית**: הרחבה אוטומטית על בסיס עומס ומדדי ביצועים
- **זמינות גבוהה**: פריסה רב-אזורית עם יכולות מעבר לגיבוי
- **בדיקות עומס**: אימות ביצועים תחת תנאי עומס ארגוניים
- **התאוששות מאסון**: נהלי גיבוי ושחזור אוטומטיים

מוכנים לבנות מערכות RAG ארגוניות שיכולות להתמודד עם מסמכים רגישים בקנה מידה? בואו נבנה מערכות ידע חכמות לארגון! 🏢📖✨

## יישום קוד

דוגמת הקוד המלאה לשיעור זה זמינה ב-`05-dotnet-agent-framework.cs`.

כדי להריץ את הדוגמה:

```bash
# Make the script executable (Linux/macOS)
chmod +x 05-dotnet-agent-framework.cs

# Run the .NET Single File App
./05-dotnet-agent-framework.cs
```

או השתמשו ב-`dotnet run` ישירות:

```bash
dotnet run 05-dotnet-agent-framework.cs
```

הקוד מדגים:

1. **התקנת חבילות**: התקנת חבילות NuGet נדרשות עבור Azure AI Agents
2. **תצורת סביבה**: טעינת נקודת קצה והגדרות מודל של Azure AI Foundry
3. **העלאת מסמך**: העלאת מסמך לעיבוד RAG
4. **יצירת חנות וקטורים**: יצירת חנות וקטורים לחיפוש סמנטי
5. **תצורת סוכן**: הגדרת סוכן AI עם יכולות חיפוש קבצים
6. **ביצוע שאילתה**: הרצת שאילתות מול המסמך שהועלה

---

**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום AI [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש להיות מודעים לכך שתרגומים אוטומטיים עשויים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפתו המקורית צריך להיחשב כמקור סמכותי. עבור מידע קריטי, מומלץ להשתמש בתרגום מקצועי אנושי. איננו אחראים לאי הבנות או לפרשנויות שגויות הנובעות משימוש בתרגום זה.