<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T12:29:31+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "ro"
}
-->
# ğŸ”€ Fluxuri de lucru condiÈ›ionale cu Azure AI Foundry (.NET)

## ğŸ“‹ Tutorial pentru fluxuri de lucru bazate pe decizii inteligente

Acest notebook demonstreazÄƒ **modele de fluxuri de lucru condiÈ›ionale** utilizÃ¢nd Azure AI Foundry È™i Microsoft Agent Framework pentru .NET. VeÈ›i Ã®nvÄƒÈ›a cum sÄƒ construiÈ›i fluxuri de lucru sofisticate, bazate pe decizii, care direcÈ›ioneazÄƒ inteligent procesarea pe baza analizei AI, regulilor de afaceri È™i condiÈ›iilor dinamice pentru automatizare la nivel de Ã®ntreprindere.

## ğŸ¯ Obiective de Ã®nvÄƒÈ›are

### ğŸ§  **Arhitectura deciziilor inteligente**
- **Implementarea logicii condiÈ›ionale**: ConstruiÈ›i arbori de decizie complexi cu multiple puncte de ramificare
- **DirecÈ›ionare bazatÄƒ pe AI**: UtilizaÈ›i modelele Azure AI Foundry pentru a lua decizii inteligente de direcÈ›ionare
- **Adaptarea dinamicÄƒ a fluxului de lucru**: ModificaÈ›i comportamentul fluxului de lucru pe baza analizei È™i condiÈ›iilor Ã®n timp real
- **Integrarea regulilor de afaceri**: ÃncorporaÈ›i logica de afaceri È™i cerinÈ›ele de conformitate Ã®n fluxurile de lucru

### ğŸ”€ **Modele avansate de condiÈ›ionare**
- **Luarea deciziilor pe baza mai multor criterii**: EvaluaÈ›i mai mulÈ›i factori pentru deciziile de direcÈ›ionare
- **Procesare conÈ™tientÄƒ de context**: LuaÈ›i decizii pe baza contextului acumulat È™i istoricului fluxului de lucru
- **Modificarea adaptivÄƒ a fluxului de lucru**: AjustaÈ›i dinamic cÄƒile de procesare pe baza condiÈ›iilor Ã®n timp real
- **Integrarea motorului de reguli**: ImplementaÈ›i motoare sofisticate de reguli de afaceri Ã®n fluxurile de lucru

### ğŸ¢ **AplicaÈ›ii condiÈ›ionale pentru Ã®ntreprinderi**
- **Clasificarea È™i direcÈ›ionarea documentelor**: ClasificaÈ›i È™i direcÈ›ionaÈ›i automat documentele cÄƒtre fluxurile de lucru corespunzÄƒtoare
- **Trierea serviciului pentru clienÈ›i**: DirecÈ›ionarea inteligentÄƒ a solicitÄƒrilor clienÈ›ilor cÄƒtre echipe specializate
- **Procesarea conformitÄƒÈ›ii È™i riscurilor**: AplicaÈ›i diferite procese de validare È™i revizuire pe baza evaluÄƒrii riscurilor
- **Fluxuri de lucru pentru asigurarea calitÄƒÈ›ii**: DirecÈ›ionaÈ›i conÈ›inutul prin procesele de revizuire corespunzÄƒtoare pe baza metricilor de calitate

## âš™ï¸ CerinÈ›e preliminare È™i configurare

### ğŸ“¦ **Pachete NuGet necesare**

Pachete avansate pentru procesarea fluxurilor de lucru condiÈ›ionale:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### ğŸ”‘ **Configurarea Azure AI Foundry**

**Resurse Azure necesare:**
- SpaÈ›iu de lucru Azure AI Foundry cu modele de procesare condiÈ›ionalÄƒ
- Abonament Azure cu cote de calcul È™i permisiuni adecvate
- Modele AI implementate pentru luarea deciziilor È™i analiza conÈ›inutului
- (OpÈ›ional) Conexiune Bing Search API pentru capacitÄƒÈ›i de fundamentare

**Configurarea mediului (.env file):**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**Configurarea autentificÄƒrii:**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### ğŸ—ï¸ **Arhitectura fluxului de lucru condiÈ›ional**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**Componente cheie:**
- **Draft Executor**: Agent AI care creeazÄƒ schiÈ›e iniÈ›iale de conÈ›inut din contururi
- **Content Review Executor**: Agent AI care evalueazÄƒ calitatea È™i conformitatea schiÈ›ei
- **Conditional Routing**: LogicÄƒ de decizie care direcÈ›ioneazÄƒ pe baza rezultatelor revizuirii
- **CÄƒi de publicare/revizuire**: CÄƒi de procesare separate pentru conÈ›inutul aprobat vs respins
- **Managementul stÄƒrii**: MenÈ›ine contextul conÈ›inutului È™i revizuirii pe parcursul fluxului de lucru

## ğŸ¨ **Modele de design pentru fluxuri de lucru condiÈ›ionale**

### ğŸ“‹ **ProducÈ›ia de conÈ›inut cu porÈ›i de calitate**
```
Outline â†’ Draft Creation â†’ Quality Review â†’ {Approve: Publish | Reject: Revise}
```

### ğŸ¯ **Procesarea documentelor bazatÄƒ pe risc**
```
Document â†’ Risk Assessment â†’ {Low: Standard | High: Enhanced Review}
```

### ğŸ” **DirecÈ›ionarea inteligentÄƒ a serviciului pentru clienÈ›i**
```
Customer Query â†’ Analysis â†’ {Simple: FAQ Bot | Complex: Human Agent}
```

### ğŸ’¼ **Fluxuri de lucru bazate pe conformitate**
```
Content â†’ Compliance Check â†’ {Pass: Publish | Fail: Legal Review}
```

## ğŸ¢ **Beneficii condiÈ›ionale pentru Ã®ntreprinderi**

### ğŸ¯ **Automatizare inteligentÄƒ**
- **Luarea deciziilor inteligente**: Decizii de direcÈ›ionare bazate pe analiza conÈ›inutului È™i context
- **Procesare adaptivÄƒ**: Fluxuri de lucru care se ajusteazÄƒ automat pe baza condiÈ›iilor Ã®n schimbare
- **Aplicarea regulilor de afaceri**: Aplicarea automatÄƒ a logicii complexe de afaceri È™i a politicilor
- **DirecÈ›ionare conÈ™tientÄƒ de context**: Decizii bazate pe istoricul complet al fluxului de lucru È™i contextul acumulat

### ğŸ“ˆ **ExcelenÈ›Äƒ operaÈ›ionalÄƒ**
- **Alocarea optimizatÄƒ a resurselor**: DirecÈ›ionaÈ›i munca cÄƒtre specialiÈ™tii È™i procesele cele mai potrivite
- **Reducerea intervenÈ›iei manuale**: Luarea automatÄƒ a deciziilor minimizeazÄƒ necesitatea direcÈ›ionÄƒrii umane
- **Timpuri de rezolvare mai rapide**: DirecÈ›ionare directÄƒ cÄƒtre expertiza È™i capacitÄƒÈ›ile de procesare adecvate
- **Aplicare consistentÄƒ**: Aplicarea uniformÄƒ a regulilor de afaceri È™i a criteriilor de decizie

### ğŸ›¡ï¸ **Managementul riscurilor È™i conformitÄƒÈ›ii**
- **Evaluarea automatÄƒ a riscurilor**: Evaluare bazatÄƒ pe AI a nivelurilor de risc ale conÈ›inutului È™i situaÈ›iei
- **Aplicarea conformitÄƒÈ›ii**: DirecÈ›ionare automatÄƒ prin procesele de reglementare necesare
- **Aplicarea protocoalelor de securitate**: MÄƒsuri de securitate Ã®mbunÄƒtÄƒÈ›ite aplicate pe baza evaluÄƒrii riscurilor
- **MenÈ›inerea traseului de audit**: DocumentaÈ›ie completÄƒ a deciziilor de direcÈ›ionare È™i a raÈ›ionamentului

### ğŸ“Š **AnalizÄƒ È™i Ã®mbunÄƒtÄƒÈ›ire continuÄƒ**
- **Analiza deciziilor**: UrmÄƒrirea eficienÈ›ei È™i acurateÈ›ei deciziilor de direcÈ›ionare
- **RecunoaÈ™terea modelelor**: Identificarea tendinÈ›elor È™i modelelor Ã®n deciziile de direcÈ›ionare de-a lungul timpului
- **Optimizarea performanÈ›ei**: ÃmbunÄƒtÄƒÈ›irea continuÄƒ a criteriilor de decizie È™i a eficienÈ›ei direcÈ›ionÄƒrii
- **InteligenÈ›a de afaceri**: Perspective asupra caracteristicilor conÈ›inutului È™i cerinÈ›elor de procesare

### ğŸ”§ **ExcelenÈ›Äƒ tehnicÄƒ**
- **Management persistent al stÄƒrii**: MenÈ›inerea stÄƒrii complexe pe parcursul execuÈ›iei fluxului de lucru
- **ArhitecturÄƒ scalabilÄƒ**: Gestionarea cerinÈ›elor de procesare condiÈ›ionalÄƒ de volum mare
- **CapacitÄƒÈ›i de integrare**: Integrare fÄƒrÄƒ probleme cu sistemele È™i procesele existente de afaceri
- **Monitorizare È™i observabilitate**: UrmÄƒrire cuprinzÄƒtoare a performanÈ›ei fluxului de lucru È™i a deciziilor

SÄƒ construim fluxuri de lucru inteligente, bazate pe decizii, pentru Ã®ntreprinderi cu .NET! ğŸš€

## ğŸ’» Rularea codului

Implementarea completÄƒ este disponibilÄƒ Ã®n `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Aceasta demonstreazÄƒ un **flux de lucru pentru producÈ›ia de conÈ›inut cu porÈ›i de calitate**:

### ğŸ—ï¸ **Arhitectura fluxului de lucru**

```
Content Outline â†’ Draft Creation â†’ Quality Review â†’ Conditional Routing:
                                                      â”œâ”€ Approved (>200 words) â†’ Publish
                                                      â””â”€ Rejected (<200 words) â†’ Review Notification
```

**AgenÈ›i Ã®n fluxul de lucru:**
1. **Evangelist Agent**: CreeazÄƒ schiÈ›e de tutoriale din contururi cu fundamentare Bing
2. **Content Reviewer Agent**: EvalueazÄƒ calitatea schiÈ›ei (numÄƒr de cuvinte, completitudine)
3. **Publisher Agent**: SalveazÄƒ conÈ›inutul aprobat ca fiÈ™iere Markdown cu marcaj temporal

**Executori personalizaÈ›i:**
1. **DraftExecutor**: OrchestrazÄƒ crearea schiÈ›ei
2. **ContentReviewExecutor**: RealizeazÄƒ evaluarea calitÄƒÈ›ii
3. **PublishExecutor**: GestioneazÄƒ publicarea conÈ›inutului aprobat
4. **SendReviewExecutor**: GestioneazÄƒ notificÄƒrile pentru conÈ›inutul respins

### ğŸš€ Rularea exemplului

**CerinÈ›e preliminare:**
- SpaÈ›iu de lucru Azure AI Foundry configurat
- Autentificare Azure CLI (`az login`)
- (OpÈ›ional) Conexiune Bing Search pentru fundamentare

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Sau pe Windows:
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### ğŸ“ Rezultatul aÈ™teptat

Fluxul de lucru va:
1. **Crea agenÈ›i**: IniÈ›ializa trei agenÈ›i specializaÈ›i Azure AI Foundry
2. **Genera schiÈ›a**: Agentul Evangelist creeazÄƒ schiÈ›a tutorialului din contur
3. **Revizuirea conÈ›inutului**: Content Reviewer evalueazÄƒ calitatea schiÈ›ei
4. **DirecÈ›ionare condiÈ›ionalÄƒ**:
   - **DacÄƒ este aprobat (>200 cuvinte)**: Executorul de publicare salveazÄƒ ca fiÈ™ier Markdown
   - **DacÄƒ este respins (<200 cuvinte)**: Trimite notificare de revizuire
5. **AfiÈ™eazÄƒ rezultatele**: AratÄƒ rezultatul final al fluxului de lucru

### ğŸ”§ OpÈ›iuni de personalizare

**ModificaÈ›i criteriile de revizuire:**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**AdÄƒugaÈ›i mai multe cÄƒi condiÈ›ionale:**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**SchimbaÈ›i cerinÈ›ele de conÈ›inut:**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### ğŸ¯ AplicaÈ›ii reale

Acest model de flux de lucru condiÈ›ional este ideal pentru:
- **Sisteme de gestionare a conÈ›inutului**: Fluxuri editoriale automate cu porÈ›i de calitate
- **Procesarea documentelor**: DirecÈ›ionaÈ›i documentele pe baza clasificÄƒrii È™i conformitÄƒÈ›ii
- **Suport pentru clienÈ›i**: DirecÈ›ionarea inteligentÄƒ a tichetelor pe baza complexitÄƒÈ›ii È™i urgenÈ›ei
- **Revizuire legalÄƒ**: DirecÈ›ionaÈ›i contractele pe baza evaluÄƒrii riscurilor È™i valorii
- **Procese HR**: DirecÈ›ionaÈ›i aplicaÈ›iile prin fluxuri de screening corespunzÄƒtoare

### ğŸ” ÃnÈ›elegerea logicii condiÈ›ionale

**FuncÈ›ia de condiÈ›ie:**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

AceastÄƒ funcÈ›ie creeazÄƒ un predicat care:
1. VerificÄƒ dacÄƒ rezultatul este de tip `ReviewResult`
2. ComparÄƒ proprietatea `Result` cu valoarea aÈ™teptatÄƒ
3. ReturneazÄƒ true/false pentru a determina direcÈ›ionarea

**Margini ale fluxului de lucru cu condiÈ›ii:**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### ğŸ“Š FuncÈ›ionalitÄƒÈ›i avansate

**Validarea schemei JSON:**
Fluxul de lucru utilizeazÄƒ scheme JSON pentru a asigura rÄƒspunsuri structurate:

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Integrarea fundamentÄƒrii Bing:**
Agentul Evangelist utilizeazÄƒ fundamentarea Bing pentru a accesa informaÈ›ii Ã®n timp real:

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

Aceasta permite agentului sÄƒ urmeze URL-urile din contur È™i sÄƒ extragÄƒ informaÈ›ii actuale.

### ğŸ›¡ï¸ Gestionarea erorilor

Fluxul de lucru include gestionarea robustÄƒ a erorilor pentru conÈ›inutul respins:
- EÈ™ecurile de revizuire declanÈ™eazÄƒ calea alternativÄƒ
- NotificÄƒrile oferÄƒ motive clare pentru respingere
- ConÈ›inutul este pÄƒstrat pentru revizuire

### ğŸ”„ Extinderea fluxului de lucru

**AdÄƒugaÈ›i un ciclu de revizuire:**
CreaÈ›i un ciclu de feedback care reface automat conÈ›inutul:

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**ImplementaÈ›i revizuirea pe mai multe niveluri:**
AdÄƒugaÈ›i etape multiple de revizuire cu criterii diferite:

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Acest model de flux de lucru condiÈ›ional oferÄƒ fundaÈ›ia pentru construirea sistemelor sofisticate de automatizare inteligentÄƒ pentru Ã®ntreprinderi! ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Declinare de responsabilitate**:  
Acest document a fost tradus folosind serviciul de traducere AI [Co-op Translator](https://github.com/Azure/co-op-translator). DeÈ™i ne strÄƒduim sÄƒ asigurÄƒm acurateÈ›ea, vÄƒ rugÄƒm sÄƒ fiÈ›i conÈ™tienÈ›i cÄƒ traducerile automate pot conÈ›ine erori sau inexactitÄƒÈ›i. Documentul original Ã®n limba sa maternÄƒ ar trebui considerat sursa autoritarÄƒ. Pentru informaÈ›ii critice, se recomandÄƒ traducerea profesionalÄƒ realizatÄƒ de oameni. Nu ne asumÄƒm responsabilitatea pentru neÃ®nÈ›elegerile sau interpretÄƒrile greÈ™ite care pot apÄƒrea din utilizarea acestei traduceri.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->