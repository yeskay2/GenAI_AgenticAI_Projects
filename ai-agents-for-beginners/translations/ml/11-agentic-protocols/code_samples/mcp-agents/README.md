<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5cc6836626047aa055e8960c8484a7d0",
  "translation_date": "2025-12-03T17:44:57+00:00",
  "source_file": "11-agentic-protocols/code_samples/mcp-agents/README.md",
  "language_code": "ml"
}
-->
# MCP เดเดชเดฏเตเดเดฟเดเตเดเต เดเดเดจเตเดฑเต-เดเต-เดเดเดจเตเดฑเต เดเดถเดฏเดตเดฟเดจเดฟเดฎเดฏ เดธเดเดตเดฟเดงเดพเดจเดเตเดเตพ เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเตฝ

> TL;DR - MCP เดเดชเดฏเตเดเดฟเดเตเดเต Agent2Agent Communication เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเดพเดฎเต? เดเดคเต!

MCP เดเดคเดฟเดจเตเดฑเต เดเดฆเตเดฏ เดฒเดเตเดทเตเดฏเดฎเดพเดฏ "LLM-เดเตพเดเตเดเต เดธเดพเดจเตเดฆเตผเดญเตเดฏเด เดจเตฝเดเตฝ" เดเดจเตเดจเดคเดฟเดจเตเดเตเดเดพเตพ เดตเดณเดฐเต เดฎเตเดจเตเดจเตเดเตเดเต เดตเดฟเดเดธเดฟเดเตเดเดฟเดเตเดเตเดฃเตเดเต. [Resumable streams](https://modelcontextprotocol.io/docs/concepts/transports#resumability-and-redelivery), [elicitation](https://modelcontextprotocol.io/specification/2025-06-18/client/elicitation), [sampling](https://modelcontextprotocol.io/specification/2025-06-18/client/sampling), [notifications](https://modelcontextprotocol.io/specification/2025-06-18/basic/utilities/progress) เดเดจเตเดจเดฟเดต เดเตพเดชเตเดชเตเดเต เดชเตเดคเดฟเดฏ เดฎเตเดเตเดเดชเตเดชเตเดเตเดคเตเดคเดฒเตเดเตพ MCP-เดฏเต เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดเดเดจเตเดฑเต-เดเต-เดเดเดจเตเดฑเต เดเดถเดฏเดตเดฟเดจเดฟเดฎเดฏ เดธเดเดตเดฟเดงเดพเดจเดเตเดเตพ เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเดพเตป เดถเดเตเดคเดฎเดพเดฏ เดเดเดฟเดธเตเดฅเดพเดจเดฎเดพเดฏเดฟ เดฎเดพเดฑเตเดฑเดฟเดฏเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต.

## เดเดเดจเตเดฑเต/เดเตเตพ เดเดจเตเดจ เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃ

เดเดเดจเตเดฑเดฟเดเต เดธเตเดตเดญเดพเดตเดฎเตเดณเตเดณ เดเตเดณเตเดเตพ (เดฆเตเตผเดเดเดพเดฒเด เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเด, เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเดฏเดฟเตฝ เดเดงเดฟเด เดเตปเดชเตเดเตเดเตเดเตพ เดเดตเดถเตเดฏเดฎเดพเดเดพเด, เดฎเตเดคเดฒเดพเดฏเดต) เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดจเตเดจ เดเตเดเตเดคเตฝ เดกเตเดตเดฒเดชเตเดชเตผเดฎเดพเตผ MCP เดเดจเตเดฏเตเดเตเดฏเดฎเดฒเตเดฒ เดเดจเตเดจ เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃเดฏเดฟเดฒเดพเดฃเต. เดเดพเดฐเดฃเด MCP-เดฏเตเดเต เดเดฆเตเดฏเดเดพเดฒ เดเตเตพ เดชเตเดฐเดฟเดฎเดฟเดฑเตเดฑเตเดตเต เดเดฆเดพเดนเดฐเดฃเดเตเดเตพ เดฒเดณเดฟเดคเดฎเดพเดฏ เดเดญเตเดฏเตผเดคเตเดฅเดจ-เดฎเดฑเตเดชเดเดฟ เดฎเดพเดคเตเดเดเดณเดฟเตฝ เดเตเดจเตเดฆเตเดฐเตเดเดฐเดฟเดเตเดเดฟเดฐเตเดจเตเดจเดคเดพเดฃเต.

เด เดงเดพเดฐเดฃ เดชเดดเดฏเดคเดพเดฃเต. เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเดฟเดเต เดธเตเดตเดญเดพเดตเดเตเดเตพ เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเตเดณเตเดณ เดถเตเดทเดฟเดเตพเดเตเดเตเดณเตเดณ เดเดจเตเดคเดฐเด เดเดเดฏเตเดเตเดเตเดจเตเดจ เดฐเตเดคเดฟเดฏเดฟเตฝ MCP เดธเตเดชเตเดธเดฟเดซเดฟเดเตเดเตเดทเตป เดเดดเดฟเดเตเด เดเตเดฑเดเตเดเต เดฎเดพเดธเดเตเดเดณเดฟเตฝ เดตเดณเดฐเต เดฎเตเดเตเดเดชเตเดชเตเดเตเดคเตเดคเดฟเดฏเดฟเดเตเดเตเดฃเตเดเต:

- **Streaming & Partial Results**: เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเดฏเดฟเตฝ เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ
- **Resumability**: เดเตเดฒเดฏเดจเตเดฑเตเดเตพ เดกเดฟเดธเตโเดเดฃเดเตเดทเดจเตเดถเตเดทเด เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดคเต เดคเตเดเดฐเดฃเด
- **Durability**: เดซเดฒเดเตเดเตพ เดธเตเตผเดตเตผ เดฑเตเดธเตเดฑเตเดฑเดพเตผเดเตเดเตเดเตพเดเตเดเตเดถเตเดทเดตเตเด เดจเดฟเดฒเดจเดฟเตฝเดเตเดเตเด (เดเดฆเดพ: เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเตเดเตพ เดตเดดเดฟ)
- **Multi-turn**: เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเดฏเดฟเตฝ เดเดจเตเดฑเดฑเดพเดเตเดเตเดตเต เดเตปเดชเตเดเตเดเตเดเตพ (elicitation, sampling เดตเดดเดฟ)

เด เดธเดตเดฟเดถเตเดทเดคเดเตพ เดธเดเดฏเตเดเดฟเดชเตเดชเดฟเดเตเดเต เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดเดเดจเตเดฑเดฟเดเต, เดฎเตพเดเตเดเดฟ-เดเดเดจเตเดฑเต เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเตเดเตพ MCP เดชเตเดฐเตเดเตเดเตเดเตเดเตเดณเดฟเตฝ เดตเดฟเดจเตเดฏเดธเดฟเดเตเดเดพเด.

เดเดฆเดพเดนเดฐเดฃเดคเตเดคเดฟเดจเต, MCP เดธเตเตผเดตเดฑเดฟเตฝ เดฒเดญเตเดฏเดฎเดพเดฏ "เดเตเตพ" เดเดจเตเดจ เดจเดฟเดฒเดฏเดฟเตฝ เดเดฐเต เดเดเดจเตเดฑเดฟเดจเต เดชเดฐเดฟเดเดฃเดฟเดเตเดเดพเด. เดเดคเต MCP เดเตเดฒเดฏเดจเตเดฑเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตเดจเตเดจ เดเดฐเต เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดฒเดฟเดเตเดเตเดทเตป เดจเดฟเดฒเดจเดฟเตฝเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดธเตเดเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเต, เดเดคเต MCP เดธเตเตผเดตเดฑเตเดฎเดพเดฏเดฟ เดเดฐเต เดธเตเดทเตป เดธเตเดฅเดพเดชเดฟเดเตเดเตเดเดฏเตเด เดเดเดจเตเดฑเดฟเดจเต เดตเดฟเดณเดฟเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต.

## เดเดฐเต MCP เดเตเตพ "เดเดเดจเตเดฑเดฟเดเต" เดเดเตเดจเตเดจเดคเต เดเดจเตเดคเตเดเตเดฃเตเดเต?

เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดฒเตเดเตเดเต เดเดเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดฎเตเดฎเตเดชเต, เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเตเดเดณเต เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเดพเตป เดเดตเดถเตเดฏเดฎเดพเดฏ เดเดเดฟเดธเตเดฅเดพเดจ เดธเตเดเดฐเตเดฏ เดถเตเดทเดฟเดเตพ เดเดจเตเดคเดพเดฃเตเดจเตเดจเต เดจเดฟเดถเตเดเดฏเดฟเดเตเดเดพเด.

> เดฆเตเตผเดเดเดพเดฒเด เดธเตเดตเดฏเด เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเดพเตป เดเดดเดฟเดตเตเดณเตเดณ, เดฑเดฟเดฏเตฝ-เดเตเด เดซเตเดกเตเดฌเดพเดเตเดเต เดเดเดฟเดธเตเดฅเดพเดจเดฎเดพเดเตเดเดฟ เดจเดฟเดฐเดตเดงเดฟ เดเดเดชเตเดเดฒเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเตเดฐเดฎเตเดเดฐเดฃเดเตเดเตพ เดเดตเดถเตเดฏเดฎเดพเดฏ เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดชเตเดฐเดตเตผเดคเตเดคเดจเดเตเดเตพ เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเดพเตป เดเดดเดฟเดตเตเดณเตเดณ เดเดฐเต เดเดเดเดฎเดพเดฏเดพเดฃเต เดเดเดจเตเดฑเดฟเดจเต เดจเดฎเตเดเตเดเต เดจเดฟเตผเดตเดเดฟเดเตเดเดพเด.

### 1. Streaming & Partial Results

เดฆเตเตผเดเดเดพเดฒ เดชเตเดฐเดตเตผเดคเตเดคเดจเดเตเดเตพเดเตเดเต เดชเดฐเดฎเตเดชเดฐเดพเดเดค เดเดญเตเดฏเตผเดคเตเดฅเดจ-เดฎเดฑเตเดชเดเดฟ เดฎเดพเดคเตเดเดเตพ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเดฟเดฒเตเดฒ. เดเดเดจเตเดฑเตเดเตพ เดจเตฝเดเตเดฃเตเดเดคเต:

- เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ
- เดเดเดเตเดเดพเดฒ เดซเดฒเดเตเดเตพ

**MCP เดชเดฟเดจเตเดคเตเดฃ**: เดฑเดฟเดธเตเดดเตโเดธเต เดเดชเตเดกเตเดฑเตเดฑเต เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเตพ เดธเตเดฑเตเดฑเตเดฐเตเดฎเดฟเดเดเต เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเตพ เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต, เดเดจเตเดจเดพเตฝ เดเดคเต JSON-RPC-เดจเตเดฑเต 1:1 เดเดญเตเดฏเตผเดคเตเดฅเดจ/เดฎเดฑเตเดชเดเดฟ เดฎเดพเดคเตเดเดฏเตเดฎเดพเดฏเดฟ เดธเดเดเตผเดทเดเตเดเตพ เดเดดเดฟเดตเดพเดเตเดเดพเตป เดถเตเดฐเดฆเตเดงเดพเดชเตเตผเดตเตเดตเด เดฐเตเดชเดเตฝเดชเตเดชเดจ เดเตเดฏเตเดฏเตเดฃเตเดเดคเตเดฃเตเดเต.

| เดธเดตเดฟเดถเตเดทเดค                    | เดเดชเดฏเตเดเดเตเดธเต                                                                                                                                                                       | MCP เดชเดฟเดจเตเดคเตเดฃ                                                                                |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------ |
| เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ | เดเดชเดฏเตเดเตเดคเดพเดตเต เดเดฐเต เดเตเดกเตเดฌเตเดธเต เดฎเตเดเตเดฐเตเดทเตป เดเดพเดธเตเดเต เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต. เดเดเดจเตเดฑเต เดชเตเดฐเตเดเดคเดฟ เดธเตเดฑเตเดฑเตเดฐเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต: "10% - เดกเดฟเดชเตเตปเดกเตปเดธเดฟเดเตพ เดตเดฟเดถเดเดฒเดจเด เดเตเดฏเตเดฏเตเดจเตเดจเต... 25% - เดเตเดชเตเดชเตโเดธเตโเดเตเดฐเดฟเดชเตเดฑเตเดฑเต เดซเดฏเดฒเตเดเตพ เดฎเดพเดฑเตเดฑเตเดจเตเดจเต... 50% - เดเดฎเตเดชเตเตผเดเตเดเตเดเตพ เดเดชเตเดกเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเต..."          | โ เดชเตเดฐเตเดเดคเดฟ เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเตพ                                                                  |
| เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเตพ            | "เดเดฐเต เดชเตเดธเตเดคเดเด เดธเตเดทเตเดเดฟเดเตเดเตเด" เดเดพเดธเตเดเต เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเตพ เดธเตเดฑเตเดฑเตเดฐเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต, เดเดฆเดพ., 1) เดเดฅเดพ เดเดเดจเดฏเตเดเต เดเดเตเดเตโเดฒเตเตป, 2) เดเดพเดชเตเดฑเตเดฑเตผ เดฒเดฟเดธเตเดฑเตเดฑเต, 3) เดเดฐเต เดเดพเดชเตเดฑเตเดฑเดฑเตเด เดชเตเตผเดคเตเดคเดฟเดฏเดพเดเตเดฎเตเดชเตเตพ. เดนเตเดธเตเดฑเตเดฑเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเดพเด, เดฑเดฆเตเดฆเดพเดเตเดเดพเด, เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดคเตเดเตเดเดฟเดฒเตเด เดเดเตเดเดคเตเดคเดฟเตฝ เดคเดฟเดฐเดฟเดเตเดเตเดตเดฟเดเดพเด. | โ เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเตพ "เดตเดฟเดชเตเดฒเตเดเดฐเดฟเดเตเดเดพเด" เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเตพ เดเตพเดชเตเดชเตเดเตเดคเตเดคเดพเตป (PR 383, 776) |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>เดเดฟเดคเตเดฐเด 1:</strong> เดฆเตเตผเดเดเดพเดฒ เดเดพเดธเตเดเดฟเดจเดฟเดเต MCP เดเดเดจเตเดฑเต เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเดณเตเด เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเดณเตเด เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเดฟเดฒเตเดเตเดเต เดเดเตเดเดจเต เดธเตเดฑเตเดฑเตเดฐเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต เดเดจเตเดจเต เด เดกเดฏเดเตเดฐเดพเด เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต, เดเดชเดฏเตเดเตเดคเดพเดตเดฟเดจเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ เดฑเดฟเดฏเตฝ เดเตเดฎเดฟเตฝ เดจเดฟเดฐเตเดเตเดทเดฟเดเตเดเดพเตป เดเดดเดฟเดฏเตเดจเตเดจเต.
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดชเต<br/>(MCP เดเตเดฒเดฏเดจเตเดฑเต)
    participant Server as MCP เดธเตเตผเดตเตผ<br/>(เดเดเดจเตเดฑเต เดเตเตพ)

    User->>Host: เดฆเตเตผเดเดเดพเดฒ เดชเตเดฐเดตเตผเดคเตเดคเดจเด เดเดฐเดเดญเดฟเดเตเดเตเด
    Host->>Server: agent_tool() เดตเดฟเดณเดฟเดเตเดเตเด

    loop เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ
        Server-->>Host: เดชเตเดฐเตเดเดคเดฟ + เดญเดพเดเดฟเด เดซเดฒเดเตเดเตพ
        Host-->>User: เดธเตเดเตเดฐเตเด เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ
    end

    Server-->>Host: โ เดเดจเตเดคเดฟเดฎ เดซเดฒเด
    Host-->>User: เดชเตเตผเดคเตเดคเดฟเดฏเดพเดฏเดฟ
```
### 2. Resumability

เดเดเดจเตเดฑเตเดเตพ เดจเตเดฑเตเดฑเตโเดตเตผเดเตเดเต เดคเดเดธเตเดธเดเตเดเดณเต เดธเตเดเดชเตเดฐเดฆเดฎเดพเดฏเดฟ เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเดฃเด:

- (เดเตเดฒเดฏเดจเตเดฑเต) เดกเดฟเดธเตโเดเดฃเดเตเดทเดจเตเดถเตเดทเด เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด
- เดเดตเตผ เดเดตเดธเดพเดจเดฟเดเตเดเดฟเดเดคเตเดคเต เดจเดฟเดจเตเดจเต เดคเตเดเดฐเดฃเด (เดธเดจเตเดฆเตเดถเด เดตเตเดฃเตเดเตเด เดจเตฝเดเตเด)

**MCP เดชเดฟเดจเตเดคเตเดฃ**: MCP StreamableHTTP เดเตเดฐเดพเตปเดธเตเดชเตเตผเดเตเดเต เดเดจเตเดจเต เดธเตเดทเตป เดชเตเดจเดฐเดพเดฐเดเดญเดจเดตเตเด เดธเดจเตเดฆเตเดถเด เดตเตเดฃเตเดเตเด เดจเตฝเดเดฒเตเด เดธเตเดทเตป เดเดกเดฟเดเดณเตเด เดเดตเดธเดพเดจ เดเดตเดจเตเดฑเต เดเดกเดฟเดเดณเตเด เดเดชเดฏเตเดเดฟเดเตเดเต เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเดจเตเดจเต. เดเดตเดฟเดเต เดชเตเดฐเดงเดพเดจเดฎเดพเดฏเตเดณเตเดณเดคเต เดธเตเตผเดตเตผ เดเดฐเต EventStore เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฃเด, เดเดคเต เดเตเดฒเดฏเดจเตเดฑเต เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดฎเตเดชเตเตพ เดเดตเดจเตเดฑเต เดฑเตเดชเตเดฒเตเดเตพ เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต.  
เดเตเดฐเดพเตปเดธเตเดชเตเตผเดเตเดเต-เดเดเตเดจเตเดธเตเดฑเตเดฑเดฟเดเต เดฑเดฟเดธเตเดฏเตเดฎเดฌเดฟเตพ เดธเตเดฑเตเดฑเตเดฐเตเดฎเตเดเตพ เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดจเตเดจ เดเดฐเต เดเดฎเตเดฎเตเดฏเตเดฃเดฟเดฑเตเดฑเดฟ เดชเตเดฐเตเดชเตเดชเตเดธเตฝ (PR #975) เดเดฃเตเดเต.

| เดธเดตเดฟเดถเตเดทเดค      | เดเดชเดฏเตเดเดเตเดธเต                                                                                                                                                   | MCP เดชเดฟเดจเตเดคเตเดฃ                                                                |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| Resumability | เดฆเตเตผเดเดเดพเดฒ เดเดพเดธเตเดเดฟเดจเดฟเดเต เดเตเดฒเดฏเดจเตเดฑเต เดกเดฟเดธเตโเดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเต. เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดฎเตเดชเตเตพ, เดธเตเดทเตป เดจเดทเตเดเดชเตเดชเตเดเตเด เดเดตเดจเตเดฑเตเดเตพ เดตเตเดฃเตเดเตเด เดชเตเดฒเต เดเตเดฏเตเดคเต, seamless เดเดฏเดฟ เดคเตเดเดฐเตเด. | โ StreamableHTTP เดเตเดฐเดพเตปเดธเตเดชเตเตผเดเตเดเต เดธเตเดทเตป เดเดกเดฟเดเตพ, เดเดตเดจเตเดฑเต เดฑเตเดชเตเดฒเต, EventStore |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>เดเดฟเดคเตเดฐเด 2:</strong> MCP-เดฏเตเดเต StreamableHTTP เดเตเดฐเดพเตปเดธเตเดชเตเตผเดเตเดเต, เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ เดเดจเตเดจเดฟเดต เดเดเตเดเดจเต seamless เดธเตเดทเตป เดชเตเดจเดฐเดพเดฐเดเดญเดจเด เดธเดพเดงเตเดฏเดฎเดพเดเตเดเตเดจเตเดจเต เดเดจเตเดจเต เด เดกเดฏเดเตเดฐเดพเด เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต: เดเตเดฒเดฏเดจเตเดฑเต เดกเดฟเดธเตโเดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดคเดพเตฝ, เดเดคเต เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดคเต เดจเดทเตเดเดชเตเดชเตเดเตเด เดเดตเดจเตเดฑเตเดเตพ เดตเตเดฃเตเดเตเด เดชเตเดฒเต เดเตเดฏเตเดฏเตเดเดฏเตเด เดเดพเดธเตเดเต เดชเตเดฐเตเดเดคเดฟ เดจเดทเตเดเดชเตเดชเตเดเดพเดคเต เดคเตเดเดฐเตเดฎเตเดจเตเดจเตเด.
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดชเต<br/>(MCP เดเตเดฒเดฏเดจเตเดฑเต)
    participant Server as MCP เดธเตเตผเดตเตผ<br/>(เดเดเดจเตเดฑเต เดเตเตพ)
    participant Store as เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ

    User->>Host: เดเดพเดธเตโเดเต เดเดฐเดเดญเดฟเดเตเดเตเด
    Host->>Server: เดเตเตพ เดตเดฟเดณเดฟเดเตเดเตเด [เดธเตเดทเตป: abc123]
    Server->>Store: เดเดตเดจเตเดฑเตเดเตพ เดธเดเดฐเดเตเดทเดฟเดเตเดเตเด

    Note over Host,Server: ๐ฅ เดเดฃเดเตเดทเตป เดจเดทเตเดเดชเตเดชเตเดเตเดเต

    Host->>Server: เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด [เดธเตเดทเตป: abc123]
    Store-->>Server: เดเดตเดจเตเดฑเตเดเตพ เดตเตเดฃเตเดเตเด เดชเตเดฒเต เดเตเดฏเตเดฏเตเด
    Server-->>Host: เดเดพเดเตเดเต เดเดชเตเดชเต + เดคเตเดเดฐเดฃเด
    Host-->>User: โ เดชเตเตผเดคเตเดคเดฟเดฏเดพเดฏเดฟ
```
### 3. Durability

เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเตเดเตพเดเตเดเต เดธเตเดฅเดฟเดฐเดฎเดพเดฏ เดธเตเดฑเตเดฑเตเดฑเตเดฑเต เดเดตเดถเตเดฏเดฎเตเดฃเตเดเต:

- เดซเดฒเดเตเดเตพ เดธเตเตผเดตเตผ เดฑเตเดธเตเดฑเตเดฑเดพเตผเดเตเดเตเดเตพเดเตเดเตเดถเตเดทเดตเตเด เดจเดฟเดฒเดจเดฟเตฝเดเตเดเตเด
- เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต เดเดเตเดเต-เดเดซเต-เดฌเดพเตปเดกเต เดเดฏเดฟ เดฑเดฟเดเตเดฐเตเดตเต เดเตเดฏเตเดฏเดพเด
- เดธเตเดทเดจเตเดเตพเดเตเดเดฟเดเดฏเดฟเตฝ เดชเตเดฐเตเดเดคเดฟ เดเตเดฐเดพเดเตเดเดฟเดเดเต

**MCP เดชเดฟเดจเตเดคเตเดฃ**: MCP เดเดชเตเดชเตเตพ เดเตเตพ เดเตเตพเดธเดฟเดจเดพเดฏเดฟ เดเดฐเต เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเต เดฑเดฟเดเตเดเตเตบ เดเตเดชเตเดชเต เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเดจเตเดจเต. เดเดจเตเดจเต, เดเดฐเต เดธเดพเดงเตเดฏเดฎเดพเดฏ เดฎเดพเดคเตเด เดเดฐเต เดฑเดฟเดธเตเดดเตโเดธเต เดธเตเดทเตเดเดฟเดเตเดเตเดเดฏเตเด เดเดเตป เดเดฐเต เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเต เดฑเดฟเดเตเดเตเตบ เดเตเดฏเตเดฏเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจ เดเดฐเต เดเตเตพ เดฐเตเดชเดเตฝเดชเตเดชเดจ เดเตเดฏเตเดฏเตเด เดเดจเตเดจเดคเดพเดฃเต. เดเตเตพ เดชเดถเตเดเดพเดคเตเดคเดฒเดคเตเดคเดฟเตฝ เดเดพเดธเตเดเต เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเตเดเดฏเตเด เดฑเดฟเดธเตเดดเตโเดธเต เดเดชเตเดกเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดเดฏเตเด เดเตเดฏเตเดฏเดพเด. เดฎเดฑเตเดตเดถเดคเตเดคเต, เดเตเดฒเดฏเดจเตเดฑเต เด เดฑเดฟเดธเตเดดเตโเดธเดฟเดจเตเดฑเต เดธเตเดฑเตเดฑเตเดฑเตเดฑเต เดชเตเตพ เดเตเดฏเตเดฏเดพเตป เดคเดฟเดฐเดเตเดเตเดเตเดเตเดเดพเด, เดญเดพเดเดฟเด เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดชเตเตผเดฃเตเดฃ เดซเดฒเดเตเดเตพ เดฒเดญเดฟเดเตเดเดพเตป (เดธเตเตผเดตเตผ เดจเตฝเดเตเดจเตเดจ เดฑเดฟเดธเตเดดเตโเดธเต เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดเดเดฟเดธเตเดฅเดพเดจเดฎเดพเดเตเดเดฟ) เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพเดเตเดเดพเดฏเดฟ เดฑเดฟเดธเตเดดเตโเดธเดฟเตฝ เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเดพเด.

เดเดตเดฟเดเต เดเดฐเต เดชเดฐเดฟเดฎเดฟเดคเดฟ เดเดจเตเดคเตเดจเตเดจเดพเตฝ, เดฑเดฟเดธเตเดดเตโเดธเตเดเตพ เดชเตเตพ เดเตเดฏเตเดฏเตเดเดฏเต เดเดชเตเดกเตเดฑเตเดฑเตเดเตพเดเตเดเดพเดฏเดฟ เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเตเดเดฏเต เดเตเดฏเตเดฏเตเดจเตเดจเดคเต เดธเตเดเตเดฏเดฟเดฒเดฟเตฝ เดชเตเดฐเดคเตเดฏเดพเดเดพเดคเดเตเดเดณเตเดเต เดฑเดฟเดธเตเดดเตโเดธเตเดเตพ เดเดชเดญเตเดเดฟเดเตเดเดพเด. เดธเตเตผเดตเตผ เดเตเดฒเดฏเดจเตเดฑเต/เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเดฟเดฒเตเดเตเดเต เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดเดฑเดฟเดฏเดฟเดเตเดเดพเตป เดตเดฟเดณเดฟเดเตเดเดพเดตเตเดจเตเดจ เดตเตเดฌเตโเดนเตเดเตเดเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเตเดฐเดฟเดเดฑเตเดเตพ เดเตพเดชเตเดชเตเดเตเดคเตเดคเดพเดจเตเดณเตเดณ เดธเดพเดงเตเดฏเดค เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดจเตเดจ เดเดฐเต เดคเตเดฑเดจเตเดจ เดเดฎเตเดฎเตเดฏเตเดฃเดฟเดฑเตเดฑเดฟ เดชเตเดฐเตเดชเตเดชเตเดธเตฝ (#992 เดเตพเดชเตเดชเตเดเต) เดเดฃเตเดเต.

| เดธเดตเดฟเดถเตเดทเดค    | เดเดชเดฏเตเดเดเตเดธเต                                                                                                                                        | MCP เดชเดฟเดจเตเดคเตเดฃ                                                        |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| Durability | เดกเดพเดฑเตเดฑ เดฎเตเดเตเดฐเตเดทเตป เดเดพเดธเตเดเดฟเดจเดฟเดเต เดธเตเตผเดตเตผ เดเตเดฐเดพเดทเต เดเตเดฏเตเดฏเตเดจเตเดจเต. เดซเดฒเดเตเดเดณเตเด เดชเตเดฐเตเดเดคเดฟเดฏเตเด เดฑเตเดธเตเดฑเตเดฑเดพเตผเดเตเดเดฟเดจเตเดถเตเดทเด เดจเดฟเดฒเดจเดฟเตฝเดเตเดเตเด, เดเตเดฒเดฏเดจเตเดฑเต เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเต เดธเตเดฅเดฟเดฐเดฎเดพเดฏ เดฑเดฟเดธเตเดดเตโเดธเดฟเตฝ เดจเดฟเดจเตเดจเต เดคเตเดเดฐเตเด. | โ เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเตเดเตพ เดธเตเดฅเดฟเดฐเดฎเดพเดฏ เดธเตเดฑเตเดฑเตเดฑเตเดเตเด เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเดณเตเด |

เดเดจเตเดจเต, เดเดฐเต เดธเดพเดงเดพเดฐเดฃ เดฎเดพเดคเตเด เดเดฐเต เดฑเดฟเดธเตเดดเตโเดธเต เดธเตเดทเตเดเดฟเดเตเดเตเดเดฏเตเด เดเดเตป เดเดฐเต เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเต เดฑเดฟเดเตเดเตเตบ เดเตเดฏเตเดฏเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจ เดเดฐเต เดเตเตพ เดฐเตเดชเดเตฝเดชเตเดชเดจ เดเตเดฏเตเดฏเตเด เดเดจเตเดจเดคเดพเดฃเต. เดเตเตพ เดชเดถเตเดเดพเดคเตเดคเดฒเดคเตเดคเดฟเตฝ เดเดพเดธเตเดเต เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเตเดเดฏเตเด, เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดชเดพเตผเดทเตเดฏเตฝ เดซเดฒเดเตเดเตพ เดเดฏเดฟ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจ เดฑเดฟเดธเตเดดเตโเดธเต เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเตพ เดจเตฝเดเตเดเดฏเตเด, เดเดตเดถเตเดฏเดฎเดพเดฏเดชเตเดชเตเตพ เดฑเดฟเดธเตเดดเตโเดธเดฟเดฒเต เดเดณเตเดณเดเดเตเดเด เดเดชเตเดกเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต.

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>เดเดฟเดคเตเดฐเด 3:</strong> เดฆเตเตผเดเดเดพเดฒ เดเดพเดธเตเดเตเดเตพ เดธเตเตผเดตเตผ เดฑเตเดธเตเดฑเตเดฑเดพเตผเดเตเดเตเดเตพเดเตเดเต เดถเตเดทเดตเตเด เดจเดฟเดฒเดจเดฟเตฝเดเตเดเดพเตป MCP เดเดเดจเตเดฑเตเดเตพ เดธเตเดฅเดฟเดฐเดฎเดพเดฏ เดฑเดฟเดธเตเดดเตโเดธเตเดเดณเตเด เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเดณเตเด เดเดเตเดเดจเต เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเต เดเดจเตเดจเต เด เดกเดฏเดเตเดฐเดพเด เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต, เดเตเดฒเดฏเดจเตเดฑเตเดเตพเดเตเดเต เดชเตเดฐเตเดเดคเดฟ เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเดพเดจเตเด เดชเดฐเดพเดเดฏเดเตเดเตพเดเตเดเตเดถเตเดทเด เดซเดฒเดเตเดเตพ เดฑเดฟเดเตเดฐเตเดตเต เดเตเดฏเตเดฏเดพเดจเตเด เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต.
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดชเต<br/>(MCP เดเตเดฒเดฏเดจเตเดฑเต)
    participant Server as MCP เดธเตเตผเดตเตผ<br/>(เดเดเดจเตเดฑเต เดเตเตพ)
    participant DB as เดธเตเดฅเดฟเดฐเดฎเดพเดฏ เดธเดเดญเดฐเดฃเด

    User->>Host: เดเดพเดธเตโเดเต เดเดฐเดเดญเดฟเดเตเดเตเด
    Host->>Server: เดเตเตพ เดตเดฟเดณเดฟเดเตเดเตเด
    Server->>DB: เดฑเดฟเดธเตเดดเตโเดธเต เดธเตเดทเตเดเดฟเดเตเดเตเด + เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ
    Server-->>Host: ๐ เดฑเดฟเดธเตเดดเตโเดธเต เดฒเดฟเดเตเดเต

    Note over Server: ๐ฅ เดธเตเตผเดตเตผ เดฑเตเดธเตเดฑเตเดฑเดพเตผเดเตเดเต

    User->>Host: เดจเดฟเดฒ เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด
    Host->>Server: เดฑเดฟเดธเตเดดเตโเดธเต เดจเตเดเตเด
    Server->>DB: เดธเตเดฑเตเดฑเตเดฑเตเดฑเต เดฒเตเดกเต เดเตเดฏเตเดฏเตเด
    Server-->>Host: เดจเดฟเดฒเดตเดฟเดฒเต เดชเตเดฐเตเดเดคเดฟ
    Server->>DB: เดชเตเตผเดคเตเดคเดฟเดฏเดพเดเตเดเตเด + เดเดฑเดฟเดฏเดฟเดเตเดเตเด
    Host-->>User: โ เดชเตเตผเดคเตเดคเดฟเดฏเดพเดฏเดฟ
```
### 4. เดฎเตพเดเตเดเดฟ-เดเตเตบ เดเดจเตเดฑเดฑเดพเดเตเดทเดจเตเดเตพ

เดเดเดจเตเดฑเตเดเตพ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเดฏเดฟเตฝ เดเดงเดฟเด เดเตปเดชเตเดเตเดเตเดเตพ เดเดตเดถเตเดฏเดฎเดพเดเดพเด:

- เดฎเดจเตเดทเตเดฏ เดตเตเดฏเดเตเดคเตเดเดฐเดฃเดตเตเด เดเดเดเตเดเดพเดฐเดตเตเด
- เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดคเตเดฐเตเดฎเดพเดจเดเตเดเตพเดเตเดเต AI เดธเดนเดพเดฏเด
- เดกเตเดจเดพเดฎเดฟเดเต เดชเดพเดฐเดพเดฎเตเดฑเตเดฑเตผ เดเตเดฐเดฎเตเดเดฐเดฃเด

**MCP เดชเดฟเดจเตเดคเตเดฃ**: เดธเดพเดเดชเตเดฒเดฟเดเดเต (AI เดเตปเดชเตเดเตเดเดฟเดจเดพเดฏเดฟ) เดเดฒเดฟเดธเดฟเดฑเตเดฑเตเดทเตป (เดฎเดจเตเดทเตเดฏ เดเตปเดชเตเดเตเดเดฟเดจเดพเดฏเดฟ) เดตเดดเดฟ เดชเตเตผเดฃเตเดฃเดฎเดพเดฏเตเด เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเดจเตเดจเต.

| เดธเดตเดฟเดถเตเดทเดค                 | เดเดชเดฏเตเดเดเตเดธเต                                                                                                                                     | MCP เดชเดฟเดจเตเดคเตเดฃ                                           |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------- |
| เดฎเตพเดเตเดเดฟ-เดเตเตบ เดเดจเตเดฑเดฑเดพเดเตเดทเดจเตเดเตพ | เดเตเดฐเดพเดตเตฝ เดฌเตเดเตเดเดฟเดเดเต เดเดเดจเตเดฑเต เดเดชเดฏเตเดเตเดคเดพเดตเดฟเตฝ เดจเดฟเดจเตเดจเต เดตเดฟเดฒ เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต, เดคเตเดเตผเดจเตเดจเต AI-เดจเต เดฏเดพเดคเตเดฐเดพ เดกเดพเดฑเตเดฑ เดธเดเดเตเดฐเดนเดฟเดเตเดเดพเตป เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต, เดฌเตเดเตเดเดฟเดเดเต เดเตเดฐเดพเตปเดธเดพเดเตเดทเตป เดชเตเตผเดคเตเดคเดฟเดฏเดพเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดฎเตเดฎเตเดชเต. | โ เดเดฒเดฟเดธเดฟเดฑเตเดฑเตเดทเตป เดฎเดจเตเดทเตเดฏ เดเตปเดชเตเดเตเดเดฟเดจเดพเดฏเดฟ, เดธเดพเดเดชเตเดฒเดฟเดเดเต AI เดเตปเดชเตเดเตเดเดฟเดจเดพเดฏเดฟ |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>เดเดฟเดคเตเดฐเด 4:</strong> MCP เดเดเดจเตเดฑเตเดเตพ เดเดเตเดเดจเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเต เดฎเดจเตเดทเตเดฏ เดเตปเดชเตเดเตเดเต เดเดฒเดฟเดธเดฟเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดเดฏเต AI เดธเดนเดพเดฏเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดเดฏเต เดเตเดฏเตเดฏเตเดจเตเดจเต เดเดจเตเดจเต เด เดกเดฏเดเตเดฐเดพเด เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต, เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเดเตเดเดณเตเด เดกเตเดจเดพเดฎเดฟเดเต เดคเตเดฐเตเดฎเดพเดจเดฎเตเดเตเดเตเดเดฒเตเดเดณเตเด เดชเตเดฒเตเดณเตเดณ เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ, เดฎเตพเดเตเดเดฟ-เดเตเตบ เดตเตผเดเตเดเตโเดซเตเดฒเตเดเดณเต เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเดจเตเดจเต.
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดชเต<br/>(MCP เดเตเดฒเดฏเดจเตเดฑเต)
    participant Server as MCP เดธเตเตผเดตเตผ<br/>(เดเดเดจเตเดฑเต เดเตเตพ)

    User->>Host: เดตเดฟเดฎเดพเดจ เดเดฟเดเตเดเดฑเตเดฑเต เดฌเตเดเตเดเต เดเตเดฏเตเดฏเตเด
    Host->>Server: เดเตเดฐเดพเดตเตฝ_เดเดเดจเตเดฑเต เดตเดฟเดณเดฟเดเตเดเตเด

    Server->>Host: เดตเดฟเดตเดฐเดถเตเดเดฐเดฃเด: "500 เดกเตเดณเตผ เดธเตเดฅเดฟเดฐเตเดเดฐเดฟเดเตเดเดฃเต?"
    Note over Host: เดตเดฟเดตเดฐเดถเตเดเดฐเดฃ เดเตเตพเดฌเดพเดเตเดเต (เดฒเดญเตเดฏเดฎเดพเดฏเดพเตฝ)
    Host->>User: ๐ฐ เดตเดฟเดฒ เดธเตเดฅเดฟเดฐเตเดเดฐเดฟเดเตเดเดฃเต?
    User->>Host: "เดเดคเต"
    Host->>Server: เดธเตเดฅเดฟเดฐเตเดเดฐเดฟเดเตเดเต

    Server->>Host: เดธเดพเดฎเตเดชเดฟเดณเดฟเดเดเต: "เดกเดพเดฑเตเดฑ เดธเดเดเตเดฐเดนเดฟเดเตเดเตเด"
    Note over Host: AI เดเตเตพเดฌเดพเดเตเดเต (เดฒเดญเตเดฏเดฎเดพเดฏเดพเตฝ)
    Host->>Server: เดฑเดฟเดชเตเดชเตเตผเดเตเดเต เดธเดเดเตเดฐเดนเด

    Server->>Host: โ เดตเดฟเดฎเดพเดจเด เดฌเตเดเตเดเต เดเตเดฏเตเดคเต
```
## MCP-เดฏเดฟเตฝ เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเตเดเตพ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ - เดเตเดกเต เดเดตเดฒเตเดเดจเด

เด เดฒเตเดเดจเดคเตเดคเดฟเดจเตเดฑเต เดญเดพเดเดฎเดพเดฏเต, [เดเตเดกเต เดฑเดฟเดชเตเดธเดฟเดฑเตเดฑเดฑเดฟ](https://github.com/victordibia/ai-tutorials/tree/main/MCP%20Agents) MCP Python SDK เดเดชเดฏเตเดเดฟเดเตเดเต StreamableHTTP เดเตเดฐเดพเตปเดธเตเดชเตเตผเดเตเดเต เดเดชเดฏเตเดเดฟเดเตเดเต เดธเตเดทเตป เดชเตเดจเดฐเดพเดฐเดเดญเดจเดตเตเด เดธเดจเตเดฆเตเดถเด เดตเตเดฃเตเดเตเด เดจเตฝเดเดฒเตเด เดเดชเดฏเตเดเดฟเดเตเดเต เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเตเดเตพ เดเดเตเดเดจเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดพเดฎเตเดจเตเดจเต เดเดพเดฃเดฟเดเตเดเตเดจเตเดจ เดชเตเตผเดฃเตเดฃเดฎเดพเดฏ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ เดเดเดเตเดเดฟเดฏเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต. MCP เดถเตเดทเดฟเดเตพ เดเดเตเดเดจเต เดธเดเดฏเตเดเดฟเดชเตเดชเดฟเดเตเดเต เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดเดเดจเตเดฑเตเดเตพ เดชเตเดฒเตเดณเตเดณ เดธเตเดตเดญเดพเดตเดเตเดเตพ เดธเดพเดงเตเดฏเดฎเดพเดเตเดเดพเดฎเตเดจเตเดจเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต.

เดชเตเดฐเดคเตเดฏเตเดเดฟเดเตเดเต, เดฐเดฃเตเดเต เดชเตเดฐเดงเดพเดจ เดเดเดจเตเดฑเต เดเตเดณเตเดเดณเตเดณเตเดณ เดเดฐเต เดธเตเตผเดตเตผ เดเดเตเดเตพ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตเดจเตเดจเต:

- **เดเตเดฐเดพเดตเตฝ เดเดเดจเตเดฑเต** - เดเดฒเดฟเดธเดฟเดฑเตเดฑเตเดทเตป เดตเดดเดฟ เดตเดฟเดฒ เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเดตเตเดฎเดพเดฏเดฟ เดเดฐเต เดฏเดพเดคเตเดฐเดพ เดฌเตเดเตเดเดฟเดเดเต เดธเตเดตเดจเด เดธเดฟเดฎเตเดฒเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเต
- **เดฑเดฟเดธเตผเดเตเดเต เดเดเดจเตเดฑเต** - เดธเดพเดเดชเตเดฒเดฟเดเดเต เดตเดดเดฟ AI เดธเดนเดพเดฏเดคเตเดคเตเดเต เดธเดเดเตเดฐเดนเดเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเต เดเดตเตเดทเดฃ เดชเตเดฐเดตเตผเดคเตเดคเดจเดเตเดเตพ เดจเดเดคเตเดคเตเดจเตเดจเต

เดฐเดฃเตเดเต เดเดเดจเตเดฑเตเดเดณเตเด เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ, เดเดจเตเดฑเดฑเดพเดเตเดเตเดตเต เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเดเตเดเตพ, เดชเตเตผเดฃเตเดฃ เดธเตเดทเตป เดชเตเดจเดฐเดพเดฐเดเดญเดจ เดถเตเดทเดฟเดเตพ เดเดจเตเดจเดฟเดต เดชเตเดฐเดฆเตผเดถเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเต.

### เดชเตเดฐเดงเดพเดจ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ เดเดถเดฏเดเตเดเตพ

เดเดฐเต เดถเตเดทเดฟเดเตเดเตเด เดตเตเดฃเตเดเดฟ เดธเตเตผเดตเตผ-เดธเตเดกเต เดเดเดจเตเดฑเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเตเด เดเตเดฒเดฏเดจเตเดฑเต-เดธเตเดกเต เดนเตเดธเตเดฑเตเดฑเต เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเดฒเตเด เดคเดพเดดเต เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต:

#### Streaming & Progress Updates - เดฑเดฟเดฏเตฝ-เดเตเด เดเดพเดธเตเดเต เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต

เดฆเตเตผเดเดเดพเดฒ เดเดพเดธเตเดเดฟเดจเดฟเดเต เดเดเดจเตเดฑเตเดเตพ เดฑเดฟเดฏเตฝ-เดเตเด เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดจเตฝเดเดพเตป เดธเตเดฑเตเดฑเตเดฐเตเดฎเดฟเดเดเต เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต, เดเดชเดฏเตเดเตเดคเดพเดเตเดเดณเต เดเดพเดธเตเดเต เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเดฟเดจเตเดฏเตเด เดเดเดเตเดเดพเดฒ เดซเดฒเดเตเดเดณเตเดฏเตเด เดเตเดฑเดฟเดเตเดเต เดเดฑเดฟเดฏเดฟเดเตเดเตเดจเตเดจเต.

**เดธเตเตผเดตเตผ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดเดเดจเตเดฑเต เดชเตเดฐเตเดเดคเดฟ เดจเตเดเตเดเดฟเดซเดฟเดเตเดเตเดทเดจเตเดเตพ เดเดฏเดฏเตเดเตเดเตเดจเตเดจเต):**

```python
# เดธเตเตผเดตเตผ/เดธเตเตผเดตเตผ.py - เดฏเดพเดคเตเดฐเดพ เดเดเดจเตเดฑเต เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดเดฏเดฏเตเดเตเดเตเดจเตเดจเต
for i, step in enumerate(steps):
    await ctx.session.send_progress_notification(
        progress_token=ctx.request_id,
        progress=i * 25,
        total=100,
        message=step,
        related_request_id=str(ctx.request_id)
    )
    await anyio.sleep(2)  # เดชเตเดฐเดตเตผเดคเตเดคเดจเด เดเดจเตเดเดฐเดฟเดเตเดเตเด

# เดฎเดฑเตเดฑเตเดฐเต เดฎเดพเตผเดเด: เดตเดฟเดถเดฆเดฎเดพเดฏ เดเดเตเดเดเดเดเตเด เดเดชเตเดกเตเดฑเตเดฑเตเดเตพเดเตเดเดพเดฏเตเดณเตเดณ เดฒเตเดเต เดธเดจเตเดฆเตเดถเดเตเดเตพ
await ctx.session.send_log_message(
    level="info",
    data=f"Processing step {current_step}/{steps} ({progress_percent}%)",
    logger="long_running_agent",
    related_request_id=ctx.request_id,
)
```

**เดเตเดฒเดฏเดจเตเดฑเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดนเตเดธเตเดฑเตเดฑเต เดชเตเดฐเตเดเดคเดฟ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพ เดธเตเดตเตเดเดฐเดฟเดเตเดเตเดจเตเดจเต):**

```python
# เดเตเดฒเดฏเดจเตเดฑเต/เดเตเดฒเดฏเดจเตเดฑเต.py - เดฑเดฟเดฏเตฝ-เดเตเด เดเดฑเดฟเดฏเดฟเดชเตเดชเตเดเตพ เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเตเดจเตเดจ เดเตเดฒเดฏเดจเตเดฑเต
async def message_handler(message) -> None:
    if isinstance(message, types.ServerNotification):
        if isinstance(message.root, types.LoggingMessageNotification):
            console.print(f"๐ก [dim]{message.root.params.data}[/dim]")
        elif isinstance(message.root, types.ProgressNotification):
            progress = message.root.params
            console.print(f"๐ [yellow]{progress.message} ({progress.progress}/{progress.total})[/yellow]")

# เดธเตเดทเตป เดธเตเดทเตเดเดฟเดเตเดเตเดฎเตเดชเตเตพ เดธเดจเตเดฆเตเดถ เดนเดพเตปเดกเตเดฒเตผ เดฐเดเดฟเดธเตเดฑเตเดฑเตผ เดเตเดฏเตเดฏเตเด
async with ClientSession(
    read_stream, write_stream,
    message_handler=message_handler
) as session:
```

#### Elicitation - เดเดชเดฏเตเดเตเดคเต เดเตปเดชเตเดเตเดเต เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตฝ

เดฆเตเตผเดเดเดพเดฒ เดเดพเดธเตเดเดฟเดจเดฟเดเต เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเดเตเดเตพ, เดตเตเดฏเดเตเดคเตเดเดฐเดฃเดเตเดเตพ, เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดเดเตเดเดพเดฐเดเตเดเตพ เดเดตเดถเตเดฏเดฎเดพเดฏเดชเตเดชเตเตพ เดเดเดจเตเดฑเตเดเตพ เดเดชเดฏเตเดเตเดคเต เดเตปเดชเตเดเตเดเต เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเดพเตป เดเดฒเดฟเดธเดฟเดฑเตเดฑเตเดทเตป เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต.

**เดธเตเตผเดตเตผ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดเดเดจเตเดฑเต เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต):**

```python
# เดธเตเตผเดตเตผ/server.py - เดฏเดพเดคเตเดฐเดพ เดเดเดจเตเดฑเต เดตเดฟเดฒ เดธเตเดฅเดฟเดฐเตเดเดฐเดฃเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต
elicit_result = await ctx.session.elicit(
    message=f"Please confirm the estimated price of $1200 for your trip to {destination}",
    requestedSchema=PriceConfirmationSchema.model_json_schema(),
    related_request_id=ctx.request_id,
)

if elicit_result and elicit_result.action == "accept":
    # เดฌเตเดเตเดเดฟเดเดเต เดคเตเดเดฐเตเด
    logger.info(f"User confirmed price: {elicit_result.content}")
elif elicit_result and elicit_result.action == "decline":
    # เดฌเตเดเตเดเดฟเดเดเต เดฑเดฆเตเดฆเดพเดเตเดเตเด
    booking_cancelled = True
```

**เดเตเดฒเดฏเดจเตเดฑเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดนเตเดธเตเดฑเตเดฑเต เดเดฒเดฟเดธเดฟเดฑเตเดฑเตเดทเตป เดเตเตพเดฌเดพเดเตเดเต เดจเตฝเดเตเดจเตเดจเต):**

```python
# เดเตเดฒเดฏเดจเตเดฑเต/เดเตเดฒเดฏเดจเตเดฑเต.py - เดเตเดฒเดฏเดจเตเดฑเต เดเดญเตเดฏเตผเดคเตเดฅเดจเดเตพ เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเตเดจเตเดจเต
async def elicitation_callback(context, params):
    console.print(f"๐ฌ Server is asking for confirmation:")
    console.print(f"   {params.message}")

    response = console.input("Do you accept? (y/n): ").strip().lower()

    if response in ['y', 'yes']:
        return types.ElicitResult(
            action="accept",
            content={"confirm": True, "notes": "Confirmed by user"}
        )
    else:
        return types.ElicitResult(
            action="decline",
            content={"confirm": False, "notes": "Declined by user"}
        )

# เดธเตเดทเตป เดธเตเดทเตเดเดฟเดเตเดเตเดฎเตเดชเตเตพ เดเตเตพเดฌเดพเดเตเดเต เดฐเดเดฟเดธเตเดฑเตเดฑเตผ เดเตเดฏเตเดฏเตเด
async with ClientSession(
    read_stream, write_stream,
    elicitation_callback=elicitation_callback
) as session:
```

#### Sampling - AI เดธเดนเดพเดฏเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตฝ

เดธเดพเดเดชเตเดฒเดฟเดเดเต เดเดเดจเตเดฑเตเดเตพเดเตเดเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเดฒเดฟเดจเดฟเดเต เดธเดเตเดเตเตผเดฃเตเดฃเดฎเดพเดฏ เดคเตเดฐเตเดฎเดพเดจเดเตเดเตพเดเตเดเต เดเดณเตเดณเดเดเตเดเด เดธเตเดทเตเดเดฟเดเตเดเดพเดจเต LLM เดธเดนเดพเดฏเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเดพเตป เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต. เดเดคเต เดฎเดจเตเดทเตเดฏ-AI เดธเดเดฏเตเดเตเดค เดตเตผเดเตเดเตโเดซเตเดฒเตเดเดณเต เดธเดพเดงเตเดฏเดฎเดพเดเตเดเตเดจเตเดจเต.

**เดธเตเตผเดตเตผ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดเดเดจเตเดฑเต AI เดธเดนเดพเดฏเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต):**

```python
# เดธเตเตผเดตเตผ/เดธเตเตผเดตเตผ.py - เดเดตเตเดทเดฃ เดเดเดจเตเดฑเต AI เดธเดเดเตเดฐเดนเด เดเดญเตเดฏเตผเดคเตเดฅเดฟเดเตเดเตเดจเตเดจเต
sampling_result = await ctx.session.create_message(
    messages=[
        SamplingMessage(
            role="user",
            content=TextContent(type="text", text=f"Please summarize the key findings for research on: {topic}")
        )
    ],
    max_tokens=100,
    related_request_id=ctx.request_id,
)

if sampling_result and sampling_result.content:
    if sampling_result.content.type == "text":
        sampling_summary = sampling_result.content.text
        logger.info(f"Received sampling summary: {sampling_summary}")
```

**เดเตเดฒเดฏเดจเตเดฑเต เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดนเตเดธเตเดฑเตเดฑเต เดธเดพเดเดชเตเดฒเดฟเดเดเต เดเตเตพเดฌเดพเดเตเดเต เดจเตฝเดเตเดจเตเดจเต):**

```python
# เดเตเดฒเดฏเดจเตเดฑเต/เดเตเดฒเดฏเดจเตเดฑเต.py - เดเตเดฒเดฏเดจเตเดฑเต เดธเดพเดฎเตเดชเดฟเดณเดฟเดเดเต เดเดญเตเดฏเตผเดคเตเดฅเดจเดเตพ เดเตเดเดพเดฐเตเดฏเด เดเตเดฏเตเดฏเตเดจเตเดจเต
async def sampling_callback(context, params):
    message_text = params.messages[0].content.text if params.messages else 'No message'
    console.print(f"๐ง Server requested sampling: {message_text}")

    # เดเดฐเต เดฏเดฅเดพเตผเดคเตเดฅ เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเดฟเตฝ, เดเดคเต เดเดฐเต LLM API เดตเดฟเดณเดฟเดเตเดเดพเด
    # เดกเตเดฎเต เดเดตเดถเตเดฏเดเตเดเตพเดเตเดเดพเดฏเดฟ, เดเดเตเดเตพ เดเดฐเต เดฎเตเดเตเดเต เดชเตเดฐเดคเดฟเดเดฐเดฃเด เดจเตฝเดเตเดจเตเดจเต
    mock_response = "Based on current research, MCP has evolved significantly..."

    return types.CreateMessageResult(
        role="assistant",
        content=types.TextContent(type="text", text=mock_response),
        model="interactive-client",
        stopReason="endTurn"
    )

# เดธเตเดทเตป เดธเตเดทเตเดเดฟเดเตเดเตเดฎเตเดชเตเตพ เดเตเตพเดฌเดพเดเตเดเต เดฐเดเดฟเดธเตเดฑเตเดฑเตผ เดเตเดฏเตเดฏเตเด
async with ClientSession(
    read_stream, write_stream,
    sampling_callback=sampling_callback,
    elicitation_callback=elicitation_callback
) as session:
```

#### Resumability - เดกเดฟเดธเตโเดเดฃเดเตเดทเดจเตเดเตพเดเตเดเดฟเดเดฏเดฟเดฒเตเดณเตเดณ เดธเตเดทเตป เดคเตเดเตผเดเตเด

Resumability เดฆเตเตผเดเดเดพเดฒ เดเดเดจเตเดฑเต เดเดพเดธเตเดเตเดเตพ เดเตเดฒเดฏเดจเตเดฑเต เดกเดฟเดธเตโเดเดฃเดเตเดทเดจเตเดเตพเดเตเดเต เดถเตเดทเดตเตเด เดคเตเดเตผเดเตเดเดฏเดพเดฏเดฟ เดคเตเดเดฐเดพเตป เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต. เดเดคเต เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเดฑเตเดเดณเตเด เดชเตเดจเดฐเดพเดฐเดเดญ เดเตเดเตเดเดฃเตเดเดณเตเด เดตเดดเดฟ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตเดจเตเดจเต.

**เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตฝ (เดธเตเตผเดตเตผ เดธเตเดทเตป เดธเตเดฑเตเดฑเตเดฑเตเดฑเต เดจเดฟเดฒเดจเดฟเตผเดคเตเดคเตเดจเตเดจเต):**

```python
# เดธเตผเดตเตผ/เดเดตเดจเตเดฑเต_เดธเตเดฑเตเดฑเตเตผ.py - เดฒเดณเดฟเดคเดฎเดพเดฏ เดเตป-เดฎเตเดฎเตเดฎเดฑเดฟ เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ
class SimpleEventStore(EventStore):
    def __init__(self):
        self._events: list[tuple[StreamId, EventId, JSONRPCMessage]] = []
        self._event_id_counter = 0

    async def store_event(self, stream_id: StreamId, message: JSONRPCMessage) -> EventId:
        """Store an event and return its ID."""
        self._event_id_counter += 1
        event_id = str(self._event_id_counter)
        self._events.append((stream_id, event_id, message))
        return event_id

    async def replay_events_after(self, last_event_id: EventId, send_callback: EventCallback) -> StreamId | None:
        """Replay events after the specified ID for resumption."""
        # เดเดตเดธเดพเดจเดฎเดพเดฏเดฟ เดเดฑเดฟเดฏเดชเตเดชเตเดเตเดจเตเดจ เดเดตเดจเตเดฑเดฟเดจเต เดถเตเดทเด เดเดตเดจเตเดฑเตเดเตพ เดเดฃเตเดเตเดคเตเดคเดฟ เดเดต เดชเตเดจเดฐเดพเดตเตผเดคเตเดคเดฟเดเตเดเตเด
        for _, event_id, message in self._events[start_index:]:
            await send_callback(EventMessage(message, event_id))

# เดธเตผเดตเตผ/เดธเตผเดตเตผ.py - เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ เดธเตเดทเตป เดฎเดพเดจเตเดเดฑเดฟเดฒเตเดเตเดเต เดชเดพเดธเตเดธเต เดเตเดฏเตเดฏเตเดจเตเดจเต
def create_server_app(event_store: Optional[EventStore] = None) -> Starlette:
    server = ResumableServer()

    # เดชเตเดจเดฐเดพเดฐเดเดญเดคเตเดคเดฟเดจเดพเดฏเดฟ เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเดฑเตเดฎเดพเดฏเดฟ เดธเตเดทเตป เดฎเดพเดจเตเดเตผ เดธเตเดทเตเดเดฟเดเตเดเตเด
    session_manager = StreamableHTTPSessionManager(
        app=server,
        event_store=event_store,  # เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ เดธเตเดทเตป เดชเตเดจเดฐเดพเดฐเดเดญเด เดธเดพเดงเตเดฏเดฎเดพเดเตเดเตเดจเตเดจเต
        json_response=False,
        security_settings=security_settings,
    )

    return Starlette(routes=[Mount("/mcp", app=session_manager.handle_request)])

# เดเดชเดฏเตเดเด: เดเดตเดจเตเดฑเต เดธเตเดฑเตเดฑเตเดฑเตเดฎเดพเดฏเดฟ เดเตปเดทเดฟเดฏเดฒเตเดธเต เดเตเดฏเตเดฏเตเด
event_store = SimpleEventStore()
app = create_server_app(event_store)
```

**เดเตเดฒเดฏเดจเตเดฑเต เดฎเตเดฑเตเดฑเดพเดกเดพเดฑเตเดฑเดพ เดฑเดฟเดธเดเดชเตเดทเตป เดเตเดเตเดเดฃเตเดฎเดพเดฏเดฟ (เดเตเดฒเดฏเดจเตเดฑเต เดธเตเดฑเตเดฑเตเตผ เดเตเดฏเตเดค เดธเตเดฑเตเดฑเตเดฑเตเดฑเต เดเดชเดฏเตเดเดฟเดเตเดเต เดตเตเดฃเตเดเตเด เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเต):**

```python
# เดเตเดฒเดฏเดจเตเดฑเต/เดเตเดฒเดฏเดจเตเดฑเต.py - เดฎเตเดฑเตเดฑเดพเดกเดพเดฑเตเดฑเดฏเตเดฎเดพเดฏเดฟ เดเตเดฒเดฏเดจเตเดฑเต เดชเตเดจเดฐเดพเดฐเดเดญเดฟเดเตเดเตฝ
if existing_tokens and existing_tokens.get("resumption_token"):
    # เดจเดพเด เดเดตเดธเดพเดจเดฟเดชเตเดชเดฟเดเตเดเดฟเดเดคเตเดคเต เดจเดฟเดจเตเดจเต เดคเตเดเดฐเดพเตป เดจเดฟเดฒเดตเดฟเดฒเตเดณเตเดณ เดชเตเดจเดฐเดพเดฐเดเดญ เดเตเดเตเดเตบ เดเดชเดฏเตเดเดฟเดเตเดเตเด
    metadata = ClientMessageMetadata(
        resumption_token=existing_tokens["resumption_token"],
    )
else:
    # เดชเตเดจเดฐเดพเดฐเดเดญ เดเตเดเตเดเตบ เดฒเดญเดฟเดเตเดเตเดฎเตเดชเตเตพ เดธเดเดฐเดเตเดทเดฟเดเตเดเดพเตป เดเตเตพเดฌเดพเดเตเดเต เดธเตเดทเตเดเดฟเดเตเดเตเด
    def enhanced_callback(token: str):
        protocol_version = getattr(session, 'protocol_version', None)
        token_manager.save_tokens(session_id, token, protocol_version, command, args)

    metadata = ClientMessageMetadata(
        on_resumption_token_update=enhanced_callback,
    )

# เดชเตเดจเดฐเดพเดฐเดเดญ เดฎเตเดฑเตเดฑเดพเดกเดพเดฑเตเดฑเดฏเตเดฎเดพเดฏเดฟ เดเดญเตเดฏเตผเดคเตเดฅเดจ เดเดฏเดฏเตเดเตเดเตเด
result = await session.send_request(
    types.ClientRequest(
        types.CallToolRequest(
            method="tools/call",
            params=types.CallToolRequestParams(name=command, arguments=args)
        )
    ),
    types.CallToolResult,
    metadata=metadata,
)
```

เดนเตเดธเตเดฑเตเดฑเต เดเดชเตเดฒเดฟเดเตเดเตเดทเตป เดธเตเดทเตป เดเดกเดฟเดเดณเตเด เดฑเดฟเดธเดเดชเตเดทเตป เดเตเดเตเดเดฃเตเดเดณเตเด เดชเตเดฐเดพเดฆเตเดถเดฟเดเดฎเดพเดฏเดฟ เดจเดฟเดฒเดจเดฟเตผเดคเตเดคเตเดจเตเดจเต, เดชเตเดฐเตเดเตเดฐเดธเต เดธเตเดฑเตเดฑ
เดฎเตเดคเตเดคเดคเตเดคเดฟเตฝ, MCP เดชเตเดฐเตเดเตเดเตเดเตเดเตเตพ เดธเตเดชเตเดธเดฟเดซเดฟเดเตเดเตเดทเตป เดตเตเดเดคเตเดคเดฟเตฝ เดตเดฟเดเดธเดฟเดเตเดเตเดเตเดฃเตเดเดฟเดฐเดฟเดเตเดเตเดเดฏเดพเดฃเต; เดเดฑเตเดฑเดตเตเด เดชเตเดคเดฟเดฏ เดเดชเตเดกเตเดฑเตเดฑเตเดเตพเดเตเดเดพเดฏเดฟ เดตเดพเดฏเดจเดเตเดเดพเดฐเดจเต เดเดฆเตเดฏเตเดเดฟเด เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเตเดทเตป เดตเตเดฌเตเดธเตเดฑเตเดฑเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเดพเตป เดชเตเดฐเตเดคเตเดธเดพเดนเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเต - https://modelcontextprotocol.io/introduction

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**เดเดธเดคเตเดฏเดตเดพเดฆเด**:  
เด เดฐเตเด AI เดตเดฟเดตเตผเดคเตเดคเดจ เดธเตเดตเดจเดฎเดพเดฏ [Co-op Translator](https://github.com/Azure/co-op-translator) เดเดชเดฏเตเดเดฟเดเตเดเต เดตเดฟเดตเตผเดคเตเดคเดจเด เดเตเดฏเตเดคเดคเดพเดฃเต. เดเตเดคเตเดฏเดคเดฏเตเดเตเดเดพเดฏเดฟ เดเดเตเดเตพ เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเตเดตเตเดเตเดเดฟเดฒเตเด, เดเดเตเดเตเดฎเตเดฑเตเดฑเดกเต เดตเดฟเดตเตผเดคเตเดคเดจเดเตเดเดณเดฟเตฝ เดชเดฟเดถเดเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดคเตเดฑเตเดฑเดพเดฏ เดตเดฟเดตเดฐเดเตเดเตพ เดเดฃเตเดเดพเดเดพเตป เดธเดพเดงเตเดฏเดคเดฏเตเดฃเตเดเต. เดเดคเดฟเดจเตเดฑเต เดธเตเดตเดพเดญเดพเดตเดฟเด เดญเดพเดทเดฏเดฟเดฒเตเดณเตเดณ เดฎเตเดฒเดฟเด เดฐเตเดเดฏเดพเดฃเต เดตเดฟเดถเตเดตเดธเดจเตเดฏเดฎเดพเดฏ เดเดฑเดตเดฟเดเดฎเดพเดฏเดฟ เดเดฃเดเตเดเดพเดเตเดเตเดฃเตเดเดคเต. เดจเดฟเตผเดฃเดพเดฏเดเดฎเดพเดฏ เดตเดฟเดตเดฐเดเตเดเตพเดเตเดเต, เดชเตเดฐเตเดซเดทเดฃเตฝ เดฎเดจเตเดทเตเดฏ เดตเดฟเดตเตผเดคเตเดคเดจเด เดถเตเดชเดพเตผเดถ เดเตเดฏเตเดฏเตเดจเตเดจเต. เด เดตเดฟเดตเตผเดคเตเดคเดจเด เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเดคเดฟเตฝ เดจเดฟเดจเตเดจเตเดฃเตเดเดพเดเตเดจเตเดจ เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃเดเตพเดเตเดเต เดคเตเดฑเตเดฑเดพเดฏ เดตเตเดฏเดพเดเตเดฏเดพเดจเดเตเดเตพเดเตเดเต เดเดเตเดเตพ เดเดคเตเดคเดฐเดตเดพเดฆเดฟเดเดณเดฒเตเดฒ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->