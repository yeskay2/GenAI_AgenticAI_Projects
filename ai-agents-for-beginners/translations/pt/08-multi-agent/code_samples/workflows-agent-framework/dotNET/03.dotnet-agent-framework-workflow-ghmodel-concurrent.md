<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:16:16+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "pt"
}
-->
# âš¡ Fluxos de Trabalho Concorrentes com Modelos do GitHub (.NET)

## ğŸ“‹ Tutorial de Processamento Paralelo de Alto Desempenho

Este notebook demonstra **padrÃµes de fluxos de trabalho concorrentes** utilizando o Microsoft Agent Framework para .NET e Modelos do GitHub. AprenderÃ¡ a construir fluxos de trabalho de processamento paralelo de alto desempenho que maximizam a capacidade ao executar mÃºltiplos agentes de IA simultaneamente, mantendo a coordenaÃ§Ã£o e a consistÃªncia dos dados.

## ğŸ¯ Objetivos de Aprendizagem

### ğŸš€ **Fundamentos do Processamento Concorrente**
- **ExecuÃ§Ã£o Paralela de Agentes**: Execute mÃºltiplos agentes de IA simultaneamente para obter o mÃ¡ximo desempenho
- **PadrÃµes Async/Await**: Utilize o modelo de programaÃ§Ã£o assÃ­ncrona do .NET para uma concorrÃªncia eficiente
- **IntegraÃ§Ã£o com Modelos do GitHub**: Coordene mÃºltiplas chamadas concorrentes ao serviÃ§o de inferÃªncia de modelos de IA do GitHub
- **GestÃ£o de Recursos**: Gerencie eficientemente os recursos de modelos de IA em operaÃ§Ãµes concorrentes

### ğŸ—ï¸ **Arquitetura AvanÃ§ada de ConcorrÃªncia**
- **Paralelismo Baseado em Tarefas**: Utilize a Biblioteca de Paralelismo de Tarefas do .NET para uma execuÃ§Ã£o concorrente otimizada
- **PadrÃµes de SincronizaÃ§Ã£o**: Coordene agentes concorrentes evitando condiÃ§Ãµes de corrida
- **Balanceamento de Carga**: Distribua o trabalho eficientemente pela capacidade de processamento concorrente disponÃ­vel
- **TolerÃ¢ncia a Falhas**: Lide com falhas individuais de agentes sem interromper o fluxo de trabalho inteiro

### ğŸ¢ **AplicaÃ§Ãµes Concorrentes Empresariais**
- **Processamento de Documentos em Alta Escala**: Processe mÃºltiplos documentos simultaneamente
- **AnÃ¡lise de ConteÃºdo em Tempo Real**: Analise dados de entrada em fluxos simultÃ¢neos
- **OtimizaÃ§Ã£o de Processamento em Lote**: Maximize a capacidade para operaÃ§Ãµes de processamento de dados em larga escala
- **AnÃ¡lise Multimodal**: Processamento paralelo de diferentes tipos e formatos de conteÃºdo

## âš™ï¸ PrÃ©-requisitos e ConfiguraÃ§Ã£o

### ğŸ“¦ **Pacotes NuGet NecessÃ¡rios**

Pacotes essenciais para fluxos de trabalho concorrentes de alto desempenho:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **ConfiguraÃ§Ã£o dos Modelos do GitHub**

**ConfiguraÃ§Ã£o do Ambiente (ficheiro .env):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**ConsideraÃ§Ãµes sobre Processamento Concorrente:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Arquitetura de Fluxo de Trabalho Concorrente**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**Componentes Principais:**
- **Biblioteca de Paralelismo de Tarefas**: Suporte integrado do .NET para operaÃ§Ãµes concorrentes
- **Pool de Agentes**: MÃºltiplas instÃ¢ncias de agentes para processamento paralelo
- **AgregaÃ§Ã£o de Resultados**: CoordenaÃ§Ã£o e fusÃ£o dos resultados de agentes concorrentes
- **Pontos de SincronizaÃ§Ã£o**: Garantir a consistÃªncia dos dados em operaÃ§Ãµes concorrentes

## ğŸ¨ **PadrÃµes de Design de Fluxos de Trabalho Concorrentes**

### ğŸ” **Pesquisa e AnÃ¡lise Paralela**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Processamento de Dados de MÃºltiplas Fontes**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Pipeline de GeraÃ§Ã£o de ConteÃºdo**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Processamento Fan-Out/Fan-In**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **BenefÃ­cios de Desempenho Empresarial**

### âš¡ **Capacidade e Escalabilidade**
- **Escalabilidade Linear de Desempenho**: Adicione mais agentes concorrentes para aumentar a capacidade
- **UtilizaÃ§Ã£o de Recursos**: MÃ¡xima eficiÃªncia da capacidade disponÃ­vel dos modelos de IA
- **ReduÃ§Ã£o do Tempo de Processamento**: ReduÃ§Ã£o significativa do tempo atravÃ©s da execuÃ§Ã£o paralela
- **Escalabilidade ElÃ¡stica**: Ajuste dinamicamente o nÃºmero de agentes concorrentes com base na carga de trabalho

### ğŸ›¡ï¸ **Confiabilidade e ResiliÃªncia**
- **Isolamento de Falhas**: Falhas individuais de agentes nÃ£o afetam outras operaÃ§Ãµes concorrentes
- **DegradaÃ§Ã£o Gradual**: O sistema continua operando com capacidade reduzida de agentes
- **RecuperaÃ§Ã£o de Erros**: Mecanismos automÃ¡ticos de repetiÃ§Ã£o para operaÃ§Ãµes concorrentes falhadas
- **DistribuiÃ§Ã£o de Carga**: DistribuiÃ§Ã£o uniforme do trabalho entre os agentes disponÃ­veis

### ğŸ“Š **MonitorizaÃ§Ã£o de Desempenho**
- **MÃ©tricas de ExecuÃ§Ã£o Concorrente**: Acompanhe o desempenho de todas as operaÃ§Ãµes paralelas
- **AnÃ¡lise de UtilizaÃ§Ã£o de Recursos**: Monitorize o uso de CPU, memÃ³ria e rede
- **AnÃ¡lise de Capacidade**: MeÃ§a os ganhos de eficiÃªncia do processamento concorrente
- **DeteÃ§Ã£o de Gargalos**: Identifique e resolva restriÃ§Ãµes de desempenho

### ğŸ”§ **Desenvolvimento e OperaÃ§Ãµes**
- **Modelo de ProgramaÃ§Ã£o AssÃ­ncrona**: Aproveite os padrÃµes maduros de async/await do .NET
- **CoordenaÃ§Ã£o de Tarefas**: Capacidades integradas de gestÃ£o e coordenaÃ§Ã£o de tarefas
- **GestÃ£o de ExceÃ§Ãµes**: Tratamento abrangente de erros para operaÃ§Ãµes concorrentes
- **Suporte de DepuraÃ§Ã£o**: Ferramentas de depuraÃ§Ã£o do Visual Studio para fluxos de trabalho concorrentes

Vamos construir fluxos de trabalho de IA concorrentes de alto desempenho com .NET! ğŸš€

## ğŸ’» Executando o CÃ³digo

A implementaÃ§Ã£o completa estÃ¡ disponÃ­vel em `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Este ficheiro demonstra um **fluxo de trabalho concorrente Fan-Out/Fan-In** para planeamento de viagens:

### ğŸ—ï¸ **Arquitetura do Fluxo de Trabalho**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**Componentes Principais:**

1. **ConcurrentStartExecutor**: Transmite o pedido do utilizador para todos os agentes simultaneamente
2. **Researcher Agent**: Analisa destinos e atraÃ§Ãµes de forma concorrente
3. **Planner Agent**: Cria planos de viagem detalhados de forma concorrente
4. **ConcurrentAggregationExecutor**: Recolhe e combina os resultados de ambos os agentes

### ğŸ¯ **PadrÃ£o Fan-Out/Fan-In**

Este fluxo de trabalho demonstra o clÃ¡ssico padrÃ£o **Fan-Out/Fan-In**:
- **Fan-Out**: Uma mensagem de entrada Ã© transmitida para mÃºltiplos agentes simultaneamente
- **Processamento Concorrente**: MÃºltiplos agentes trabalham em paralelo na mesma tarefa
- **Fan-In**: Resultados de todos os agentes sÃ£o recolhidos e agregados num Ãºnico output

### ğŸš€ Executando o Exemplo

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Ou no Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ Output Esperado

O fluxo de trabalho irÃ¡:
1. **Transmitir Pedido**: Enviar "Planeie uma viagem para Seattle em dezembro" para ambos os agentes
2. **Processamento Concorrente**: Ambos os agentes trabalham simultaneamente:
   - O pesquisador identifica atraÃ§Ãµes e detalhes
   - O planeador cria o itinerÃ¡rio e logÃ­stica
3. **AgregaÃ§Ã£o**: Combinar ambas as respostas num output abrangente
4. **Exibir Resultados**: Mostrar o plano de viagem combinado com todas as informaÃ§Ãµes

### ğŸ”§ OpÃ§Ãµes de PersonalizaÃ§Ã£o

**Adicionar Mais Agentes Concorrentes:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Modificar InstruÃ§Ãµes dos Agentes:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Alterar a Tarefa:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ AplicaÃ§Ãµes no Mundo Real

Este padrÃ£o concorrente Ã© ideal para:
- **CriaÃ§Ã£o de ConteÃºdo**: MÃºltiplos escritores criando diferentes secÃ§Ãµes simultaneamente
- **RevisÃ£o de CÃ³digo**: MÃºltiplos revisores analisando cÃ³digo de diferentes perspetivas
- **Pesquisa de Mercado**: AnÃ¡lise paralela de diferentes segmentos de mercado
- **Processamento de Documentos**: ExtraÃ§Ã£o, anÃ¡lise e validaÃ§Ã£o concorrentes
- **AnÃ¡lise Multi-Perspectiva**: Obter pontos de vista diversos sobre o mesmo input

### ğŸ” Compreendendo Executores Personalizados

**ConcurrentStartExecutor:**
- Implementa `IMessageHandler<string>` para aceitar input de tipo string
- Transmite mensagens para todos os agentes conectados
- Envia `TurnToken` para acionar o processamento concorrente

**ConcurrentAggregationExecutor:**
- Implementa `IMessageHandler<ChatMessage>` para receber respostas dos agentes
- Recolhe mensagens de forma segura para threads
- Agrega quando todas as respostas esperadas chegam
- Produz o output final utilizando `context.YieldOutputAsync()`

### âš¡ BenefÃ­cios de Desempenho

**Concorrente vs Sequencial:**
- Sequencial: Agente1 (30s) â†’ Agente2 (30s) = **60 segundos no total**
- Concorrente: Agente1 (30s) || Agente2 (30s) = **30 segundos no total**

**Melhoria de Capacidade**: AtÃ© NÃ— mais rÃ¡pido para N agentes concorrentes (dependendo da carga de trabalho e recursos)

### ğŸ›¡ï¸ GestÃ£o de Erros

O fluxo de trabalho lida com falhas individuais de agentes de forma eficiente:
- Se um agente falhar, os outros continuam a processar
- O agregador pode implementar lÃ³gica de timeout
- Resultados parciais podem ser retornados, se necessÃ¡rio

### ğŸ“Š Funcionalidades AvanÃ§adas

**NÃºmero DinÃ¢mico de Agentes:**
Modifique a lÃ³gica de agregaÃ§Ã£o para suportar contagens variÃ¡veis de agentes:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Este padrÃ£o de fluxo de trabalho concorrente Ã© essencial para construir sistemas de agentes de IA escalÃ¡veis e de alto desempenho!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Aviso**:  
Este documento foi traduzido utilizando o serviÃ§o de traduÃ§Ã£o por IA [Co-op Translator](https://github.com/Azure/co-op-translator). Embora nos esforcemos pela precisÃ£o, esteja ciente de que traduÃ§Ãµes automÃ¡ticas podem conter erros ou imprecisÃµes. O documento original na sua lÃ­ngua nativa deve ser considerado a fonte autoritÃ¡ria. Para informaÃ§Ãµes crÃ­ticas, recomenda-se uma traduÃ§Ã£o profissional realizada por humanos. NÃ£o nos responsabilizamos por quaisquer mal-entendidos ou interpretaÃ§Ãµes incorretas decorrentes do uso desta traduÃ§Ã£o.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->