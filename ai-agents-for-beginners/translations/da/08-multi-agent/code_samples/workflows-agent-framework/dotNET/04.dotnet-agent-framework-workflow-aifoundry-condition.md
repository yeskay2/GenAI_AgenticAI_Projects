<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T12:19:09+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "da"
}
-->
# ğŸ”€ Betingede Agentarbejdsgange med Azure AI Foundry (.NET)

## ğŸ“‹ Tutorial om Intelligent Beslutningsbaseret Arbejdsgang

Denne notebook demonstrerer **betingede arbejdsgangsmÃ¸nstre** ved brug af Azure AI Foundry og Microsoft Agent Framework for .NET. Du lÃ¦rer, hvordan man bygger avancerede, beslutningsdrevne arbejdsgange, der intelligent styrer processer baseret pÃ¥ AI-analyse, forretningsregler og dynamiske betingelser for automatisering i virksomhedsklasse.

## ğŸ¯ LÃ¦ringsmÃ¥l

### ğŸ§  **Intelligent Beslutningsarkitektur**
- **Implementering af betinget logik**: Byg komplekse beslutningstrÃ¦er med flere forgreninger
- **AI-drevet routing**: Brug Azure AI Foundry-modeller til at trÃ¦ffe intelligente routingbeslutninger
- **Dynamisk arbejdsgangstilpasning**: Ã†ndr arbejdsgangsadfÃ¦rd baseret pÃ¥ runtime-analyse og betingelser
- **Integration af virksomhedsregler**: Indarbejd forretningslogik og overholdelseskrav i arbejdsgange

### ğŸ”€ **Avancerede betingede mÃ¸nstre**
- **Beslutningstagning med flere kriterier**: Vurder flere faktorer for routingbeslutninger
- **Kontekstbevidst behandling**: TrÃ¦f beslutninger baseret pÃ¥ akkumuleret arbejdsgangskontekst og historik
- **Adaptiv arbejdsgangstilpasning**: Juster behandlingsveje dynamisk baseret pÃ¥ realtidsbetingelser
- **Integration af regelmotor**: Implementer avancerede forretningsregelmotorer i arbejdsgange

### ğŸ¢ **Betingede applikationer i virksomheder**
- **Dokumentklassificering og routing**: Klassificer og rout dokumenter automatisk til passende arbejdsgange
- **Kundeservice triage**: Intelligent routing af kundehenvendelser til specialiserede hÃ¥ndteringsteams
- **Overholdelse og risikobehandling**: Anvend forskellige validerings- og gennemgangsprocesser baseret pÃ¥ risikovurdering
- **Kvalitetssikringsarbejdsgange**: Rout indhold gennem passende gennemgangsprocesser baseret pÃ¥ kvalitetsmÃ¥linger

## âš™ï¸ ForudsÃ¦tninger og opsÃ¦tning

### ğŸ“¦ **PÃ¥krÃ¦vede NuGet-pakker**

Avancerede pakker til betinget arbejdsgangsbehandling:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### ğŸ”‘ **Azure AI Foundry-konfiguration**

**PÃ¥krÃ¦vede Azure-ressourcer:**
- Azure AI Foundry-arbejdsomrÃ¥de med modeller til betinget behandling
- Azure-abonnement med passende compute-kvoter og tilladelser
- Implementerede AI-modeller til beslutningstagning og indholdsanalyse
- (Valgfrit) Bing Search API-forbindelse til grounding-funktioner

**MiljÃ¸konfiguration (.env-fil):**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**AutentificeringsopsÃ¦tning:**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### ğŸ—ï¸ **Arkitektur for betinget arbejdsgang**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**NÃ¸glekomponenter:**
- **Draft Executor**: AI-agent, der skaber indledende indholdsudkast fra outlines
- **Content Review Executor**: AI-agent, der vurderer udkastets kvalitet og overholdelse
- **Betinget routing**: Beslutningslogik, der rout baseret pÃ¥ gennemgangsresultater
- **Publicerings-/gennemgangsveje**: Separate behandlingsveje for godkendt vs afvist indhold
- **Tilstandsstyring**: Vedligeholder indholds- og gennemgangskontekst gennem hele arbejdsgangen

## ğŸ¨ **DesignmÃ¸nstre for betinget arbejdsgang**

### ğŸ“‹ **Indholdsproduktion med kvalitetskontrol**
```
Outline â†’ Draft Creation â†’ Quality Review â†’ {Approve: Publish | Reject: Revise}
```

### ğŸ¯ **Risikobaseret dokumentbehandling**
```
Document â†’ Risk Assessment â†’ {Low: Standard | High: Enhanced Review}
```

### ğŸ” **Intelligent routing i kundeservice**
```
Customer Query â†’ Analysis â†’ {Simple: FAQ Bot | Complex: Human Agent}
```

### ğŸ’¼ **Overholdelsesdrevne arbejdsgange**
```
Content â†’ Compliance Check â†’ {Pass: Publish | Fail: Legal Review}
```

## ğŸ¢ **Fordele ved betingede arbejdsgange i virksomheder**

### ğŸ¯ **Intelligent automatisering**
- **Smart beslutningstagning**: AI-drevne routingbeslutninger baseret pÃ¥ indholdsanalyse og kontekst
- **Adaptiv behandling**: Arbejdsgange, der automatisk tilpasser sig Ã¦ndrede betingelser
- **Overholdelse af forretningsregler**: Automatisk anvendelse af komplekse forretningslogikker og politikker
- **Kontekstbevidst routing**: Beslutninger baseret pÃ¥ fuld arbejdsgangshistorik og akkumuleret kontekst

### ğŸ“ˆ **Operationel ekspertise**
- **Optimeret ressourceallokering**: Rout arbejde til de mest passende specialister og processer
- **Reduceret manuel indgriben**: Automatiseret beslutningstagning minimerer behovet for menneskelig routing
- **Hurtigere lÃ¸sningstider**: Direkte routing til passende ekspertise og behandlingskapaciteter
- **Konsekvent anvendelse**: Ensartet anvendelse af forretningsregler og beslutningskriterier

### ğŸ›¡ï¸ **Risikostyring og overholdelse**
- **Automatiseret risikovurdering**: AI-drevet evaluering af indhold og situationsrisikoniveauer
- **Overholdelsesstyring**: Automatisk routing gennem pÃ¥krÃ¦vede regulatoriske processer
- **Anvendelse af sikkerhedsprotokoller**: Forbedrede sikkerhedsforanstaltninger anvendt baseret pÃ¥ risikovurdering
- **Vedligeholdelse af revisionsspor**: Komplet dokumentation af routingbeslutninger og begrundelser

### ğŸ“Š **Analyse og lÃ¸bende forbedring**
- **Beslutningsanalyse**: Spor effektiviteten og nÃ¸jagtigheden af routingbeslutninger
- **MÃ¸nstergenkendelse**: Identificer tendenser og mÃ¸nstre i routingbeslutninger over tid
- **Performanceoptimering**: LÃ¸bende forbedring af beslutningskriterier og routingeffektivitet
- **Forretningsintelligens**: Indsigt i indholdskarakteristika og behandlingskrav

### ğŸ”§ **Teknisk ekspertise**
- **Vedvarende tilstandsstyring**: Vedligehold kompleks tilstand gennem arbejdsgangens udfÃ¸relse
- **Skalerbar arkitektur**: HÃ¥ndter krav til betinget behandling med hÃ¸j volumen
- **Integrationsmuligheder**: Problemfri integration med eksisterende forretningssystemer og processer
- **OvervÃ¥gning og synlighed**: Omfattende sporing af arbejdsgangsperformance og beslutninger

Lad os bygge intelligente, beslutningsdrevne arbejdsgange til virksomheder med .NET! ğŸš€

## ğŸ’» KÃ¸rsel af koden

Den komplette implementering er tilgÃ¦ngelig i `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Dette demonstrerer en **indholdsproduktionsarbejdsgang med kvalitetskontrol**:

### ğŸ—ï¸ **Arkitektur for arbejdsgang**

```
Content Outline â†’ Draft Creation â†’ Quality Review â†’ Conditional Routing:
                                                      â”œâ”€ Approved (>200 words) â†’ Publish
                                                      â””â”€ Rejected (<200 words) â†’ Review Notification
```

**Agentroller i arbejdsgangen:**
1. **Evangelist Agent**: Skaber tutorial-udkast fra outlines med Bing-grounding
2. **Content Reviewer Agent**: Vurderer udkastets kvalitet (ordantal, fuldstÃ¦ndighed)
3. **Publisher Agent**: Gemmer godkendt indhold som tidsstemplet Markdown-filer

**Tilpassede eksekutorer:**
1. **DraftExecutor**: Orkestrerer udkastoprettelse
2. **ContentReviewExecutor**: UdfÃ¸rer kvalitetsvurdering
3. **PublishExecutor**: HÃ¥ndterer publicering af godkendt indhold
4. **SendReviewExecutor**: Administrerer notifikationer om afvist indhold

### ğŸš€ KÃ¸r eksemplet

**ForudsÃ¦tninger:**
- Konfigureret Azure AI Foundry-arbejdsomrÃ¥de
- Azure CLI-autentificering (`az login`)
- (Valgfrit) Bing Search-forbindelse til grounding

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Eller pÃ¥ Windows:
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### ğŸ“ Forventet output

Arbejdsgangen vil:
1. **Oprette agenter**: Initialisere tre specialiserede Azure AI Foundry-agenter
2. **Generere udkast**: Evangelist-agent skaber tutorial-udkast fra outline
3. **GennemgÃ¥ indhold**: Content Reviewer vurderer udkastets kvalitet
4. **Betinget routing**:
   - **Hvis godkendt (>200 ord)**: Publish Executor gemmer som Markdown-fil
   - **Hvis afvist (<200 ord)**: Send Review Executor sender anmeldelsesnotifikation
5. **Vis resultater**: Viser det endelige arbejdsgangsresultat

### ğŸ”§ Tilpasningsmuligheder

**Ã†ndre gennemgangskriterier:**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**TilfÃ¸j flere betingede veje:**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**Ã†ndre indholdskrav:**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### ğŸ¯ Anvendelser i den virkelige verden

Dette mÃ¸nster for betinget arbejdsgang er ideelt til:
- **Indholdsstyringssystemer**: Automatiserede redaktionelle arbejdsgange med kvalitetskontrol
- **Dokumentbehandling**: Rout dokumenter baseret pÃ¥ klassificering og overholdelse
- **Kundesupport**: Intelligent billet-routing baseret pÃ¥ kompleksitet og hastende karakter
- **Juridisk gennemgang**: Rout kontrakter baseret pÃ¥ risikovurdering og vÃ¦rdi
- **HR-processer**: Rout ansÃ¸gninger gennem passende screeningsarbejdsgange

### ğŸ” ForstÃ¥else af betinget logik

**Betingelsesfunktion:**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

Denne funktion skaber en prÃ¦dikat, der:
1. Kontrollerer, om resultatet er af typen `ReviewResult`
2. Sammenligner egenskaben `Result` med den forventede vÃ¦rdi
3. Returnerer sand/falsk for at bestemme routing

**Arbejdsgangskanter med betingelser:**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### ğŸ“Š Avancerede funktioner

**JSON-schema-validering:**
Arbejdsgangen bruger JSON-schemas til at sikre strukturerede svar:

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Bing-grounding-integration:**
Evangelist-agenten bruger Bing-grounding til at fÃ¥ adgang til realtidsinformation:

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

Dette gÃ¸r det muligt for agenten at fÃ¸lge URL'er i outline og udtrÃ¦kke aktuelle oplysninger.

### ğŸ›¡ï¸ FejlhÃ¥ndtering

Arbejdsgangen inkluderer robust fejlhÃ¥ndtering for afvist indhold:
- Gennemgangsfejl udlÃ¸ser den alternative vej
- Notifikationer giver klare afvisningsÃ¥rsager
- Indhold bevares til revision

### ğŸ”„ Udvidelse af arbejdsgangen

**TilfÃ¸j en revisionsslÃ¸jfe:**
Opret en feedbackslÃ¸jfe, der automatisk genudarbejder indhold:

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**Implementer flerniveaugennemgang:**
TilfÃ¸j flere gennemgangsstadier med forskellige kriterier:

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Dette mÃ¸nster for betinget arbejdsgang giver fundamentet for at bygge avancerede, intelligente automatiseringssystemer til virksomheder! ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Ansvarsfraskrivelse**:  
Dette dokument er blevet oversat ved hjÃ¦lp af AI-oversÃ¦ttelsestjenesten [Co-op Translator](https://github.com/Azure/co-op-translator). Selvom vi bestrÃ¦ber os pÃ¥ nÃ¸jagtighed, skal du vÃ¦re opmÃ¦rksom pÃ¥, at automatiserede oversÃ¦ttelser kan indeholde fejl eller unÃ¸jagtigheder. Det originale dokument pÃ¥ dets oprindelige sprog bÃ¸r betragtes som den autoritative kilde. For kritisk information anbefales professionel menneskelig oversÃ¦ttelse. Vi er ikke ansvarlige for eventuelle misforstÃ¥elser eller fejltolkninger, der opstÃ¥r som fÃ¸lge af brugen af denne oversÃ¦ttelse.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->