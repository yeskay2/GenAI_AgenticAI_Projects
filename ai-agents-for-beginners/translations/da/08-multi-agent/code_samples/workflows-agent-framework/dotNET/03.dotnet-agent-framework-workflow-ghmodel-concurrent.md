<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:21:42+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "da"
}
-->
# âš¡ Samtidige Agentarbejdsgange med GitHub-modeller (.NET)

## ğŸ“‹ Vejledning i hÃ¸jtydende parallel behandling

Denne notebook demonstrerer **samtidige arbejdsgangsmÃ¸nstre** ved brug af Microsoft Agent Framework for .NET og GitHub-modeller. Du lÃ¦rer, hvordan man bygger hÃ¸jtydende arbejdsgange med parallel behandling, der maksimerer gennemstrÃ¸mningen ved at udfÃ¸re flere AI-agenter samtidigt, mens man opretholder koordinering og datakonsistens.

## ğŸ¯ LÃ¦ringsmÃ¥l

### ğŸš€ **GrundlÃ¦ggende om samtidig behandling**
- **Parallel agentudfÃ¸relse**: KÃ¸r flere AI-agenter samtidigt for maksimal ydeevne
- **Async/Await-mÃ¸nstre**: Udnyt .NET's asynkrone programmeringsmodel for effektiv samtidighed
- **GitHub-modeller integration**: Koordiner flere samtidige kald til GitHubs AI-model inferenstjeneste
- **Ressourcestyring**: Effektiv styring af AI-modelressourcer pÃ¥ tvÃ¦rs af samtidige operationer

### ğŸ—ï¸ **Avanceret samtidighedsarkitektur**
- **Opgavebaseret parallelisme**: Brug .NET Task Parallel Library til optimal samtidig udfÃ¸relse
- **SynkroniseringsmÃ¸nstre**: Koordiner samtidige agenter og undgÃ¥ kaplÃ¸bsbetingelser
- **Load Balancing**: Fordel arbejdet effektivt pÃ¥ tvÃ¦rs af tilgÃ¦ngelig kapacitet for samtidig behandling
- **Fejltolerance**: HÃ¥ndter individuelle agentfejl uden at stoppe hele arbejdsgangen

### ğŸ¢ **Samtidige applikationer til erhvervslivet**
- **HÃ¸jvolumen dokumentbehandling**: Behandl flere dokumenter samtidigt
- **Realtidsindholdsanalyse**: Samtidig analyse af indkommende datastrÃ¸mme
- **Batch-behandlingsoptimering**: Maksimer gennemstrÃ¸mningen for storskala databehandlingsoperationer
- **Multimodal analyse**: Parallel behandling af forskellige indholdstyper og formater

## âš™ï¸ ForudsÃ¦tninger og opsÃ¦tning

### ğŸ“¦ **NÃ¸dvendige NuGet-pakker**

Vigtige pakker til hÃ¸jtydende samtidige arbejdsgange:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **GitHub-modeller konfiguration**

**MiljÃ¸opsÃ¦tning (.env-fil):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Overvejelser om samtidig behandling:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Arkitektur for samtidige arbejdsgange**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**NÃ¸glekomponenter:**
- **Task Parallel Library**: .NET's indbyggede understÃ¸ttelse af samtidige operationer
- **Agent Pool**: Flere agentinstanser til parallel behandling
- **Resultataggregation**: Koordinering og sammensmeltning af samtidige agentresultater
- **Synkroniseringspunkter**: Sikrer datakonsistens pÃ¥ tvÃ¦rs af samtidige operationer

## ğŸ¨ **DesignmÃ¸nstre for samtidige arbejdsgange**

### ğŸ” **Parallel forskning og analyse**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Multikilde databehandling**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Indholdsgenereringspipeline**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Fan-Out/Fan-In behandling**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **Fordele ved erhvervsmÃ¦ssig ydeevne**

### âš¡ **GennemstrÃ¸mning og skalerbarhed**
- **LineÃ¦r ydeevneskalering**: TilfÃ¸j flere samtidige agenter for at Ã¸ge gennemstrÃ¸mningen
- **Ressourceudnyttelse**: Maksimal effektivitet af tilgÃ¦ngelig AI-modelkapacitet
- **Reduceret behandlingstid**: Betydelig tidsreduktion gennem parallel udfÃ¸relse
- **Elastisk skalering**: Juster dynamisk antallet af samtidige agenter baseret pÃ¥ arbejdsbyrde

### ğŸ›¡ï¸ **PÃ¥lidelighed og robusthed**
- **Fejlisolering**: Individuelle agentfejl pÃ¥virker ikke andre samtidige operationer
- **GraciÃ¸s nedbrydning**: Systemet fortsÃ¦tter med reduceret agentkapacitet
- **Fejlgenopretning**: Automatiske genforsÃ¸gsmekanismer for mislykkede samtidige operationer
- **Arbejdsfordeling**: JÃ¦vn fordeling af arbejde pÃ¥ tvÃ¦rs af tilgÃ¦ngelige agenter

### ğŸ“Š **YdelsesovervÃ¥gning**
- **Metrikker for samtidig udfÃ¸relse**: Spor ydeevnen for alle parallelle operationer
- **Ressourcebrugsanalyse**: OvervÃ¥g CPU-, hukommelses- og netvÃ¦rksudnyttelse
- **GennemstrÃ¸mningsanalyse**: MÃ¥l effektivitetsgevinster fra samtidig behandling
- **Flaskehalsdetektion**: Identificer og lÃ¸s ydeevnebegrÃ¦nsninger

### ğŸ”§ **Udvikling og drift**
- **Asynkron programmeringsmodel**: Udnyt .NET's modne async/await-mÃ¸nstre
- **Opgavekoordinering**: Indbyggede opgavestyrings- og koordineringsfunktioner
- **FejlhÃ¥ndtering**: Omfattende fejlhÃ¥ndtering for samtidige operationer
- **Debugging support**: Visual Studio debugging vÃ¦rktÃ¸jer til samtidige arbejdsgange

Lad os bygge hÃ¸jtydende samtidige AI-arbejdsgange med .NET! ğŸš€

## ğŸ’» KÃ¸rsel af koden

Den komplette implementering findes i `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Denne fil demonstrerer en **Fan-Out/Fan-In samtidig arbejdsgang** for rejseplanlÃ¦gning:

### ğŸ—ï¸ **Arbejdsgangsarkitektur**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**NÃ¸glekomponenter:**

1. **ConcurrentStartExecutor**: Sender brugerens forespÃ¸rgsel til alle agenter samtidigt
2. **Researcher Agent**: Analyserer destinationer og attraktioner samtidigt
3. **Planner Agent**: Opretter detaljerede rejseplaner samtidigt
4. **ConcurrentAggregationExecutor**: Indsamler og sammensmelter resultater fra begge agenter

### ğŸ¯ **Fan-Out/Fan-In-mÃ¸nster**

Denne arbejdsgang demonstrerer det klassiske **Fan-Out/Fan-In**-mÃ¸nster:
- **Fan-Out**: En inputbesked sendes til flere agenter samtidigt
- **Samtidig behandling**: Flere agenter arbejder parallelt pÃ¥ samme opgave
- **Fan-In**: Resultater fra alle agenter indsamles og samles til en enkelt output

### ğŸš€ KÃ¸r eksemplet

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Eller pÃ¥ Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ Forventet output

Arbejdsgangen vil:
1. **Send forespÃ¸rgsel**: Send "PlanlÃ¦g en tur til Seattle i december" til begge agenter
2. **Samtidig behandling**: Begge agenter arbejder samtidigt:
   - Researcher identificerer attraktioner og detaljer
   - Planner opretter rejseplan og logistik
3. **Aggregation**: Kombiner begge svar til en omfattende output
4. **Vis resultater**: Vis den sammensmeltede rejseplan med alle oplysninger

### ğŸ”§ Tilpasningsmuligheder

**TilfÃ¸j flere samtidige agenter:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Ã†ndr agentinstruktioner:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Ã†ndr opgaven:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ Virkelige anvendelser

Dette samtidige mÃ¸nster er ideelt til:
- **Indholdsskabelse**: Flere skribenter, der skaber forskellige sektioner samtidigt
- **Kodegennemgang**: Flere gennemgÃ¥ere analyserer kode fra forskellige perspektiver
- **MarkedsundersÃ¸gelse**: Parallel analyse af forskellige markedssegmenter
- **Dokumentbehandling**: Samtidig udtrÃ¦kning, analyse og validering
- **Multiperspektivanalyse**: FÃ¥ forskellige synspunkter pÃ¥ samme input

### ğŸ” ForstÃ¥else af brugerdefinerede eksekutorer

**ConcurrentStartExecutor:**
- Implementerer `IMessageHandler<string>` for at acceptere strenginput
- Sender beskeder til alle tilsluttede agenter
- Sender `TurnToken` for at udlÃ¸se samtidig behandling

**ConcurrentAggregationExecutor:**
- Implementerer `IMessageHandler<ChatMessage>` for at modtage agentrespons
- Indsamler beskeder pÃ¥ en trÃ¥dsikker mÃ¥de
- Aggregerer, nÃ¥r alle forventede svar ankommer
- Leverer endelig output ved hjÃ¦lp af `context.YieldOutputAsync()`

### âš¡ Ydelsesfordele

**Samtidig vs sekventiel:**
- Sekventiel: Agent1 (30s) â†’ Agent2 (30s) = **60 sekunder i alt**
- Samtidig: Agent1 (30s) || Agent2 (30s) = **30 sekunder i alt**

**GennemstrÃ¸mningsforbedring**: Op til NÃ— hurtigere for N samtidige agenter (afhÃ¦ngigt af arbejdsbyrde og ressourcer)

### ğŸ›¡ï¸ FejlhÃ¥ndtering

Arbejdsgangen hÃ¥ndterer individuelle agentfejl graciÃ¸st:
- Hvis Ã©n agent fejler, fortsÃ¦tter de andre med at behandle
- Aggregator kan implementere timeout-logik
- Delvise resultater kan returneres, hvis nÃ¸dvendigt

### ğŸ“Š Avancerede funktioner

**Dynamisk antal agenter:**
Ã†ndr aggregationslogikken for at understÃ¸tte variabelt antal agenter:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Dette samtidige arbejdsgangsmÃ¸nster er essentielt for at bygge hÃ¸jtydende, skalerbare AI-agent-systemer!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Ansvarsfraskrivelse**:  
Dette dokument er blevet oversat ved hjÃ¦lp af AI-oversÃ¦ttelsestjenesten [Co-op Translator](https://github.com/Azure/co-op-translator). Selvom vi bestrÃ¦ber os pÃ¥ nÃ¸jagtighed, skal det bemÃ¦rkes, at automatiserede oversÃ¦ttelser kan indeholde fejl eller unÃ¸jagtigheder. Det originale dokument pÃ¥ dets oprindelige sprog bÃ¸r betragtes som den autoritative kilde. For kritisk information anbefales professionel menneskelig oversÃ¦ttelse. Vi er ikke ansvarlige for eventuelle misforstÃ¥elser eller fejltolkninger, der opstÃ¥r som fÃ¸lge af brugen af denne oversÃ¦ttelse.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->