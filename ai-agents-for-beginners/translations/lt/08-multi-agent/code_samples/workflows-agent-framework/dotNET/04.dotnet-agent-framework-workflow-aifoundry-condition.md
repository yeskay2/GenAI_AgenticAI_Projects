<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T12:35:24+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "lt"
}
-->
# ğŸ”€ SÄ…lyginiai agentÅ³ darbo srautai su Azure AI Foundry (.NET)

## ğŸ“‹ Pamoka apie intelektualius sprendimÅ³ pagrindu veikianÄius darbo srautus

Å iame uÅ¾raÅ¡Å³ knygelÄ—je demonstruojami **sÄ…lyginiai darbo srautÅ³ modeliai**, naudojant Azure AI Foundry ir Microsoft Agent Framework for .NET. SuÅ¾inosite, kaip kurti sudÄ—tingus, sprendimais pagrÄ¯stus darbo srautus, kurie protingai nukreipia apdorojimÄ… pagal AI analizÄ™, verslo taisykles ir dinamiÅ¡kas sÄ…lygas, siekiant aukÅ¡Äiausio lygio automatizavimo.

## ğŸ¯ Mokymosi tikslai

### ğŸ§  **Intelektuali sprendimÅ³ architektÅ«ra**
- **SÄ…lyginÄ—s logikos Ä¯gyvendinimas**: Kurkite sudÄ—tingus sprendimÅ³ medÅ¾ius su keliais Å¡akojimosi taÅ¡kais
- **AI pagrÄ¯stas nukreipimas**: Naudokite Azure AI Foundry modelius, kad priimtumÄ—te protingus nukreipimo sprendimus
- **Dinaminis darbo srauto pritaikymas**: Keiskite darbo srauto elgesÄ¯ pagal vykdymo metu atliktÄ… analizÄ™ ir sÄ…lygas
- **Verslo taisykliÅ³ integracija**: Ä®traukite verslo logikÄ… ir atitikties reikalavimus Ä¯ darbo srautus

### ğŸ”€ **PaÅ¾angÅ«s sÄ…lyginiai modeliai**
- **SprendimÅ³ priÄ—mimas pagal kelis kriterijus**: Ä®vertinkite kelis veiksnius, kad priimtumÄ—te nukreipimo sprendimus
- **Konteksto pagrÄ¯stas apdorojimas**: Priimkite sprendimus remdamiesi sukauptu darbo srauto kontekstu ir istorija
- **Adaptacinis darbo srauto modifikavimas**: DinamiÅ¡kai koreguokite apdorojimo kelius pagal realaus laiko sÄ…lygas
- **TaisykliÅ³ variklio integracija**: Ä®gyvendinkite sudÄ—tingus verslo taisykliÅ³ variklius darbo srautuose

### ğŸ¢ **SÄ…lyginÄ—s programos verslui**
- **DokumentÅ³ klasifikavimas ir nukreipimas**: AutomatiÅ¡kai klasifikuokite ir nukreipkite dokumentus Ä¯ tinkamus darbo srautus
- **KlientÅ³ aptarnavimo triage**: Protingas klientÅ³ uÅ¾klausÅ³ nukreipimas Ä¯ specializuotas komandas
- **Atitikties ir rizikos apdorojimas**: Taikykite skirtingus patikrinimo ir perÅ¾iÅ«ros procesus pagal rizikos vertinimÄ…
- **KokybÄ—s uÅ¾tikrinimo darbo srautai**: Nukreipkite turinÄ¯ per tinkamus perÅ¾iÅ«ros procesus pagal kokybÄ—s metrikas

## âš™ï¸ Reikalavimai ir nustatymai

### ğŸ“¦ **Reikalingi NuGet paketai**

PaÅ¾angÅ«s paketai sÄ…lyginiam darbo srautÅ³ apdorojimui:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### ğŸ”‘ **Azure AI Foundry konfigÅ«racija**

**Reikalingi Azure iÅ¡tekliai:**
- Azure AI Foundry darbo aplinka su sÄ…lyginio apdorojimo modeliais
- Azure prenumerata su tinkamais skaiÄiavimo kvotomis ir leidimais
- Diegti AI modeliai sprendimÅ³ priÄ—mimui ir turinio analizei
- (Pasirinktinai) Bing Search API ryÅ¡ys, skirtas informacijos pagrindimui

**Aplinkos konfigÅ«racija (.env failas):**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**Autentifikacijos nustatymai:**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### ğŸ—ï¸ **SÄ…lyginÄ— darbo srauto architektÅ«ra**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**Pagrindiniai komponentai:**
- **Draft Executor**: AI agentas, kuris kuria pradinÄ¯ turinio juodraÅ¡tÄ¯ iÅ¡ kontÅ«rÅ³
- **Content Review Executor**: AI agentas, kuris vertina juodraÅ¡Äio kokybÄ™ ir atitiktÄ¯
- **SÄ…lyginis nukreipimas**: SprendimÅ³ logika, nukreipianti pagal perÅ¾iÅ«ros rezultatus
- **Publikavimo/perÅ¾iÅ«ros keliai**: Atskirti apdorojimo keliai patvirtintam ir atmestam turiniui
- **BÅ«senos valdymas**: IÅ¡laiko turinio ir perÅ¾iÅ«ros kontekstÄ… viso darbo srauto metu

## ğŸ¨ **SÄ…lyginiai darbo srauto dizaino modeliai**

### ğŸ“‹ **Turinio kÅ«rimas su kokybÄ—s vartais**
```
Outline â†’ Draft Creation â†’ Quality Review â†’ {Approve: Publish | Reject: Revise}
```

### ğŸ¯ **Rizikos pagrÄ¯stas dokumentÅ³ apdorojimas**
```
Document â†’ Risk Assessment â†’ {Low: Standard | High: Enhanced Review}
```

### ğŸ” **Intelektualus klientÅ³ aptarnavimo nukreipimas**
```
Customer Query â†’ Analysis â†’ {Simple: FAQ Bot | Complex: Human Agent}
```

### ğŸ’¼ **Atitikties pagrÄ¯sti darbo srautai**
```
Content â†’ Compliance Check â†’ {Pass: Publish | Fail: Legal Review}
```

## ğŸ¢ **SÄ…lyginÄ—s naudos verslui**

### ğŸ¯ **Intelektuali automatizacija**
- **Protingas sprendimÅ³ priÄ—mimas**: AI pagrÄ¯sti nukreipimo sprendimai pagal turinio analizÄ™ ir kontekstÄ…
- **Adaptacinis apdorojimas**: Darbo srautai, kurie automatiÅ¡kai prisitaiko prie besikeiÄianÄiÅ³ sÄ…lygÅ³
- **Verslo taisykliÅ³ laikymasis**: Automatinis sudÄ—tingos verslo logikos ir politikos taikymas
- **Konteksto pagrÄ¯stas nukreipimas**: Sprendimai, pagrÄ¯sti visa darbo srauto istorija ir sukauptu kontekstu

### ğŸ“ˆ **Operacinis tobulumas**
- **Optimizuotas iÅ¡tekliÅ³ paskirstymas**: Nukreipkite darbÄ… Ä¯ tinkamiausius specialistus ir procesus
- **SumaÅ¾intas rankinis Ä¯sikiÅ¡imas**: Automatinis sprendimÅ³ priÄ—mimas sumaÅ¾ina poreikÄ¯ Å¾mogaus nukreipimui
- **Greitesnis sprendimÅ³ laikas**: Tiesioginis nukreipimas Ä¯ tinkamÄ… ekspertizÄ™ ir apdorojimo galimybes
- **Nuoseklus taikymas**: Vienodas verslo taisykliÅ³ ir sprendimÅ³ kriterijÅ³ taikymas

### ğŸ›¡ï¸ **Rizikos valdymas ir atitiktis**
- **Automatinis rizikos vertinimas**: AI pagrÄ¯stas turinio ir situacijos rizikos lygio vertinimas
- **Atitikties laikymasis**: Automatinis nukreipimas per reikiamus reguliavimo procesus
- **Saugumo protokolÅ³ taikymas**: Sustiprintos saugumo priemonÄ—s, taikomos pagal rizikos vertinimÄ…
- **Audito takÅ³ palaikymas**: Pilna nukreipimo sprendimÅ³ ir motyvÅ³ dokumentacija

### ğŸ“Š **Analitika ir nuolatinis tobulinimas**
- **SprendimÅ³ analitika**: StebÄ—kite nukreipimo sprendimÅ³ efektyvumÄ… ir tikslumÄ…
- **ModeliÅ³ atpaÅ¾inimas**: Nustatykite tendencijas ir modelius nukreipimo sprendimuose laikui bÄ—gant
- **Veiklos optimizavimas**: Nuolatinis sprendimÅ³ kriterijÅ³ ir nukreipimo efektyvumo tobulinimas
- **Verslo intelektas**: Ä®Å¾valgos apie turinio charakteristikas ir apdorojimo reikalavimus

### ğŸ”§ **Techninis tobulumas**
- **Nuolatinis bÅ«senos valdymas**: IÅ¡laikykite sudÄ—tingÄ… bÅ«senÄ… viso darbo srauto vykdymo metu
- **Mastelio architektÅ«ra**: Tvarkykite didelÄ—s apimties sÄ…lyginio apdorojimo reikalavimus
- **Integracijos galimybÄ—s**: Sklandi integracija su esamomis verslo sistemomis ir procesais
- **StebÄ—jimas ir stebimumas**: IÅ¡samus darbo srauto veiklos ir sprendimÅ³ stebÄ—jimas

Kurkime intelektualius, sprendimais pagrÄ¯stus verslo darbo srautus su .NET! ğŸš€

## ğŸ’» Kodo vykdymas

Pilna Ä¯gyvendinimo versija pateikta `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Tai demonstruoja **turinio kÅ«rimo darbo srautÄ… su kokybÄ—s vartais**:

### ğŸ—ï¸ **Darbo srauto architektÅ«ra**

```
Content Outline â†’ Draft Creation â†’ Quality Review â†’ Conditional Routing:
                                                      â”œâ”€ Approved (>200 words) â†’ Publish
                                                      â””â”€ Rejected (<200 words) â†’ Review Notification
```

**Agentai darbo sraute:**
1. **Evangelist Agent**: Kuria pamokÅ³ juodraÅ¡Äius iÅ¡ kontÅ«rÅ³ su Bing pagrindimu
2. **Content Reviewer Agent**: Vertina juodraÅ¡Äio kokybÄ™ (Å¾odÅ¾iÅ³ skaiÄiÅ³, pilnumÄ…)
3. **Publisher Agent**: IÅ¡saugo patvirtintÄ… turinÄ¯ kaip laiko Å¾ymÄ—mis paÅ¾ymÄ—tus Markdown failus

**IndividualÅ«s vykdytojai:**
1. **DraftExecutor**: Orkestruoja juodraÅ¡Äio kÅ«rimÄ…
2. **ContentReviewExecutor**: Atlieka kokybÄ—s vertinimÄ…
3. **PublishExecutor**: Tvarko patvirtinto turinio publikavimÄ…
4. **SendReviewExecutor**: Valdo praneÅ¡imus apie atmestÄ… turinÄ¯

### ğŸš€ PavyzdÅ¾io vykdymas

**Reikalavimai:**
- KonfigÅ«ruota Azure AI Foundry darbo aplinka
- Azure CLI autentifikacija (`az login`)
- (Pasirinktinai) Bing Search ryÅ¡ys, skirtas pagrindimui

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Arba Windows sistemoje:
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### ğŸ“ TikÄ—tinas rezultatas

Darbo srautas atliks:
1. **AgentÅ³ kÅ«rimÄ…**: Inicializuos tris specializuotus Azure AI Foundry agentus
2. **JuodraÅ¡Äio generavimÄ…**: Evangelist agentas sukurs pamokos juodraÅ¡tÄ¯ iÅ¡ kontÅ«ro
3. **Turinio perÅ¾iÅ«rÄ…**: Content Reviewer Ä¯vertins juodraÅ¡Äio kokybÄ™
4. **SÄ…lyginÄ¯ nukreipimÄ…**:
   - **Jei patvirtinta (>200 Å¾odÅ¾iÅ³)**: PublishExecutor iÅ¡saugos kaip Markdown failÄ…
   - **Jei atmesta (<200 Å¾odÅ¾iÅ³)**: SendReviewExecutor iÅ¡siÅ³s perÅ¾iÅ«ros praneÅ¡imÄ…
5. **RezultatÅ³ rodymÄ…**: Parodys galutinÄ¯ darbo srauto rezultatÄ…

### ğŸ”§ Pritaikymo galimybÄ—s

**Keisti perÅ¾iÅ«ros kriterijus:**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**PridÄ—ti daugiau sÄ…lyginiÅ³ keliÅ³:**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**Keisti turinio reikalavimus:**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### ğŸ¯ RealÅ«s pritaikymo atvejai

Å is sÄ…lyginio darbo srauto modelis puikiai tinka:
- **Turinio valdymo sistemoms**: Automatiniai redakciniai darbo srautai su kokybÄ—s vartais
- **DokumentÅ³ apdorojimui**: DokumentÅ³ nukreipimas pagal klasifikacijÄ… ir atitiktÄ¯
- **KlientÅ³ aptarnavimui**: Protingas bilietÅ³ nukreipimas pagal sudÄ—tingumÄ… ir skubumÄ…
- **TeisiniÅ³ perÅ¾iÅ«rÅ³**: SutarÄiÅ³ nukreipimas pagal rizikos vertinimÄ… ir vertÄ™
- **HR procesams**: ParaiÅ¡kÅ³ nukreipimas per tinkamus atrankos darbo srautus

### ğŸ” SÄ…lyginÄ—s logikos supratimas

**SÄ…lygos funkcija:**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

Å i funkcija sukuria predikatÄ…, kuris:
1. Patikrina, ar rezultatas yra tipo `ReviewResult`
2. Palygina `Result` savybÄ™ su numatyta verte
3. GrÄ…Å¾ina true/false, kad nustatytÅ³ nukreipimÄ…

**Darbo srauto kraÅ¡tai su sÄ…lygomis:**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### ğŸ“Š PaÅ¾angios funkcijos

**JSON schemos validacija:**
Darbo srautas naudoja JSON schemas, kad uÅ¾tikrintÅ³ struktÅ«rizuotus atsakymus:

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Bing pagrindimo integracija:**
Evangelist agentas naudoja Bing pagrindimÄ…, kad pasiektÅ³ realaus laiko informacijÄ…:

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

Tai leidÅ¾ia agentui sekti URL adresus kontÅ«re ir iÅ¡gauti dabartinÄ™ informacijÄ….

### ğŸ›¡ï¸ KlaidÅ³ tvarkymas

Darbo srautas apima patikimÄ… klaidÅ³ tvarkymÄ… atmestam turiniui:
- PerÅ¾iÅ«ros nesÄ—kmÄ—s sukelia alternatyvÅ³ keliÄ…
- PraneÅ¡imai pateikia aiÅ¡kias atmetimo prieÅ¾astis
- Turinys iÅ¡saugomas perÅ¾iÅ«rai

### ğŸ”„ Darbo srauto plÄ—tra

**PridÄ—ti perÅ¾iÅ«ros ciklÄ…:**
Sukurkite grÄ¯Å¾tamojo ryÅ¡io ciklÄ…, kuris automatiÅ¡kai perkuria turinÄ¯:

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**Ä®gyvendinti daugiapakopÄ™ perÅ¾iÅ«rÄ…:**
PridÄ—kite kelis perÅ¾iÅ«ros etapus su skirtingais kriterijais:

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Å is sÄ…lyginio darbo srauto modelis suteikia pagrindÄ… kurti sudÄ—tingas, intelektualias verslo automatizavimo sistemas! ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**AtsakomybÄ—s apribojimas**:  
Å is dokumentas buvo iÅ¡verstas naudojant AI vertimo paslaugÄ… [Co-op Translator](https://github.com/Azure/co-op-translator). Nors stengiamÄ—s uÅ¾tikrinti tikslumÄ…, praÅ¡ome atkreipti dÄ—mesÄ¯, kad automatiniai vertimai gali turÄ—ti klaidÅ³ ar netikslumÅ³. Originalus dokumentas jo gimtÄ…ja kalba turÄ—tÅ³ bÅ«ti laikomas autoritetingu Å¡altiniu. Kritinei informacijai rekomenduojama naudoti profesionalÅ³ Å¾mogaus vertimÄ…. Mes neprisiimame atsakomybÄ—s uÅ¾ nesusipratimus ar neteisingus interpretavimus, atsiradusius dÄ—l Å¡io vertimo naudojimo.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->