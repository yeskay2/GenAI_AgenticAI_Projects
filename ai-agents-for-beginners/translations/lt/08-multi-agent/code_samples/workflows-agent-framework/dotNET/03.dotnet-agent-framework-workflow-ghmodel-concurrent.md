<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:35:54+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "lt"
}
-->
# âš¡ LygiagretÅ«s agentÅ³ darbo srautai su GitHub modeliais (.NET)

## ğŸ“‹ AukÅ¡tos naÅ¡umo lygiagretaus apdorojimo pamoka

Å iame uÅ¾raÅ¡Å³ knygelÄ—je demonstruojami **lygiagretaus darbo srautÅ³ modeliai**, naudojant Microsoft Agent Framework for .NET ir GitHub modelius. SuÅ¾inosite, kaip kurti aukÅ¡tos naÅ¡umo lygiagretaus apdorojimo darbo srautus, kurie maksimaliai padidina naÅ¡umÄ… vykdant kelis AI agentus vienu metu, iÅ¡laikant koordinacijÄ… ir duomenÅ³ nuoseklumÄ….

## ğŸ¯ Mokymosi tikslai

### ğŸš€ **Lygiagretaus apdorojimo pagrindai**
- **Lygiagretus agentÅ³ vykdymas**: Vykdykite kelis AI agentus vienu metu, kad pasiektumÄ—te maksimalÅ³ naÅ¡umÄ…
- **Async/Await modeliai**: Naudokite .NET asinchroninio programavimo modelÄ¯ efektyviam lygiagreÄiam apdorojimui
- **GitHub modeliÅ³ integracija**: Koordinuokite kelis lygiagreÄius GitHub AI modelio uÅ¾klausÅ³ vykdymus
- **IÅ¡tekliÅ³ valdymas**: Efektyviai valdykite AI modelio iÅ¡teklius lygiagreÄiÅ³ operacijÅ³ metu

### ğŸ—ï¸ **PaÅ¾angi lygiagretaus apdorojimo architektÅ«ra**
- **UÅ¾duoÄiÅ³ pagrindu vykdomas lygiagretumas**: Naudokite .NET Task Parallel Library optimaliai lygiagreÄiam vykdymui
- **Sinchronizavimo modeliai**: Koordinuokite lygiagreÄius agentus, iÅ¡vengdami lenktyniÅ³ sÄ…lygÅ³
- **Darbo paskirstymas**: Efektyviai paskirstykite darbÄ… pagal turimÄ… lygiagretaus apdorojimo pajÄ—gumÄ…
- **GedimÅ³ tolerancija**: Tvarkykite atskirÅ³ agentÅ³ gedimus, nesustabdydami viso darbo srauto

### ğŸ¢ **LygiagreÄios programos verslui**
- **DidelÄ—s apimties dokumentÅ³ apdorojimas**: Apdorokite kelis dokumentus vienu metu
- **Realaus laiko turinio analizÄ—**: LygiagreÄiai analizuokite gaunamus duomenÅ³ srautus
- **PartijÅ³ apdorojimo optimizavimas**: Maksimaliai padidinkite naÅ¡umÄ… apdorojant didelÄ—s apimties duomenis
- **DaugiarÅ«Å¡Ä— analizÄ—**: LygiagreÄiai apdorokite skirtingÅ³ tipÅ³ ir formatÅ³ turinÄ¯

## âš™ï¸ Reikalavimai ir paruoÅ¡imas

### ğŸ“¦ **Reikalingi NuGet paketai**

Esminiai paketai aukÅ¡tos naÅ¡umo lygiagretiems darbo srautams:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **GitHub modeliÅ³ konfigÅ«racija**

**Aplinkos nustatymai (.env failas):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Lygiagretaus apdorojimo aspektai:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Lygiagretaus darbo srauto architektÅ«ra**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**Pagrindiniai komponentai:**
- **Task Parallel Library**: .NET Ä¯montuota lygiagreÄiÅ³ operacijÅ³ palaikymo biblioteka
- **AgentÅ³ grupÄ—**: Keli agentÅ³ egzemplioriai lygiagreÄiam apdorojimui
- **RezultatÅ³ agregavimas**: Koordinacija ir lygiagreÄiÅ³ agentÅ³ rezultatÅ³ sujungimas
- **Sinchronizavimo taÅ¡kai**: UÅ¾tikrinkite duomenÅ³ nuoseklumÄ… lygiagreÄiÅ³ operacijÅ³ metu

## ğŸ¨ **Lygiagretaus darbo srauto projektavimo modeliai**

### ğŸ” **Lygiagreti tyrimÅ³ ir analizÄ—s veikla**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Daugiakryptis duomenÅ³ apdorojimas**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Turinio generavimo procesas**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Fan-Out/Fan-In apdorojimas**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **NaÅ¡umo privalumai verslui**

### âš¡ **NaÅ¡umas ir mastelio keitimas**
- **Linijinis naÅ¡umo mastelio keitimas**: PridÄ—kite daugiau lygiagreÄiÅ³ agentÅ³, kad padidintumÄ—te naÅ¡umÄ…
- **IÅ¡tekliÅ³ panaudojimas**: Maksimalus turimÅ³ AI modelio pajÄ—gumÅ³ efektyvumas
- **Sutrumpintas apdorojimo laikas**: ReikÅ¡mingas laiko sutrumpinimas per lygiagretÅ³ vykdymÄ…
- **Elastinis mastelio keitimas**: DinamiÅ¡kai reguliuokite lygiagreÄiÅ³ agentÅ³ skaiÄiÅ³ pagal darbo krÅ«vÄ¯

### ğŸ›¡ï¸ **Patikimumas ir atsparumas**
- **GedimÅ³ izoliacija**: Atskiri agentÅ³ gedimai neturi Ä¯takos kitoms lygiagreÄioms operacijoms
- **Sklandus degradavimas**: Sistema toliau veikia su sumaÅ¾intu agentÅ³ pajÄ—gumu
- **KlaidÅ³ atkÅ«rimas**: Automatiniai pakartojimo mechanizmai nepavykusioms lygiagreÄioms operacijoms
- **Darbo paskirstymas**: Vienodas darbo paskirstymas tarp turimÅ³ agentÅ³

### ğŸ“Š **NaÅ¡umo stebÄ—jimas**
- **Lygiagretaus vykdymo metrika**: StebÄ—kite visÅ³ lygiagreÄiÅ³ operacijÅ³ naÅ¡umÄ…
- **IÅ¡tekliÅ³ naudojimo analizÄ—**: StebÄ—kite CPU, atminties ir tinklo naudojimÄ…
- **NaÅ¡umo analizÄ—**: Matuokite efektyvumo padidÄ—jimÄ… dÄ—l lygiagretaus apdorojimo
- **SiaurÅ³jÅ³ vietÅ³ aptikimas**: Nustatykite ir paÅ¡alinkite naÅ¡umo apribojimus

### ğŸ”§ **KÅ«rimas ir operacijos**
- **Asinchroninio programavimo modelis**: Naudokite .NET brandÅ³ async/await modelÄ¯
- **UÅ¾duoÄiÅ³ koordinavimas**: Ä®montuotos uÅ¾duoÄiÅ³ valdymo ir koordinavimo galimybÄ—s
- **IÅ¡imÄiÅ³ tvarkymas**: IÅ¡samus klaidÅ³ tvarkymas lygiagreÄioms operacijoms
- **Derinimo palaikymas**: Visual Studio derinimo Ä¯rankiai lygiagretiems darbo srautams

Kurkime aukÅ¡tos naÅ¡umo lygiagreÄius AI darbo srautus su .NET! ğŸš€

## ğŸ’» Kodo vykdymas

Pilna Ä¯gyvendinimo versija pateikta `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Å iame faile demonstruojamas **Fan-Out/Fan-In lygiagretaus darbo srautas** kelioniÅ³ planavimui:

### ğŸ—ï¸ **Darbo srauto architektÅ«ra**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**Pagrindiniai komponentai:**

1. **ConcurrentStartExecutor**: Vienu metu perduoda vartotojo uÅ¾klausÄ… visiems agentams
2. **Researcher Agent**: LygiagreÄiai analizuoja vietas ir lankytinas vietas
3. **Planner Agent**: LygiagreÄiai kuria detalius kelioniÅ³ planus
4. **ConcurrentAggregationExecutor**: Surenka ir sujungia abiejÅ³ agentÅ³ rezultatus

### ğŸ¯ **Fan-Out/Fan-In modelis**

Å is darbo srautas demonstruoja klasikinÄ¯ **Fan-Out/Fan-In** modelÄ¯:
- **Fan-Out**: Viena Ä¯vesties Å¾inutÄ— perduodama keliems agentams vienu metu
- **LygiagreÄiai apdorojama**: Keli agentai dirba lygiagreÄiai su ta paÄia uÅ¾duotimi
- **Fan-In**: VisÅ³ agentÅ³ rezultatai surenkami ir sujungiami Ä¯ vienÄ… iÅ¡vestÄ¯

### ğŸš€ PavyzdÅ¾io vykdymas

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Arba Windows sistemoje:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ TikÄ—tinas rezultatas

Darbo srautas atliks:
1. **UÅ¾klausos perdavimÄ…**: IÅ¡siÅ³s â€Suplanuokite kelionÄ™ Ä¯ SietlÄ… gruodÅ¾io mÄ—nesÄ¯â€œ abiem agentams
2. **LygiagretÅ³ apdorojimÄ…**: Abu agentai dirbs vienu metu:
   - TyrÄ—jas nustatys lankytinas vietas ir detales
   - Planuotojas sudarys marÅ¡rutÄ… ir logistikÄ…
3. **AgregavimÄ…**: Sujungs abu atsakymus Ä¯ iÅ¡samÅ³ rezultatÄ…
4. **RezultatÅ³ rodymÄ…**: Parodys sujungtÄ… kelioniÅ³ planÄ… su visa informacija

### ğŸ”§ Pritaikymo galimybÄ—s

**PridÄ—kite daugiau lygiagreÄiÅ³ agentÅ³:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Keiskite agentÅ³ instrukcijas:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Pakeiskite uÅ¾duotÄ¯:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ RealÅ«s pritaikymo bÅ«dai

Å is lygiagretaus modelis puikiai tinka:
- **Turinio kÅ«rimui**: Keli raÅ¡ytojai vienu metu kuria skirtingas dalis
- **Kodo perÅ¾iÅ«rai**: Keli perÅ¾iÅ«rÄ—tojai analizuoja kodÄ… iÅ¡ skirtingÅ³ perspektyvÅ³
- **Rinkos tyrimams**: Lygiagreti skirtingÅ³ rinkos segmentÅ³ analizÄ—
- **DokumentÅ³ apdorojimui**: LygiagreÄiai iÅ¡traukimas, analizÄ— ir patikrinimas
- **DaugiaperspektyvÄ— analizÄ—**: SkirtingÅ³ poÅ¾iÅ«riÅ³ gavimas Ä¯ tÄ… paÄiÄ… Ä¯vestÄ¯

### ğŸ” Suprasti pritaikytus vykdytojus

**ConcurrentStartExecutor:**
- Ä®gyvendina `IMessageHandler<string>` priimti tekstinÄ™ Ä¯vestÄ¯
- Perduoda Å¾inutes visiems prijungtiems agentams
- SiunÄia `TurnToken`, kad inicijuotÅ³ lygiagretÅ³ apdorojimÄ…

**ConcurrentAggregationExecutor:**
- Ä®gyvendina `IMessageHandler<ChatMessage>` priimti agentÅ³ atsakymus
- Surenka Å¾inutes saugiai gijÅ³ atÅ¾vilgiu
- Agreguoja, kai gaunami visi laukiami atsakymai
- Pateikia galutinÄ™ iÅ¡vestÄ¯ naudodamas `context.YieldOutputAsync()`

### âš¡ NaÅ¡umo privalumai

**LygiagreÄiai vs nuosekliai:**
- Nuosekliai: Agent1 (30s) â†’ Agent2 (30s) = **60 sekundÅ¾iÅ³ iÅ¡ viso**
- LygiagreÄiai: Agent1 (30s) || Agent2 (30s) = **30 sekundÅ¾iÅ³ iÅ¡ viso**

**NaÅ¡umo padidÄ—jimas**: Iki NÃ— greiÄiau su N lygiagreÄiais agentais (priklausomai nuo darbo krÅ«vio ir iÅ¡tekliÅ³)

### ğŸ›¡ï¸ KlaidÅ³ tvarkymas

Darbo srautas tvarko atskirÅ³ agentÅ³ gedimus sklandÅ¾iai:
- Jei vienas agentas sugenda, kiti tÄ™sia apdorojimÄ…
- Agregatorius gali Ä¯gyvendinti laiko apribojimo logikÄ…
- Jei reikia, gali bÅ«ti grÄ…Å¾inti daliniai rezultatai

### ğŸ“Š PaÅ¾angios funkcijos

**Dinaminis agentÅ³ skaiÄius:**
Pakeiskite agregavimo logikÄ…, kad palaikytumÄ—te kintamÄ… agentÅ³ skaiÄiÅ³:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Å is lygiagretaus darbo srauto modelis yra bÅ«tinas kuriant aukÅ¡tos naÅ¡umo, mastelio keiÄiamas AI agentÅ³ sistemas!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**AtsakomybÄ—s apribojimas**:  
Å is dokumentas buvo iÅ¡verstas naudojant AI vertimo paslaugÄ… [Co-op Translator](https://github.com/Azure/co-op-translator). Nors siekiame tikslumo, praÅ¡ome atkreipti dÄ—mesÄ¯, kad automatiniai vertimai gali turÄ—ti klaidÅ³ ar netikslumÅ³. Originalus dokumentas jo gimtÄ…ja kalba turÄ—tÅ³ bÅ«ti laikomas autoritetingu Å¡altiniu. DÄ—l svarbios informacijos rekomenduojama profesionali Å¾mogaus vertimo paslauga. Mes neprisiimame atsakomybÄ—s uÅ¾ nesusipratimus ar neteisingus interpretavimus, atsiradusius naudojant Å¡Ä¯ vertimÄ….
<!-- CO-OP TRANSLATOR DISCLAIMER END -->