<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:18:05+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "pl"
}
-->
# âš¡ RÃ³wnoczesne przepÅ‚ywy pracy agentÃ³w z modelami GitHub (.NET)

## ğŸ“‹ Samouczek wysokowydajnego przetwarzania rÃ³wnolegÅ‚ego

Ten notebook demonstruje **wzorce przepÅ‚ywÃ³w pracy rÃ³wnoczesnych** przy uÅ¼yciu Microsoft Agent Framework dla .NET i modeli GitHub. Nauczysz siÄ™ budowaÄ‡ wysokowydajne przepÅ‚ywy pracy przetwarzania rÃ³wnolegÅ‚ego, ktÃ³re maksymalizujÄ… przepustowoÅ›Ä‡ poprzez jednoczesne uruchamianie wielu agentÃ³w AI, zachowujÄ…c jednoczeÅ›nie koordynacjÄ™ i spÃ³jnoÅ›Ä‡ danych.

## ğŸ¯ Cele nauki

### ğŸš€ **Podstawy przetwarzania rÃ³wnoczesnego**
- **RÃ³wnoczesne uruchamianie agentÃ³w**: Uruchamiaj wielu agentÃ³w AI jednoczeÅ›nie dla maksymalnej wydajnoÅ›ci
- **Wzorce Async/Await**: Wykorzystaj model programowania asynchronicznego .NET dla efektywnej rÃ³wnoczesnoÅ›ci
- **Integracja z modelami GitHub**: Koordynuj wiele rÃ³wnoczesnych wywoÅ‚aÅ„ usÅ‚ugi inferencji modeli AI GitHub
- **ZarzÄ…dzanie zasobami**: Efektywnie zarzÄ…dzaj zasobami modeli AI w operacjach rÃ³wnoczesnych

### ğŸ—ï¸ **Zaawansowana architektura rÃ³wnoczesnoÅ›ci**
- **RÃ³wnolegÅ‚oÅ›Ä‡ oparta na zadaniach**: Wykorzystaj bibliotekÄ™ Task Parallel Library .NET dla optymalnego wykonania rÃ³wnoczesnego
- **Wzorce synchronizacji**: Koordynuj rÃ³wnoczesnych agentÃ³w, unikajÄ…c konfliktÃ³w wyÅ›cigowych
- **RÃ³wnowaÅ¼enie obciÄ…Å¼enia**: Efektywnie rozdzielaj pracÄ™ na dostÄ™pne moÅ¼liwoÅ›ci przetwarzania rÃ³wnoczesnego
- **OdpornoÅ›Ä‡ na bÅ‚Ä™dy**: RadÅº sobie z awariami pojedynczych agentÃ³w bez zatrzymywania caÅ‚ego przepÅ‚ywu pracy

### ğŸ¢ **RÃ³wnoczesne aplikacje dla przedsiÄ™biorstw**
- **Przetwarzanie dokumentÃ³w o duÅ¼ej objÄ™toÅ›ci**: Przetwarzaj wiele dokumentÃ³w jednoczeÅ›nie
- **Analiza treÅ›ci w czasie rzeczywistym**: RÃ³wnoczesna analiza strumieni danych przychodzÄ…cych
- **Optymalizacja przetwarzania wsadowego**: Maksymalizuj przepustowoÅ›Ä‡ dla operacji przetwarzania danych na duÅ¼Ä… skalÄ™
- **Analiza wielomodalna**: RÃ³wnoczesne przetwarzanie rÃ³Å¼nych typÃ³w i formatÃ³w treÅ›ci

## âš™ï¸ Wymagania wstÄ™pne i konfiguracja

### ğŸ“¦ **Wymagane pakiety NuGet**

NiezbÄ™dne pakiety dla wysokowydajnych przepÅ‚ywÃ³w pracy rÃ³wnoczesnych:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **Konfiguracja modeli GitHub**

**Konfiguracja Å›rodowiska (.env file):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Uwagi dotyczÄ…ce przetwarzania rÃ³wnoczesnego:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Architektura przepÅ‚ywu pracy rÃ³wnoczesnego**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**Kluczowe komponenty:**
- **Task Parallel Library**: Wbudowane wsparcie .NET dla operacji rÃ³wnoczesnych
- **Pula agentÃ³w**: Wiele instancji agentÃ³w dla przetwarzania rÃ³wnolegÅ‚ego
- **Agregacja wynikÃ³w**: Koordynacja i Å‚Ä…czenie wynikÃ³w rÃ³wnoczesnych agentÃ³w
- **Punkty synchronizacji**: Zapewnienie spÃ³jnoÅ›ci danych w operacjach rÃ³wnoczesnych

## ğŸ¨ **Wzorce projektowe przepÅ‚ywu pracy rÃ³wnoczesnego**

### ğŸ” **RÃ³wnolegÅ‚e badania i analiza**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Przetwarzanie danych z wielu ÅºrÃ³deÅ‚**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Pipeline generowania treÅ›ci**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Przetwarzanie Fan-Out/Fan-In**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **KorzyÅ›ci z wydajnoÅ›ci w przedsiÄ™biorstwach**

### âš¡ **PrzepustowoÅ›Ä‡ i skalowalnoÅ›Ä‡**
- **Liniowa skalowalnoÅ›Ä‡ wydajnoÅ›ci**: Dodaj wiÄ™cej rÃ³wnoczesnych agentÃ³w, aby zwiÄ™kszyÄ‡ przepustowoÅ›Ä‡
- **Wykorzystanie zasobÃ³w**: Maksymalna efektywnoÅ›Ä‡ dostÄ™pnej pojemnoÅ›ci modelu AI
- **SkrÃ³cony czas przetwarzania**: ZnaczÄ…ce skrÃ³cenie czasu dziÄ™ki wykonaniu rÃ³wnolegÅ‚emu
- **Elastyczna skalowalnoÅ›Ä‡**: Dynamiczne dostosowanie liczby rÃ³wnoczesnych agentÃ³w w zaleÅ¼noÅ›ci od obciÄ…Å¼enia

### ğŸ›¡ï¸ **NiezawodnoÅ›Ä‡ i odpornoÅ›Ä‡**
- **Izolacja bÅ‚Ä™dÃ³w**: Awaria pojedynczego agenta nie wpÅ‚ywa na inne operacje rÃ³wnoczesne
- **Åagodna degradacja**: System dziaÅ‚a dalej z ograniczonÄ… pojemnoÅ›ciÄ… agentÃ³w
- **Odzyskiwanie bÅ‚Ä™dÃ³w**: Automatyczne mechanizmy ponownego uruchamiania dla nieudanych operacji rÃ³wnoczesnych
- **RozdziaÅ‚ obciÄ…Å¼enia**: RÃ³wnomierne rozdzielenie pracy na dostÄ™pnych agentÃ³w

### ğŸ“Š **Monitorowanie wydajnoÅ›ci**
- **Metryki wykonania rÃ³wnoczesnego**: ÅšledÅº wydajnoÅ›Ä‡ wszystkich operacji rÃ³wnolegÅ‚ych
- **Analiza wykorzystania zasobÃ³w**: Monitoruj uÅ¼ycie CPU, pamiÄ™ci i sieci
- **Analiza przepustowoÅ›ci**: Mierz korzyÅ›ci wydajnoÅ›ciowe wynikajÄ…ce z przetwarzania rÃ³wnoczesnego
- **Wykrywanie wÄ…skich gardeÅ‚**: Identyfikuj i rozwiÄ…zuj ograniczenia wydajnoÅ›ci

### ğŸ”§ **RozwÃ³j i operacje**
- **Model programowania asynchronicznego**: Wykorzystaj dojrzaÅ‚e wzorce async/await w .NET
- **Koordynacja zadaÅ„**: Wbudowane zarzÄ…dzanie zadaniami i moÅ¼liwoÅ›ci koordynacji
- **ObsÅ‚uga wyjÄ…tkÃ³w**: Kompleksowa obsÅ‚uga bÅ‚Ä™dÃ³w dla operacji rÃ³wnoczesnych
- **Wsparcie debugowania**: NarzÄ™dzia debugowania Visual Studio dla przepÅ‚ywÃ³w pracy rÃ³wnoczesnych

Budujmy wysokowydajne rÃ³wnoczesne przepÅ‚ywy pracy AI z .NET! ğŸš€

## ğŸ’» Uruchamianie kodu

Kompletna implementacja jest dostÄ™pna w `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Ten plik demonstruje **przepÅ‚yw pracy Fan-Out/Fan-In** dla planowania podrÃ³Å¼y:

### ğŸ—ï¸ **Architektura przepÅ‚ywu pracy**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**Kluczowe komponenty:**

1. **ConcurrentStartExecutor**: RozsyÅ‚a Å¼Ä…danie uÅ¼ytkownika do wszystkich agentÃ³w jednoczeÅ›nie
2. **Researcher Agent**: RÃ³wnoczeÅ›nie analizuje miejsca docelowe i atrakcje
3. **Planner Agent**: Tworzy szczegÃ³Å‚owe plany podrÃ³Å¼y rÃ³wnoczeÅ›nie
4. **ConcurrentAggregationExecutor**: Zbiera i Å‚Ä…czy wyniki od obu agentÃ³w

### ğŸ¯ **Wzorzec Fan-Out/Fan-In**

Ten przepÅ‚yw pracy demonstruje klasyczny wzorzec **Fan-Out/Fan-In**:
- **Fan-Out**: Jedna wiadomoÅ›Ä‡ wejÅ›ciowa jest rozsyÅ‚ana do wielu agentÃ³w jednoczeÅ›nie
- **Przetwarzanie rÃ³wnoczesne**: Wielu agentÃ³w pracuje rÃ³wnolegle nad tym samym zadaniem
- **Fan-In**: Wyniki od wszystkich agentÃ³w sÄ… zbierane i agregowane w jeden wynik

### ğŸš€ Uruchamianie przykÅ‚adu

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Lub na Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ Oczekiwany wynik

PrzepÅ‚yw pracy:
1. **RozsyÅ‚a Å¼Ä…danie**: WysyÅ‚a "Zaplanuj podrÃ³Å¼ do Seattle w grudniu" do obu agentÃ³w
2. **Przetwarzanie rÃ³wnoczesne**: Oba agenty pracujÄ… jednoczeÅ›nie:
   - Researcher identyfikuje atrakcje i szczegÃ³Å‚y
   - Planner tworzy harmonogram i logistykÄ™
3. **Agregacja**: ÅÄ…czy odpowiedzi obu agentÃ³w w kompleksowy wynik
4. **WyÅ›wietla wyniki**: Pokazuje zintegrowany plan podrÃ³Å¼y ze wszystkimi informacjami

### ğŸ”§ Opcje dostosowania

**Dodaj wiÄ™cej rÃ³wnoczesnych agentÃ³w:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Zmodyfikuj instrukcje dla agentÃ³w:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**ZmieÅ„ zadanie:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ Zastosowania w rzeczywistoÅ›ci

Ten wzorzec rÃ³wnoczesny jest idealny dla:
- **Tworzenia treÅ›ci**: Wielu autorÃ³w jednoczeÅ›nie tworzÄ…cych rÃ³Å¼ne sekcje
- **PrzeglÄ…du kodu**: Wielu recenzentÃ³w analizujÄ…cych kod z rÃ³Å¼nych perspektyw
- **Badania rynku**: RÃ³wnolegÅ‚a analiza rÃ³Å¼nych segmentÃ³w rynku
- **Przetwarzania dokumentÃ³w**: RÃ³wnoczesne wydobywanie, analiza i walidacja
- **Analizy wieloperspektywicznej**: Uzyskiwanie rÃ³Å¼norodnych punktÃ³w widzenia na ten sam temat

### ğŸ” Zrozumienie niestandardowych wykonawcÃ³w

**ConcurrentStartExecutor:**
- Implementuje `IMessageHandler<string>` do akceptacji danych wejÅ›ciowych w formie tekstu
- RozsyÅ‚a wiadomoÅ›ci do wszystkich podÅ‚Ä…czonych agentÃ³w
- WysyÅ‚a `TurnToken`, aby uruchomiÄ‡ przetwarzanie rÃ³wnoczesne

**ConcurrentAggregationExecutor:**
- Implementuje `IMessageHandler<ChatMessage>` do odbioru odpowiedzi agentÃ³w
- Zbiera wiadomoÅ›ci w sposÃ³b bezpieczny dla wÄ…tkÃ³w
- Agreguje, gdy wszystkie oczekiwane odpowiedzi dotrÄ…
- Zwraca ostateczny wynik za pomocÄ… `context.YieldOutputAsync()`

### âš¡ KorzyÅ›ci wydajnoÅ›ciowe

**RÃ³wnoczesne vs sekwencyjne:**
- Sekwencyjne: Agent1 (30s) â†’ Agent2 (30s) = **60 sekund Å‚Ä…cznie**
- RÃ³wnoczesne: Agent1 (30s) || Agent2 (30s) = **30 sekund Å‚Ä…cznie**

**Poprawa przepustowoÅ›ci**: Do NÃ— szybciej dla N rÃ³wnoczesnych agentÃ³w (w zaleÅ¼noÅ›ci od obciÄ…Å¼enia i zasobÃ³w)

### ğŸ›¡ï¸ ObsÅ‚uga bÅ‚Ä™dÃ³w

PrzepÅ‚yw pracy radzi sobie z awariami pojedynczych agentÃ³w:
- JeÅ›li jeden agent zawiedzie, inni kontynuujÄ… przetwarzanie
- Agregator moÅ¼e zaimplementowaÄ‡ logikÄ™ timeoutu
- MoÅ¼na zwrÃ³ciÄ‡ czÄ™Å›ciowe wyniki, jeÅ›li to konieczne

### ğŸ“Š Zaawansowane funkcje

**Dynamiczna liczba agentÃ³w:**
Zmodyfikuj logikÄ™ agregacji, aby obsÅ‚ugiwaÄ‡ zmiennÄ… liczbÄ™ agentÃ³w:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Ten wzorzec przepÅ‚ywu pracy rÃ³wnoczesnego jest kluczowy dla budowy wysokowydajnych, skalowalnych systemÃ³w agentÃ³w AI!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ZastrzeÅ¼enie**:  
Ten dokument zostaÅ‚ przetÅ‚umaczony za pomocÄ… usÅ‚ugi tÅ‚umaczenia AI [Co-op Translator](https://github.com/Azure/co-op-translator). ChociaÅ¼ staramy siÄ™ zapewniÄ‡ dokÅ‚adnoÅ›Ä‡, prosimy pamiÄ™taÄ‡, Å¼e automatyczne tÅ‚umaczenia mogÄ… zawieraÄ‡ bÅ‚Ä™dy lub nieÅ›cisÅ‚oÅ›ci. Oryginalny dokument w jego rodzimym jÄ™zyku powinien byÄ‡ uznawany za autorytatywne ÅºrÃ³dÅ‚o. W przypadku informacji krytycznych zaleca siÄ™ skorzystanie z profesjonalnego tÅ‚umaczenia przez czÅ‚owieka. Nie ponosimy odpowiedzialnoÅ›ci za jakiekolwiek nieporozumienia lub bÅ‚Ä™dne interpretacje wynikajÄ…ce z uÅ¼ycia tego tÅ‚umaczenia.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->