<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T12:14:55+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "pl"
}
-->
# ğŸ”€ Warunkowe przepÅ‚ywy pracy agentÃ³w z Azure AI Foundry (.NET)

## ğŸ“‹ Samouczek inteligentnych przepÅ‚ywÃ³w pracy opartych na decyzjach

Ten notebook pokazuje **wzorce warunkowych przepÅ‚ywÃ³w pracy** z wykorzystaniem Azure AI Foundry i Microsoft Agent Framework dla .NET. Nauczysz siÄ™ tworzyÄ‡ zaawansowane, oparte na decyzjach przepÅ‚ywy pracy, ktÃ³re inteligentnie kierujÄ… procesy na podstawie analizy AI, reguÅ‚ biznesowych i dynamicznych warunkÃ³w, zapewniajÄ…c automatyzacjÄ™ na poziomie korporacyjnym.

## ğŸ¯ Cele nauki

### ğŸ§  **Architektura inteligentnych decyzji**
- **Implementacja logiki warunkowej**: Tworzenie zÅ‚oÅ¼onych drzew decyzyjnych z wieloma punktami rozgaÅ‚Ä™zienia
- **Routing oparty na AI**: Wykorzystanie modeli Azure AI Foundry do podejmowania inteligentnych decyzji dotyczÄ…cych kierowania
- **Dynamiczna adaptacja przepÅ‚ywu pracy**: Modyfikowanie zachowania przepÅ‚ywu pracy na podstawie analizy w czasie rzeczywistym i warunkÃ³w
- **Integracja reguÅ‚ biznesowych**: WÅ‚Ä…czanie logiki biznesowej i wymagaÅ„ zgodnoÅ›ci do przepÅ‚ywÃ³w pracy

### ğŸ”€ **Zaawansowane wzorce warunkowe**
- **Podejmowanie decyzji na podstawie wielu kryteriÃ³w**: Ocena wielu czynnikÃ³w przy podejmowaniu decyzji o kierowaniu
- **Przetwarzanie Å›wiadome kontekstu**: Podejmowanie decyzji na podstawie zgromadzonego kontekstu i historii przepÅ‚ywu pracy
- **Adaptacyjna modyfikacja przepÅ‚ywu pracy**: Dynamiczne dostosowywanie Å›cieÅ¼ek przetwarzania na podstawie warunkÃ³w w czasie rzeczywistym
- **Integracja silnika reguÅ‚**: Implementacja zaawansowanych silnikÃ³w reguÅ‚ biznesowych w przepÅ‚ywach pracy

### ğŸ¢ **Warunkowe zastosowania korporacyjne**
- **Klasyfikacja i kierowanie dokumentÃ³w**: Automatyczna klasyfikacja i kierowanie dokumentÃ³w do odpowiednich przepÅ‚ywÃ³w pracy
- **Triaging obsÅ‚ugi klienta**: Inteligentne kierowanie zapytaÅ„ klientÃ³w do wyspecjalizowanych zespoÅ‚Ã³w obsÅ‚ugi
- **Przetwarzanie zgodnoÅ›ci i ryzyka**: Zastosowanie rÃ³Å¼nych procesÃ³w walidacji i przeglÄ…du na podstawie oceny ryzyka
- **PrzepÅ‚ywy pracy kontroli jakoÅ›ci**: Kierowanie treÅ›ci przez odpowiednie procesy przeglÄ…du na podstawie metryk jakoÅ›ci

## âš™ï¸ Wymagania wstÄ™pne i konfiguracja

### ğŸ“¦ **Wymagane pakiety NuGet**

Zaawansowane pakiety do przetwarzania warunkowych przepÅ‚ywÃ³w pracy:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### ğŸ”‘ **Konfiguracja Azure AI Foundry**

**Wymagane zasoby Azure:**
- Workspace Azure AI Foundry z modelami przetwarzania warunkowego
- Subskrypcja Azure z odpowiednimi limitami obliczeniowymi i uprawnieniami
- WdroÅ¼one modele AI do podejmowania decyzji i analizy treÅ›ci
- (Opcjonalnie) PoÅ‚Ä…czenie Bing Search API dla funkcji uziemienia

**Konfiguracja Å›rodowiska (.env file):**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**Konfiguracja uwierzytelniania:**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### ğŸ—ï¸ **Architektura warunkowego przepÅ‚ywu pracy**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**Kluczowe komponenty:**
- **Draft Executor**: Agent AI tworzÄ…cy wstÄ™pne wersje treÅ›ci na podstawie zarysÃ³w
- **Content Review Executor**: Agent AI oceniajÄ…cy jakoÅ›Ä‡ i zgodnoÅ›Ä‡ wstÄ™pnych wersji
- **Conditional Routing**: Logika decyzyjna kierujÄ…ca na podstawie wynikÃ³w przeglÄ…du
- **Publish/Review Paths**: Oddzielne Å›cieÅ¼ki przetwarzania dla zatwierdzonych i odrzuconych treÅ›ci
- **State Management**: Utrzymuje kontekst treÅ›ci i przeglÄ…du w caÅ‚ym przepÅ‚ywie pracy

## ğŸ¨ **Wzorce projektowe warunkowych przepÅ‚ywÃ³w pracy**

### ğŸ“‹ **Produkcja treÅ›ci z bramkami jakoÅ›ci**
```
Outline â†’ Draft Creation â†’ Quality Review â†’ {Approve: Publish | Reject: Revise}
```

### ğŸ¯ **Przetwarzanie dokumentÃ³w oparte na ryzyku**
```
Document â†’ Risk Assessment â†’ {Low: Standard | High: Enhanced Review}
```

### ğŸ” **Inteligentne kierowanie obsÅ‚ugi klienta**
```
Customer Query â†’ Analysis â†’ {Simple: FAQ Bot | Complex: Human Agent}
```

### ğŸ’¼ **PrzepÅ‚ywy pracy oparte na zgodnoÅ›ci**
```
Content â†’ Compliance Check â†’ {Pass: Publish | Fail: Legal Review}
```

## ğŸ¢ **KorzyÅ›ci z warunkowych zastosowaÅ„ korporacyjnych**

### ğŸ¯ **Inteligentna automatyzacja**
- **Inteligentne podejmowanie decyzji**: Decyzje dotyczÄ…ce kierowania oparte na analizie treÅ›ci i kontekstu
- **Adaptacyjne przetwarzanie**: PrzepÅ‚ywy pracy automatycznie dostosowujÄ…ce siÄ™ do zmieniajÄ…cych siÄ™ warunkÃ³w
- **Egzekwowanie reguÅ‚ biznesowych**: Automatyczne stosowanie zÅ‚oÅ¼onej logiki biznesowej i polityk
- **Routing Å›wiadomy kontekstu**: Decyzje oparte na peÅ‚nej historii przepÅ‚ywu pracy i zgromadzonym kontekÅ›cie

### ğŸ“ˆ **Doskonalenie operacyjne**
- **Optymalizacja alokacji zasobÃ³w**: Kierowanie pracy do najbardziej odpowiednich specjalistÃ³w i procesÃ³w
- **Zmniejszenie interwencji manualnej**: Automatyczne podejmowanie decyzji minimalizuje potrzebÄ™ rÄ™cznego kierowania
- **Szybsze czasy rozwiÄ…zywania**: BezpoÅ›rednie kierowanie do odpowiednich ekspertÃ³w i moÅ¼liwoÅ›ci przetwarzania
- **SpÃ³jne stosowanie**: Jednolite stosowanie reguÅ‚ biznesowych i kryteriÃ³w decyzyjnych

### ğŸ›¡ï¸ **ZarzÄ…dzanie ryzykiem i zgodnoÅ›ciÄ…**
- **Automatyczna ocena ryzyka**: Ocena ryzyka treÅ›ci i sytuacji oparta na AI
- **Egzekwowanie zgodnoÅ›ci**: Automatyczne kierowanie przez wymagane procesy regulacyjne
- **Zastosowanie protokoÅ‚Ã³w bezpieczeÅ„stwa**: ZwiÄ™kszone Å›rodki bezpieczeÅ„stwa stosowane na podstawie oceny ryzyka
- **Utrzymanie Å›cieÅ¼ki audytu**: PeÅ‚na dokumentacja decyzji dotyczÄ…cych kierowania i ich uzasadnienia

### ğŸ“Š **Analiza i ciÄ…gÅ‚e doskonalenie**
- **Analiza decyzji**: Åšledzenie skutecznoÅ›ci i dokÅ‚adnoÅ›ci decyzji dotyczÄ…cych kierowania
- **Rozpoznawanie wzorcÃ³w**: Identyfikacja trendÃ³w i wzorcÃ³w w decyzjach dotyczÄ…cych kierowania w czasie
- **Optymalizacja wydajnoÅ›ci**: CiÄ…gÅ‚e doskonalenie kryteriÃ³w decyzyjnych i efektywnoÅ›ci kierowania
- **Inteligencja biznesowa**: WglÄ…d w charakterystykÄ™ treÅ›ci i wymagania dotyczÄ…ce przetwarzania

### ğŸ”§ **Doskonalenie techniczne**
- **Utrzymanie stanu**: Utrzymanie zÅ‚oÅ¼onego stanu w caÅ‚ym wykonaniu przepÅ‚ywu pracy
- **Skalowalna architektura**: ObsÅ‚uga wymagaÅ„ dotyczÄ…cych przetwarzania warunkowego na duÅ¼Ä… skalÄ™
- **MoÅ¼liwoÅ›ci integracji**: Bezproblemowa integracja z istniejÄ…cymi systemami i procesami biznesowymi
- **Monitorowanie i obserwowalnoÅ›Ä‡**: Kompleksowe Å›ledzenie wydajnoÅ›ci przepÅ‚ywu pracy i decyzji

Budujmy inteligentne, oparte na decyzjach przepÅ‚ywy pracy dla przedsiÄ™biorstw z .NET! ğŸš€

## ğŸ’» Uruchamianie kodu

PeÅ‚na implementacja jest dostÄ™pna w `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Demonstruje ona **przepÅ‚yw pracy produkcji treÅ›ci z bramkami jakoÅ›ci**:

### ğŸ—ï¸ **Architektura przepÅ‚ywu pracy**

```
Content Outline â†’ Draft Creation â†’ Quality Review â†’ Conditional Routing:
                                                      â”œâ”€ Approved (>200 words) â†’ Publish
                                                      â””â”€ Rejected (<200 words) â†’ Review Notification
```

**Agenci w przepÅ‚ywie pracy:**
1. **Evangelist Agent**: Tworzy wstÄ™pne wersje samouczkÃ³w na podstawie zarysÃ³w z uziemieniem Bing
2. **Content Reviewer Agent**: Ocena jakoÅ›ci wstÄ™pnych wersji (liczba sÅ‚Ã³w, kompletnoÅ›Ä‡)
3. **Publisher Agent**: Zapisuje zatwierdzone treÅ›ci jako pliki Markdown z datÄ…

**Wykonawcy niestandardowi:**
1. **DraftExecutor**: Orkiestruje tworzenie wstÄ™pnych wersji
2. **ContentReviewExecutor**: Przeprowadza ocenÄ™ jakoÅ›ci
3. **PublishExecutor**: ObsÅ‚uguje publikacjÄ™ zatwierdzonych treÅ›ci
4. **SendReviewExecutor**: ZarzÄ…dza powiadomieniami o odrzuconych treÅ›ciach

### ğŸš€ Uruchamianie przykÅ‚adu

**Wymagania wstÄ™pne:**
- Skonfigurowany workspace Azure AI Foundry
- Uwierzytelnienie Azure CLI (`az login`)
- (Opcjonalnie) PoÅ‚Ä…czenie Bing Search dla uziemienia

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Lub na Windows:
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### ğŸ“ Oczekiwany wynik

PrzepÅ‚yw pracy:
1. **Tworzy agentÃ³w**: Inicjalizuje trzech wyspecjalizowanych agentÃ³w Azure AI Foundry
2. **Generuje wstÄ™pnÄ… wersjÄ™**: Agent Evangelist tworzy wstÄ™pnÄ… wersjÄ™ samouczka na podstawie zarysu
3. **PrzeglÄ…da treÅ›Ä‡**: Content Reviewer ocenia jakoÅ›Ä‡ wstÄ™pnej wersji
4. **Warunkowe kierowanie**:
   - **JeÅ›li zatwierdzone (>200 sÅ‚Ã³w)**: Wykonawca publikacji zapisuje jako plik Markdown
   - **JeÅ›li odrzucone (<200 sÅ‚Ã³w)**: WysyÅ‚a powiadomienie o przeglÄ…dzie
5. **WyÅ›wietla wyniki**: Pokazuje koÅ„cowy wynik przepÅ‚ywu pracy

### ğŸ”§ Opcje dostosowywania

**Modyfikacja kryteriÃ³w przeglÄ…du:**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**Dodanie wiÄ™cej Å›cieÅ¼ek warunkowych:**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**Zmiana wymagaÅ„ dotyczÄ…cych treÅ›ci:**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### ğŸ¯ Zastosowania w rzeczywistoÅ›ci

Ten wzorzec warunkowego przepÅ‚ywu pracy idealnie nadaje siÄ™ do:
- **SystemÃ³w zarzÄ…dzania treÅ›ciÄ…**: Zautomatyzowane przepÅ‚ywy redakcyjne z bramkami jakoÅ›ci
- **Przetwarzania dokumentÃ³w**: Kierowanie dokumentÃ³w na podstawie klasyfikacji i zgodnoÅ›ci
- **ObsÅ‚ugi klienta**: Inteligentne kierowanie zgÅ‚oszeÅ„ na podstawie zÅ‚oÅ¼onoÅ›ci i pilnoÅ›ci
- **PrzeglÄ…du prawnego**: Kierowanie umÃ³w na podstawie oceny ryzyka i wartoÅ›ci
- **ProcesÃ³w HR**: Kierowanie aplikacji przez odpowiednie przepÅ‚ywy weryfikacyjne

### ğŸ” Zrozumienie logiki warunkowej

**Funkcja warunkowa:**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

Ta funkcja tworzy predykat, ktÃ³ry:
1. Sprawdza, czy wynik jest typu `ReviewResult`
2. PorÃ³wnuje wÅ‚aÅ›ciwoÅ›Ä‡ `Result` z oczekiwanÄ… wartoÅ›ciÄ…
3. Zwraca true/false, aby okreÅ›liÄ‡ kierowanie

**KrawÄ™dzie przepÅ‚ywu pracy z warunkami:**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### ğŸ“Š Zaawansowane funkcje

**Walidacja schematu JSON:**
PrzepÅ‚yw pracy wykorzystuje schematy JSON do zapewnienia strukturalnych odpowiedzi:

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Integracja uziemienia Bing:**
Agent Evangelist wykorzystuje uziemienie Bing do uzyskiwania informacji w czasie rzeczywistym:

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

To umoÅ¼liwia agentowi Å›ledzenie URL-i w zarysie i wyodrÄ™bnianie aktualnych informacji.

### ğŸ›¡ï¸ ObsÅ‚uga bÅ‚Ä™dÃ³w

PrzepÅ‚yw pracy zawiera solidnÄ… obsÅ‚ugÄ™ bÅ‚Ä™dÃ³w dla odrzuconych treÅ›ci:
- Niepowodzenia przeglÄ…du uruchamiajÄ… alternatywnÄ… Å›cieÅ¼kÄ™
- Powiadomienia dostarczajÄ… jasnych powodÃ³w odrzucenia
- TreÅ›Ä‡ jest zachowywana do poprawy

### ğŸ”„ Rozszerzanie przepÅ‚ywu pracy

**Dodanie pÄ™tli poprawy:**
StwÃ³rz pÄ™tlÄ™ opinii, ktÃ³ra automatycznie ponownie tworzy treÅ›Ä‡:

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**Implementacja wielopoziomowego przeglÄ…du:**
Dodaj wiele etapÃ³w przeglÄ…du z rÃ³Å¼nymi kryteriami:

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Ten wzorzec warunkowego przepÅ‚ywu pracy stanowi podstawÄ™ do budowy zaawansowanych, inteligentnych systemÃ³w automatyzacji korporacyjnej! ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ZastrzeÅ¼enie**:  
Ten dokument zostaÅ‚ przetÅ‚umaczony za pomocÄ… usÅ‚ugi tÅ‚umaczenia AI [Co-op Translator](https://github.com/Azure/co-op-translator). ChociaÅ¼ staramy siÄ™ zapewniÄ‡ dokÅ‚adnoÅ›Ä‡, prosimy pamiÄ™taÄ‡, Å¼e automatyczne tÅ‚umaczenia mogÄ… zawieraÄ‡ bÅ‚Ä™dy lub nieÅ›cisÅ‚oÅ›ci. Oryginalny dokument w jego rodzimym jÄ™zyku powinien byÄ‡ uznawany za wiarygodne ÅºrÃ³dÅ‚o. W przypadku informacji krytycznych zaleca siÄ™ skorzystanie z profesjonalnego tÅ‚umaczenia przez czÅ‚owieka. Nie ponosimy odpowiedzialnoÅ›ci za jakiekolwiek nieporozumienia lub bÅ‚Ä™dne interpretacje wynikajÄ…ce z uÅ¼ycia tego tÅ‚umaczenia.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->