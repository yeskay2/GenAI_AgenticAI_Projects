<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T11:59:50+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "fr"
}
-->
# üîÄ Flux de travail conditionnel des agents avec Azure AI Foundry (.NET)

## üìã Tutoriel sur les flux de travail bas√©s sur des d√©cisions intelligentes

Ce notebook d√©montre des **mod√®les de flux de travail conditionnels** en utilisant Azure AI Foundry et le Microsoft Agent Framework pour .NET. Vous apprendrez √† construire des flux de travail sophistiqu√©s, bas√©s sur des d√©cisions, qui orientent intelligemment le traitement en fonction de l'analyse IA, des r√®gles m√©tier et des conditions dynamiques pour une automatisation de niveau entreprise.

## üéØ Objectifs d'apprentissage

### üß† **Architecture de d√©cision intelligente**
- **Impl√©mentation de logique conditionnelle** : Construire des arbres de d√©cision complexes avec plusieurs points de branchement
- **Routage aliment√© par l'IA** : Utiliser les mod√®les Azure AI Foundry pour prendre des d√©cisions de routage intelligentes
- **Adaptation dynamique des flux de travail** : Modifier le comportement des flux de travail en fonction de l'analyse et des conditions en temps r√©el
- **Int√©gration des r√®gles d'entreprise** : Incorporer la logique m√©tier et les exigences de conformit√© dans les flux de travail

### üîÄ **Mod√®les conditionnels avanc√©s**
- **Prise de d√©cision multicrit√®res** : √âvaluer plusieurs facteurs pour les d√©cisions de routage
- **Traitement contextuel** : Prendre des d√©cisions bas√©es sur le contexte et l'historique accumul√©s du flux de travail
- **Modification adaptative des flux de travail** : Ajuster dynamiquement les chemins de traitement en fonction des conditions en temps r√©el
- **Int√©gration de moteur de r√®gles** : Impl√©menter des moteurs de r√®gles m√©tier sophistiqu√©s dans les flux de travail

### üè¢ **Applications conditionnelles en entreprise**
- **Classification et routage des documents** : Classer et acheminer automatiquement les documents vers les flux de travail appropri√©s
- **Triage du service client** : Routage intelligent des demandes des clients vers des √©quipes sp√©cialis√©es
- **Traitement de conformit√© et des risques** : Appliquer diff√©rents processus de validation et de r√©vision en fonction de l'√©valuation des risques
- **Flux de travail d'assurance qualit√©** : Acheminer le contenu √† travers les processus de r√©vision appropri√©s en fonction des m√©triques de qualit√©

## ‚öôÔ∏è Pr√©requis et configuration

### üì¶ **Packages NuGet requis**

Packages avanc√©s pour le traitement des flux de travail conditionnels :

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### üîë **Configuration Azure AI Foundry**

**Ressources Azure requises :**
- Espace de travail Azure AI Foundry avec des mod√®les de traitement conditionnel
- Abonnement Azure avec quotas de calcul et autorisations appropri√©s
- Mod√®les IA d√©ploy√©s pour la prise de d√©cision et l'analyse de contenu
- (Optionnel) Connexion √† l'API Bing Search pour des capacit√©s de recherche contextuelle

**Configuration de l'environnement (fichier .env) :**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**Configuration de l'authentification :**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### üèóÔ∏è **Architecture des flux de travail conditionnels**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**Composants cl√©s :**
- **Draft Executor** : Agent IA qui cr√©e des brouillons de contenu √† partir de plans
- **Content Review Executor** : Agent IA qui √©value la qualit√© et la conformit√© des brouillons
- **Routage conditionnel** : Logique de d√©cision qui oriente en fonction des r√©sultats de la r√©vision
- **Chemins de publication/r√©vision** : Chemins de traitement s√©par√©s pour le contenu approuv√© ou rejet√©
- **Gestion des √©tats** : Maintient le contexte du contenu et de la r√©vision tout au long du flux de travail

## üé® **Mod√®les de conception de flux de travail conditionnels**

### üìã **Production de contenu avec des seuils de qualit√©**
```
Outline ‚Üí Draft Creation ‚Üí Quality Review ‚Üí {Approve: Publish | Reject: Revise}
```

### üéØ **Traitement des documents bas√© sur les risques**
```
Document ‚Üí Risk Assessment ‚Üí {Low: Standard | High: Enhanced Review}
```

### üîç **Routage intelligent du service client**
```
Customer Query ‚Üí Analysis ‚Üí {Simple: FAQ Bot | Complex: Human Agent}
```

### üíº **Flux de travail ax√©s sur la conformit√©**
```
Content ‚Üí Compliance Check ‚Üí {Pass: Publish | Fail: Legal Review}
```

## üè¢ **Avantages conditionnels pour l'entreprise**

### üéØ **Automatisation intelligente**
- **Prise de d√©cision intelligente** : D√©cisions de routage aliment√©es par l'IA bas√©es sur l'analyse du contenu et le contexte
- **Traitement adaptatif** : Flux de travail qui s'ajustent automatiquement en fonction des conditions changeantes
- **Application des r√®gles m√©tier** : Application automatique de logiques m√©tier complexes et de politiques
- **Routage contextuel** : D√©cisions bas√©es sur l'historique complet du flux de travail et le contexte accumul√©

### üìà **Excellence op√©rationnelle**
- **Allocation optimis√©e des ressources** : Acheminer le travail vers les sp√©cialistes et processus les plus appropri√©s
- **R√©duction de l'intervention manuelle** : La prise de d√©cision automatis√©e minimise le besoin de routage humain
- **Temps de r√©solution plus rapides** : Routage direct vers l'expertise et les capacit√©s de traitement appropri√©es
- **Application coh√©rente** : Application uniforme des r√®gles m√©tier et des crit√®res de d√©cision

### üõ°Ô∏è **Gestion des risques et conformit√©**
- **√âvaluation automatis√©e des risques** : √âvaluation aliment√©e par l'IA des niveaux de risque du contenu et des situations
- **Application de la conformit√©** : Routage automatique √† travers les processus r√©glementaires requis
- **Application des protocoles de s√©curit√©** : Mesures de s√©curit√© renforc√©es appliqu√©es en fonction de l'√©valuation des risques
- **Maintien des traces d'audit** : Documentation compl√®te des d√©cisions de routage et de leur justification

### üìä **Analytique et am√©lioration continue**
- **Analytique des d√©cisions** : Suivre l'efficacit√© et la pr√©cision des d√©cisions de routage
- **Reconnaissance des mod√®les** : Identifier les tendances et les mod√®les dans les d√©cisions de routage au fil du temps
- **Optimisation des performances** : Am√©lioration continue des crit√®res de d√©cision et de l'efficacit√© du routage
- **Intelligence d'affaires** : Aper√ßus sur les caract√©ristiques du contenu et les exigences de traitement

### üîß **Excellence technique**
- **Gestion persistante des √©tats** : Maintenir des √©tats complexes tout au long de l'ex√©cution du flux de travail
- **Architecture √©volutive** : G√©rer des exigences de traitement conditionnel √† haut volume
- **Capacit√©s d'int√©gration** : Int√©gration transparente avec les syst√®mes et processus m√©tier existants
- **Surveillance et observabilit√©** : Suivi complet des performances et des d√©cisions du flux de travail

Construisons des flux de travail intelligents et bas√©s sur des d√©cisions pour les entreprises avec .NET ! üöÄ

## üíª Ex√©cution du code

La mise en ≈ìuvre compl√®te est disponible dans `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Cela d√©montre un **flux de travail de production de contenu avec des seuils de qualit√©** :

### üèóÔ∏è **Architecture du flux de travail**

```
Content Outline ‚Üí Draft Creation ‚Üí Quality Review ‚Üí Conditional Routing:
                                                      ‚îú‚îÄ Approved (>200 words) ‚Üí Publish
                                                      ‚îî‚îÄ Rejected (<200 words) ‚Üí Review Notification
```

**Agents dans le flux de travail :**
1. **Agent √âvang√©liste** : Cr√©e des brouillons de tutoriels √† partir de plans avec Bing grounding
2. **Agent R√©viseur de contenu** : √âvalue la qualit√© des brouillons (nombre de mots, compl√©tude)
3. **Agent √âditeur** : Enregistre le contenu approuv√© sous forme de fichiers Markdown horodat√©s

**Ex√©cuteurs personnalis√©s :**
1. **DraftExecutor** : Orchestre la cr√©ation de brouillons
2. **ContentReviewExecutor** : Effectue l'√©valuation de la qualit√©
3. **PublishExecutor** : G√®re la publication du contenu approuv√©
4. **SendReviewExecutor** : G√®re les notifications de contenu rejet√©

### üöÄ Ex√©cution de l'exemple

**Pr√©requis :**
- Espace de travail Azure AI Foundry configur√©
- Authentification Azure CLI (`az login`)
- (Optionnel) Connexion Bing Search pour grounding

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Ou sur Windows :
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### üìù R√©sultat attendu

Le flux de travail :
1. **Cr√©e des agents** : Initialise trois agents sp√©cialis√©s Azure AI Foundry
2. **G√©n√®re un brouillon** : L'agent √âvang√©liste cr√©e un brouillon de tutoriel √† partir d'un plan
3. **R√©vise le contenu** : L'agent R√©viseur de contenu √©value la qualit√© du brouillon
4. **Routage conditionnel** :
   - **Si approuv√© (>200 mots)** : L'ex√©cuteur de publication enregistre sous forme de fichier Markdown
   - **Si rejet√© (<200 mots)** : Notification de r√©vision envoy√©e
5. **Affiche les r√©sultats** : Montre le r√©sultat final du flux de travail

### üîß Options de personnalisation

**Modifier les crit√®res de r√©vision :**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**Ajouter plus de chemins conditionnels :**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**Changer les exigences de contenu :**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### üéØ Applications r√©elles

Ce mod√®le de flux de travail conditionnel est id√©al pour :
- **Syst√®mes de gestion de contenu** : Flux √©ditoriaux automatis√©s avec seuils de qualit√©
- **Traitement de documents** : Acheminer les documents en fonction de la classification et de la conformit√©
- **Support client** : Routage intelligent des tickets en fonction de la complexit√© et de l'urgence
- **R√©vision juridique** : Acheminer les contrats en fonction de l'√©valuation des risques et de la valeur
- **Processus RH** : Acheminer les candidatures √† travers des flux de s√©lection appropri√©s

### üîç Comprendre la logique conditionnelle

**Fonction de condition :**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

Cette fonction cr√©e un pr√©dicat qui :
1. V√©rifie si le r√©sultat est de type `ReviewResult`
2. Compare la propri√©t√© `Result` √† la valeur attendue
3. Retourne vrai/faux pour d√©terminer le routage

**Bords du flux de travail avec conditions :**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### üìä Fonctionnalit√©s avanc√©es

**Validation du sch√©ma JSON :**
Le flux de travail utilise des sch√©mas JSON pour garantir des r√©ponses structur√©es :

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Int√©gration Bing Grounding :**
L'agent √âvang√©liste utilise Bing grounding pour acc√©der √† des informations en temps r√©el :

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

Cela permet √† l'agent de suivre les URL dans le plan et d'extraire des informations actuelles.

### üõ°Ô∏è Gestion des erreurs

Le flux de travail inclut une gestion robuste des erreurs pour le contenu rejet√© :
- Les √©checs de r√©vision d√©clenchent le chemin alternatif
- Les notifications fournissent des raisons claires de rejet
- Le contenu est conserv√© pour r√©vision

### üîÑ Extension du flux de travail

**Ajouter une boucle de r√©vision :**
Cr√©er une boucle de r√©troaction qui recr√©e automatiquement le contenu :

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**Impl√©menter une r√©vision √† plusieurs niveaux :**
Ajouter plusieurs √©tapes de r√©vision avec diff√©rents crit√®res :

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Ce mod√®le de flux de travail conditionnel fournit la base pour construire des syst√®mes d'automatisation sophistiqu√©s et intelligents pour les entreprises ! üöÄ

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Avertissement** :  
Ce document a √©t√© traduit √† l'aide du service de traduction automatique [Co-op Translator](https://github.com/Azure/co-op-translator). Bien que nous nous efforcions d'assurer l'exactitude, veuillez noter que les traductions automatis√©es peuvent contenir des erreurs ou des inexactitudes. Le document original dans sa langue d'origine doit √™tre consid√©r√© comme la source faisant autorit√©. Pour des informations critiques, il est recommand√© de recourir √† une traduction humaine professionnelle. Nous ne sommes pas responsables des malentendus ou des interpr√©tations erron√©es r√©sultant de l'utilisation de cette traduction.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->