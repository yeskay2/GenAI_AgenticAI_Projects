<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:29:23+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "cs"
}
-->
# âš¡ SouÄasnÃ© pracovnÃ­ postupy agentÅ¯ s modely GitHub (.NET)

## ğŸ“‹ NÃ¡vod na vysoce vÃ½konnÃ© paralelnÃ­ zpracovÃ¡nÃ­

Tento notebook demonstruje **vzory souÄasnÃ½ch pracovnÃ­ch postupÅ¯** pomocÃ­ Microsoft Agent Framework pro .NET a modelÅ¯ GitHub. NauÄÃ­te se, jak vytvoÅ™it vysoce vÃ½konnÃ© pracovnÃ­ postupy paralelnÃ­ho zpracovÃ¡nÃ­, kterÃ© maximalizujÃ­ propustnost provÃ¡dÄ›nÃ­m vÃ­ce AI agentÅ¯ souÄasnÄ› pÅ™i zachovÃ¡nÃ­ koordinace a konzistence dat.

## ğŸ¯ CÃ­le uÄenÃ­

### ğŸš€ **ZÃ¡klady souÄasnÃ©ho zpracovÃ¡nÃ­**
- **ParalelnÃ­ provÃ¡dÄ›nÃ­ agentÅ¯**: SpouÅ¡tÄ›nÃ­ vÃ­ce AI agentÅ¯ souÄasnÄ› pro maximÃ¡lnÃ­ vÃ½kon
- **Vzory Async/Await**: VyuÅ¾itÃ­ asynchronnÃ­ho programovacÃ­ho modelu .NET pro efektivnÃ­ soubÄ›Å¾nost
- **Integrace modelÅ¯ GitHub**: Koordinace vÃ­ce souÄasnÃ½ch volÃ¡nÃ­ na inference sluÅ¾bu modelÅ¯ GitHub
- **SprÃ¡va zdrojÅ¯**: EfektivnÃ­ sprÃ¡va zdrojÅ¯ AI modelÅ¯ napÅ™Ã­Ä souÄasnÃ½mi operacemi

### ğŸ—ï¸ **PokroÄilÃ¡ architektura soubÄ›Å¾nosti**
- **Paralelismus zaloÅ¾enÃ½ na ÃºlohÃ¡ch**: PouÅ¾itÃ­ knihovny .NET Task Parallel Library pro optimÃ¡lnÃ­ souÄasnÃ© provÃ¡dÄ›nÃ­
- **Vzory synchronizace**: Koordinace souÄasnÃ½ch agentÅ¯ pÅ™i zamezenÃ­ zÃ¡vodnÃ­ch podmÃ­nek
- **VyvaÅ¾ovÃ¡nÃ­ zÃ¡tÄ›Å¾e**: EfektivnÃ­ rozdÄ›lenÃ­ prÃ¡ce napÅ™Ã­Ä dostupnou kapacitou souÄasnÃ©ho zpracovÃ¡nÃ­
- **Odolnost proti chybÃ¡m**: Å˜eÅ¡enÃ­ selhÃ¡nÃ­ jednotlivÃ½ch agentÅ¯ bez zastavenÃ­ celÃ©ho pracovnÃ­ho postupu

### ğŸ¢ **PodnikovÃ© aplikace soubÄ›Å¾nosti**
- **ZpracovÃ¡nÃ­ dokumentÅ¯ ve velkÃ©m objemu**: SouÄasnÃ© zpracovÃ¡nÃ­ vÃ­ce dokumentÅ¯
- **AnalÃ½za obsahu v reÃ¡lnÃ©m Äase**: SouÄasnÃ¡ analÃ½za pÅ™Ã­chozÃ­ch datovÃ½ch tokÅ¯
- **Optimalizace dÃ¡vkovÃ©ho zpracovÃ¡nÃ­**: Maximalizace propustnosti pro rozsÃ¡hlÃ© operace zpracovÃ¡nÃ­ dat
- **MultimodÃ¡lnÃ­ analÃ½za**: ParalelnÃ­ zpracovÃ¡nÃ­ rÅ¯znÃ½ch typÅ¯ a formÃ¡tÅ¯ obsahu

## âš™ï¸ PÅ™edpoklady a nastavenÃ­

### ğŸ“¦ **PoÅ¾adovanÃ© balÃ­Äky NuGet**

ZÃ¡kladnÃ­ balÃ­Äky pro vysoce vÃ½konnÃ© souÄasnÃ© pracovnÃ­ postupy:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **Konfigurace modelÅ¯ GitHub**

**NastavenÃ­ prostÅ™edÃ­ (soubor .env):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Ãšvahy o souÄasnÃ©m zpracovÃ¡nÃ­:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Architektura souÄasnÃ©ho pracovnÃ­ho postupu**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**KlÃ­ÄovÃ© komponenty:**
- **Task Parallel Library**: VestavÄ›nÃ¡ podpora .NET pro souÄasnÃ© operace
- **Agent Pool**: VÃ­ce instancÃ­ agentÅ¯ pro paralelnÃ­ zpracovÃ¡nÃ­
- **Agregace vÃ½sledkÅ¯**: Koordinace a sluÄovÃ¡nÃ­ vÃ½sledkÅ¯ souÄasnÃ½ch agentÅ¯
- **SynchronizaÄnÃ­ body**: ZajiÅ¡tÄ›nÃ­ konzistence dat napÅ™Ã­Ä souÄasnÃ½mi operacemi

## ğŸ¨ **Vzory nÃ¡vrhu souÄasnÃ½ch pracovnÃ­ch postupÅ¯**

### ğŸ” **ParalelnÃ­ vÃ½zkum a analÃ½za**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **ZpracovÃ¡nÃ­ dat z vÃ­ce zdrojÅ¯**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Pipeline pro generovÃ¡nÃ­ obsahu**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Fan-Out/Fan-In zpracovÃ¡nÃ­**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **VÃ½hody podnikovÃ© vÃ½konnosti**

### âš¡ **Propustnost a Å¡kÃ¡lovatelnost**
- **LineÃ¡rnÃ­ Å¡kÃ¡lovÃ¡nÃ­ vÃ½konu**: PÅ™idÃ¡nÃ­ vÃ­ce souÄasnÃ½ch agentÅ¯ pro zvÃ½Å¡enÃ­ propustnosti
- **VyuÅ¾itÃ­ zdrojÅ¯**: MaximÃ¡lnÃ­ efektivita dostupnÃ© kapacity AI modelÅ¯
- **ZkrÃ¡cenÃ­ doby zpracovÃ¡nÃ­**: VÃ½znamnÃ© zkrÃ¡cenÃ­ Äasu dÃ­ky paralelnÃ­mu provÃ¡dÄ›nÃ­
- **ElastickÃ© Å¡kÃ¡lovÃ¡nÃ­**: DynamickÃ© pÅ™izpÅ¯sobenÃ­ poÄtu souÄasnÃ½ch agentÅ¯ na zÃ¡kladÄ› pracovnÃ­ zÃ¡tÄ›Å¾e

### ğŸ›¡ï¸ **Spolehlivost a odolnost**
- **Izolace chyb**: SelhÃ¡nÃ­ jednotlivÃ½ch agentÅ¯ neovlivnÃ­ ostatnÃ­ souÄasnÃ© operace
- **PostupnÃ¡ degradace**: SystÃ©m pokraÄuje v provozu se snÃ­Å¾enou kapacitou agentÅ¯
- **Obnova chyb**: AutomatickÃ© mechanismy opakovÃ¡nÃ­ pro selhanÃ© souÄasnÃ© operace
- **RozdÄ›lenÃ­ zÃ¡tÄ›Å¾e**: RovnomÄ›rnÃ© rozdÄ›lenÃ­ prÃ¡ce mezi dostupnÃ© agenty

### ğŸ“Š **MonitorovÃ¡nÃ­ vÃ½konu**
- **Metriky souÄasnÃ©ho provÃ¡dÄ›nÃ­**: SledovÃ¡nÃ­ vÃ½konu vÅ¡ech paralelnÃ­ch operacÃ­
- **AnalÃ½za vyuÅ¾itÃ­ zdrojÅ¯**: MonitorovÃ¡nÃ­ CPU, pamÄ›ti a vyuÅ¾itÃ­ sÃ­tÄ›
- **AnalÃ½za propustnosti**: MÄ›Å™enÃ­ efektivity dosaÅ¾enÃ© souÄasnÃ½m zpracovÃ¡nÃ­m
- **Detekce ÃºzkÃ½ch mÃ­st**: Identifikace a Å™eÅ¡enÃ­ vÃ½konovÃ½ch omezenÃ­

### ğŸ”§ **VÃ½voj a provoz**
- **AsynchronnÃ­ programovacÃ­ model**: VyuÅ¾itÃ­ zralÃ½ch vzorÅ¯ async/await v .NET
- **Koordinace Ãºloh**: VestavÄ›nÃ© moÅ¾nosti sprÃ¡vy a koordinace Ãºloh
- **ZpracovÃ¡nÃ­ vÃ½jimek**: KomplexnÃ­ zpracovÃ¡nÃ­ chyb pro souÄasnÃ© operace
- **Podpora ladÄ›nÃ­**: NÃ¡stroje pro ladÄ›nÃ­ souÄasnÃ½ch pracovnÃ­ch postupÅ¯ ve Visual Studiu

PojÄme vytvoÅ™it vysoce vÃ½konnÃ© souÄasnÃ© AI pracovnÃ­ postupy s .NET! ğŸš€

## ğŸ’» SpuÅ¡tÄ›nÃ­ kÃ³du

KompletnÃ­ implementace je dostupnÃ¡ v souboru `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Tento soubor demonstruje **Fan-Out/Fan-In souÄasnÃ½ pracovnÃ­ postup** pro plÃ¡novÃ¡nÃ­ cest:

### ğŸ—ï¸ **Architektura pracovnÃ­ho postupu**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**KlÃ­ÄovÃ© komponenty:**

1. **ConcurrentStartExecutor**: SouÄasnÄ› vysÃ­lÃ¡ uÅ¾ivatelskÃ½ poÅ¾adavek vÅ¡em agentÅ¯m
2. **Researcher Agent**: SouÄasnÄ› analyzuje destinace a atrakce
3. **Planner Agent**: SouÄasnÄ› vytvÃ¡Å™Ã­ podrobnÃ© cestovnÃ­ plÃ¡ny
4. **ConcurrentAggregationExecutor**: SbÃ­rÃ¡ a sluÄuje vÃ½sledky od obou agentÅ¯

### ğŸ¯ **Vzorec Fan-Out/Fan-In**

Tento pracovnÃ­ postup demonstruje klasickÃ½ vzorec **Fan-Out/Fan-In**:
- **Fan-Out**: Jeden vstupnÃ­ poÅ¾adavek je souÄasnÄ› vysÃ­lÃ¡n vÃ­ce agentÅ¯m
- **SouÄasnÃ© zpracovÃ¡nÃ­**: VÃ­ce agentÅ¯ pracuje paralelnÄ› na stejnÃ©m Ãºkolu
- **Fan-In**: VÃ½sledky od vÅ¡ech agentÅ¯ jsou shromÃ¡Å¾dÄ›ny a slouÄeny do jednoho vÃ½stupu

### ğŸš€ SpuÅ¡tÄ›nÃ­ pÅ™Ã­kladu

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Nebo na Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ OÄekÃ¡vanÃ½ vÃ½stup

PracovnÃ­ postup provede:
1. **VysÃ­lÃ¡nÃ­ poÅ¾adavku**: OdeslÃ¡nÃ­ "NaplÃ¡nuj vÃ½let do Seattlu v prosinci" obÄ›ma agentÅ¯m
2. **SouÄasnÃ© zpracovÃ¡nÃ­**: Oba agenti pracujÃ­ souÄasnÄ›:
   - VÃ½zkumnÃ­k identifikuje atrakce a detaily
   - PlÃ¡novaÄ vytvÃ¡Å™Ã­ itinerÃ¡Å™ a logistiku
3. **Agregace**: Kombinace obou odpovÄ›dÃ­ do komplexnÃ­ho vÃ½stupu
4. **ZobrazenÃ­ vÃ½sledkÅ¯**: ZobrazenÃ­ slouÄenÃ©ho cestovnÃ­ho plÃ¡nu se vÅ¡emi informacemi

### ğŸ”§ MoÅ¾nosti pÅ™izpÅ¯sobenÃ­

**PÅ™idÃ¡nÃ­ vÃ­ce souÄasnÃ½ch agentÅ¯:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Ãšprava pokynÅ¯ pro agenty:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**ZmÄ›na Ãºkolu:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ ReÃ¡lnÃ© aplikace

Tento souÄasnÃ½ vzorec je ideÃ¡lnÃ­ pro:
- **Tvorbu obsahu**: VÃ­ce autorÅ¯ souÄasnÄ› vytvÃ¡Å™Ã­ rÅ¯znÃ© sekce
- **Kontrolu kÃ³du**: VÃ­ce recenzentÅ¯ analyzuje kÃ³d z rÅ¯znÃ½ch perspektiv
- **PrÅ¯zkum trhu**: ParalelnÃ­ analÃ½za rÅ¯znÃ½ch trÅ¾nÃ­ch segmentÅ¯
- **ZpracovÃ¡nÃ­ dokumentÅ¯**: SouÄasnÃ¡ extrakce, analÃ½za a validace
- **AnalÃ½za z vÃ­ce perspektiv**: ZÃ­skÃ¡nÃ­ rÅ¯znorodÃ½ch pohledÅ¯ na stejnÃ½ vstup

### ğŸ” PochopenÃ­ vlastnÃ­ch vykonavatelÅ¯

**ConcurrentStartExecutor:**
- Implementuje `IMessageHandler<string>` pro pÅ™ijetÃ­ vstupu ve formÄ› Å™etÄ›zce
- VysÃ­lÃ¡ zprÃ¡vy vÅ¡em pÅ™ipojenÃ½m agentÅ¯m
- OdesÃ­lÃ¡ `TurnToken` pro spuÅ¡tÄ›nÃ­ souÄasnÃ©ho zpracovÃ¡nÃ­

**ConcurrentAggregationExecutor:**
- Implementuje `IMessageHandler<ChatMessage>` pro pÅ™Ã­jem odpovÄ›dÃ­ agentÅ¯
- SbÃ­rÃ¡ zprÃ¡vy bezpeÄnÄ› pro vÃ­ce vlÃ¡ken
- Agreguje, kdyÅ¾ dorazÃ­ vÅ¡echny oÄekÃ¡vanÃ© odpovÄ›di
- Poskytuje koneÄnÃ½ vÃ½stup pomocÃ­ `context.YieldOutputAsync()`

### âš¡ VÃ½hody vÃ½konu

**SouÄasnÃ© vs SekvenÄnÃ­:**
- SekvenÄnÃ­: Agent1 (30s) â†’ Agent2 (30s) = **60 sekund celkem**
- SouÄasnÃ©: Agent1 (30s) || Agent2 (30s) = **30 sekund celkem**

**ZlepÅ¡enÃ­ propustnosti**: AÅ¾ NÃ— rychlejÅ¡Ã­ pro N souÄasnÃ½ch agentÅ¯ (v zÃ¡vislosti na pracovnÃ­ zÃ¡tÄ›Å¾i a zdrojÃ­ch)

### ğŸ›¡ï¸ ZpracovÃ¡nÃ­ chyb

PracovnÃ­ postup zvlÃ¡dÃ¡ selhÃ¡nÃ­ jednotlivÃ½ch agentÅ¯ elegantnÄ›:
- Pokud jeden agent selÅ¾e, ostatnÃ­ pokraÄujÃ­ ve zpracovÃ¡nÃ­
- AgregÃ¡tor mÅ¯Å¾e implementovat logiku ÄasovÃ©ho limitu
- Mohou bÃ½t vrÃ¡ceny ÄÃ¡steÄnÃ© vÃ½sledky, pokud je to potÅ™eba

### ğŸ“Š PokroÄilÃ© funkce

**DynamickÃ½ poÄet agentÅ¯:**
Upravte logiku agregace pro podporu promÄ›nlivÃ©ho poÄtu agentÅ¯:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Tento vzorec souÄasnÃ©ho pracovnÃ­ho postupu je nezbytnÃ½ pro budovÃ¡nÃ­ vysoce vÃ½konnÃ½ch, Å¡kÃ¡lovatelnÃ½ch systÃ©mÅ¯ AI agentÅ¯!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ProhlÃ¡Å¡enÃ­**:  
Tento dokument byl pÅ™eloÅ¾en pomocÃ­ sluÅ¾by AI pro pÅ™eklady [Co-op Translator](https://github.com/Azure/co-op-translator). I kdyÅ¾ se snaÅ¾Ã­me o pÅ™esnost, mÄ›jte prosÃ­m na pamÄ›ti, Å¾e automatickÃ© pÅ™eklady mohou obsahovat chyby nebo nepÅ™esnosti. PÅ¯vodnÃ­ dokument v jeho pÅ¯vodnÃ­m jazyce by mÄ›l bÃ½t povaÅ¾ovÃ¡n za autoritativnÃ­ zdroj. Pro dÅ¯leÅ¾itÃ© informace se doporuÄuje profesionÃ¡lnÃ­ lidskÃ½ pÅ™eklad. NeodpovÃ­dÃ¡me za Å¾Ã¡dnÃ¡ nedorozumÄ›nÃ­ nebo nesprÃ¡vnÃ© interpretace vyplÃ½vajÃ­cÃ­ z pouÅ¾itÃ­ tohoto pÅ™ekladu.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->