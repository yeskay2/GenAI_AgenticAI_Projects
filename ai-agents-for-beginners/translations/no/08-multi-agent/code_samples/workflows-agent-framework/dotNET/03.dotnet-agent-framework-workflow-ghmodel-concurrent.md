<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:22:20+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "no"
}
-->
# âš¡ Samtidige Agentarbeidsflyter med GitHub-modeller (.NET)

## ğŸ“‹ OpplÃ¦ring i hÃ¸yytelses parallell behandling

Denne veiledningen demonstrerer **samtidige arbeidsflytmÃ¸nstre** ved bruk av Microsoft Agent Framework for .NET og GitHub-modeller. Du vil lÃ¦re hvordan du bygger hÃ¸yytelses arbeidsflyter for parallell behandling som maksimerer gjennomstrÃ¸mning ved Ã¥ kjÃ¸re flere AI-agenter samtidig, samtidig som du opprettholder koordinasjon og datakonsistens.

## ğŸ¯ LÃ¦ringsmÃ¥l

### ğŸš€ **Grunnleggende om samtidig behandling**
- **Parallell agentutfÃ¸relse**: KjÃ¸r flere AI-agenter samtidig for maksimal ytelse
- **Async/Await-mÃ¸nstre**: Utnytt .NETs asynkrone programmeringsmodell for effektiv samtidighet
- **Integrasjon med GitHub-modeller**: Koordiner flere samtidige kall til GitHubs AI-modelltjeneste
- **Ressursstyring**: HÃ¥ndter AI-modellressurser effektivt pÃ¥ tvers av samtidige operasjoner

### ğŸ—ï¸ **Avansert samtidighetsarkitektur**
- **Oppgavebasert parallellisme**: Bruk .NET Task Parallel Library for optimal samtidig utfÃ¸relse
- **SynkroniseringsmÃ¸nstre**: Koordiner samtidige agenter og unngÃ¥ kapplÃ¸psforhold
- **Lastbalansering**: Fordel arbeidet effektivt over tilgjengelig kapasitet for samtidig behandling
- **Feiltoleranse**: HÃ¥ndter individuelle agentfeil uten Ã¥ stoppe hele arbeidsflyten

### ğŸ¢ **Samtidige applikasjoner for bedrifter**
- **HÃ¸yvolum dokumentbehandling**: Behandle flere dokumenter samtidig
- **Sanntidsinnholdsanalyse**: Samtidig analyse av innkommende datastrÃ¸mmer
- **Optimalisering av batchbehandling**: Maksimer gjennomstrÃ¸mning for storskala databehandlingsoperasjoner
- **Multimodal analyse**: Parallell behandling av ulike innholdstyper og formater

## âš™ï¸ Forutsetninger og oppsett

### ğŸ“¦ **NÃ¸dvendige NuGet-pakker**

Essensielle pakker for hÃ¸yytelses samtidige arbeidsflyter:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **Konfigurasjon av GitHub-modeller**

**MiljÃ¸oppsett (.env-fil):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Hensyn ved samtidig behandling:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Arkitektur for samtidig arbeidsflyt**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**NÃ¸kkelkomponenter:**
- **Task Parallel Library**: .NETs innebygde stÃ¸tte for samtidige operasjoner
- **Agentpool**: Flere agentinstanser for parallell behandling
- **Resultataggregasjon**: Koordinering og sammenslÃ¥ing av resultater fra samtidige agenter
- **Synkroniseringspunkter**: Sikre datakonsistens pÃ¥ tvers av samtidige operasjoner

## ğŸ¨ **DesignmÃ¸nstre for samtidig arbeidsflyt**

### ğŸ” **Parallell forskning og analyse**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Databehandling fra flere kilder**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Innholdsproduksjonsprosess**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Fan-Out/Fan-In-behandling**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **Fordeler med ytelse i bedrifter**

### âš¡ **GjennomstrÃ¸mning og skalerbarhet**
- **LineÃ¦r ytelsesskalerbarhet**: Legg til flere samtidige agenter for Ã¥ Ã¸ke gjennomstrÃ¸mningen
- **Ressursutnyttelse**: Maksimal effektivitet av tilgjengelig AI-modellkapasitet
- **Redusert behandlingstid**: Betydelig tidsreduksjon gjennom parallell utfÃ¸relse
- **Elastisk skalering**: Juster antall samtidige agenter dynamisk basert pÃ¥ arbeidsmengde

### ğŸ›¡ï¸ **PÃ¥litelighet og robusthet**
- **Feilisolering**: Individuelle agentfeil pÃ¥virker ikke andre samtidige operasjoner
- **GrasiÃ¸s degradering**: Systemet fortsetter Ã¥ fungere med redusert agentkapasitet
- **FeilhÃ¥ndtering**: Automatiske gjenopprettingsmekanismer for mislykkede samtidige operasjoner
- **Lastfordeling**: Jevn fordeling av arbeid over tilgjengelige agenter

### ğŸ“Š **YtelsesovervÃ¥king**
- **MÃ¥ling av samtidig utfÃ¸relse**: Spor ytelsen til alle parallelle operasjoner
- **Analyse av ressursbruk**: OvervÃ¥k CPU-, minne- og nettverksbruk
- **GjennomstrÃ¸mningsanalyse**: MÃ¥l effektivitetsgevinster fra samtidig behandling
- **Flaskehalsdeteksjon**: Identifiser og lÃ¸s ytelsesbegrensninger

### ğŸ”§ **Utvikling og drift**
- **Asynkron programmeringsmodell**: Utnytt .NETs modne async/await-mÃ¸nstre
- **Oppgavekoordinering**: Innebygd oppgavestyring og koordineringsfunksjoner
- **UnntakshÃ¥ndtering**: Omfattende feilhÃ¥ndtering for samtidige operasjoner
- **FeilsÃ¸kingsstÃ¸tte**: Visual Studio-feilsÃ¸kingsverktÃ¸y for samtidige arbeidsflyter

La oss bygge hÃ¸yytelses samtidige AI-arbeidsflyter med .NET! ğŸš€

## ğŸ’» KjÃ¸re koden

Den komplette implementeringen er tilgjengelig i `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Denne filen demonstrerer en **Fan-Out/Fan-In samtidig arbeidsflyt** for reiseplanlegging:

### ğŸ—ï¸ **Arbeidsflytarkitektur**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**NÃ¸kkelkomponenter:**

1. **ConcurrentStartExecutor**: Sender brukerforespÃ¸rselen til alle agenter samtidig
2. **Researcher Agent**: Analyserer destinasjoner og attraksjoner parallelt
3. **Planner Agent**: Lager detaljerte reiseplaner parallelt
4. **ConcurrentAggregationExecutor**: Samler og slÃ¥r sammen resultater fra begge agenter

### ğŸ¯ **Fan-Out/Fan-In-mÃ¸nster**

Denne arbeidsflyten demonstrerer det klassiske **Fan-Out/Fan-In**-mÃ¸nsteret:
- **Fan-Out**: En innkommende melding sendes til flere agenter samtidig
- **Samtidig behandling**: Flere agenter jobber parallelt med samme oppgave
- **Fan-In**: Resultater fra alle agenter samles og aggregeres til Ã©n enkelt utdata

### ğŸš€ KjÃ¸re eksempelet

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Eller pÃ¥ Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ Forventet utdata

Arbeidsflyten vil:
1. **Sende forespÃ¸rsel**: Sende "Planlegg en tur til Seattle i desember" til begge agenter
2. **Samtidig behandling**: Begge agenter jobber samtidig:
   - Researcher identifiserer attraksjoner og detaljer
   - Planner lager reiserute og logistikk
3. **Aggregering**: Kombinerer begge svarene til en omfattende utdata
4. **Vis resultater**: Viser den sammenslÃ¥tte reiseplanen med all informasjon

### ğŸ”§ Tilpasningsmuligheter

**Legg til flere samtidige agenter:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Endre agentinstruksjoner:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Endre oppgaven:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ Virkelige applikasjoner

Dette samtidige mÃ¸nsteret er ideelt for:
- **Innholdsproduksjon**: Flere forfattere som lager ulike seksjoner samtidig
- **Kodegjennomgang**: Flere gjennomlesere som analyserer kode fra ulike perspektiver
- **MarkedsundersÃ¸kelser**: Parallell analyse av ulike markedssegmenter
- **Dokumentbehandling**: Samtidig utvinning, analyse og validering
- **Flere perspektivanalyser**: FÃ¥ ulike synspunkter pÃ¥ samme innspill

### ğŸ” ForstÃ¥ tilpassede eksekutÃ¸rer

**ConcurrentStartExecutor:**
- Implementerer `IMessageHandler<string>` for Ã¥ akseptere strenginput
- Sender meldinger til alle tilkoblede agenter
- Sender `TurnToken` for Ã¥ utlÃ¸se samtidig behandling

**ConcurrentAggregationExecutor:**
- Implementerer `IMessageHandler<ChatMessage>` for Ã¥ motta agentresponser
- Samler meldinger pÃ¥ en trÃ¥dsikker mÃ¥te
- Aggregerer nÃ¥r alle forventede svar er mottatt
- Leverer endelig utdata ved hjelp av `context.YieldOutputAsync()`

### âš¡ Ytelsesfordeler

**Samtidig vs Sekvensiell:**
- Sekvensiell: Agent1 (30s) â†’ Agent2 (30s) = **60 sekunder totalt**
- Samtidig: Agent1 (30s) || Agent2 (30s) = **30 sekunder totalt**

**GjennomstrÃ¸mningsforbedring**: Opptil NÃ— raskere for N samtidige agenter (avhengig av arbeidsmengde og ressurser)

### ğŸ›¡ï¸ FeilhÃ¥ndtering

Arbeidsflyten hÃ¥ndterer individuelle agentfeil pÃ¥ en smidig mÃ¥te:
- Hvis Ã©n agent feiler, fortsetter de andre Ã¥ behandle
- Aggregatoren kan implementere tidsavbruddslogikk
- Delvise resultater kan returneres om nÃ¸dvendig

### ğŸ“Š Avanserte funksjoner

**Dynamisk antall agenter:**
Endre aggregeringslogikken for Ã¥ stÃ¸tte variabelt antall agenter:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Dette samtidige arbeidsflytmÃ¸nsteret er essensielt for Ã¥ bygge hÃ¸yytelses, skalerbare AI-agentsystemer!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Ansvarsfraskrivelse**:  
Dette dokumentet er oversatt ved hjelp av AI-oversettelsestjenesten [Co-op Translator](https://github.com/Azure/co-op-translator). Selv om vi streber etter nÃ¸yaktighet, vÃ¦r oppmerksom pÃ¥ at automatiserte oversettelser kan inneholde feil eller unÃ¸yaktigheter. Det originale dokumentet pÃ¥ sitt opprinnelige sprÃ¥k bÃ¸r anses som den autoritative kilden. For kritisk informasjon anbefales profesjonell menneskelig oversettelse. Vi er ikke ansvarlige for misforstÃ¥elser eller feiltolkninger som oppstÃ¥r ved bruk av denne oversettelsen.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->