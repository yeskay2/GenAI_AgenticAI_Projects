<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1be9c8dcbd79a02d33d2c138684c1394",
  "translation_date": "2025-11-11T13:56:03+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/02.dotnet-agent-framework-workflow-ghmodel-sequential.md",
  "language_code": "fi"
}
-->
# â© JÃ¤rjestelmÃ¤lliset agenttityÃ¶nkulut GitHub-mallien kanssa (.NET)

## ğŸ“‹ Edistynyt opetusohjelma jÃ¤rjestelmÃ¤llisestÃ¤ kÃ¤sittelystÃ¤

TÃ¤mÃ¤ muistikirja esittelee **jÃ¤rjestelmÃ¤llisiÃ¤ tyÃ¶nkulkuja** kÃ¤yttÃ¤en Microsoft Agent Frameworkia .NET:lle ja GitHub-malleja. Opit rakentamaan monimutkaisia, vaiheittaisia kÃ¤sittelyputkia, joissa agentit suorittavat tehtÃ¤viÃ¤ tietyssÃ¤ jÃ¤rjestyksessÃ¤, ja jokainen vaihe perustuu edellisen vaiheen tuloksiin.

## ğŸ¯ Oppimistavoitteet

### ğŸ”„ **JÃ¤rjestelmÃ¤llisen kÃ¤sittelyn arkkitehtuuri**
- **Lineaarinen tyÃ¶nkulun suunnittelu**: Luo vaiheittaisia kÃ¤sittelyputkia, joissa on selkeÃ¤t riippuvuudet
- **Tilanhallinta**: SÃ¤ilytÃ¤ konteksti ja tietovirta tyÃ¶nkulun vaiheiden vÃ¤lillÃ¤
- **GitHub-mallien integrointi**: HyÃ¶dynnÃ¤ GitHubin AI-malleja monivaiheisissa .NET-tyÃ¶nkuluissa
- **Yritystason putkimallit**: Rakenna tuotantovalmiita jÃ¤rjestelmÃ¤llisiÃ¤ kÃ¤sittelyjÃ¤rjestelmiÃ¤

### ğŸ—ï¸ **Edistyneet jÃ¤rjestelmÃ¤lliset mallit**
- **VaiheporttikÃ¤sittely**: Toteuta validointitarkistuksia tyÃ¶nkulun vaiheiden vÃ¤lillÃ¤
- **Kontekstin sÃ¤ilyttÃ¤minen**: SÃ¤ilytÃ¤ tila ja kertyneet tiedot kaikissa vaiheissa
- **Virheiden eteneminen**: KÃ¤sittele epÃ¤onnistumiset hallitusti jÃ¤rjestelmÃ¤llisissÃ¤ kÃ¤sittelyketjuissa
- **Suorituskyvyn optimointi**: Tehokas jÃ¤rjestelmÃ¤llinen suoritus vÃ¤hÃ¤isellÃ¤ kuormituksella

### ğŸ¢ **Yritystason jÃ¤rjestelmÃ¤lliset sovellukset**
- **AsiakirjakÃ¤sittelyputki**: Monivaiheinen asiakirjojen analyysi, muokkaus ja validointi
- **LaadunvarmistustyÃ¶nkulut**: JÃ¤rjestelmÃ¤llinen tarkistus, validointi ja hyvÃ¤ksyntÃ¤prosessi
- **SisÃ¤llÃ¶ntuotantoputki**: Tutkimus â†’ Kirjoittaminen â†’ Editointi â†’ Tarkistus â†’ Julkaisu
- **Liiketoimintaprosessien automatisointi**: Monivaiheiset liiketoimintatyÃ¶nkulut, joissa on selkeÃ¤t vaihekohtaiset riippuvuudet

## âš™ï¸ Esivaatimukset ja asennus

### ğŸ“¦ **Tarvittavat NuGet-paketit**

VÃ¤lttÃ¤mÃ¤ttÃ¶mÃ¤t paketit .NET-jÃ¤rjestelmÃ¤llisiin tyÃ¶nkulkuihin:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ Support -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration -->
```

### ğŸ”‘ **GitHub-mallien konfigurointi**

**YmpÃ¤ristÃ¶n asennus (.env-tiedosto):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Konfiguraation hallinta:**
```csharp
// Load environment variables securely
Env.Load("../../../.env");
var githubToken = Environment.GetEnvironmentVariable("GITHUB_TOKEN");
var githubEndpoint = Environment.GetEnvironmentVariable("GITHUB_ENDPOINT");
var modelId = Environment.GetEnvironmentVariable("GITHUB_MODEL_ID");
```

### ğŸ—ï¸ **JÃ¤rjestelmÃ¤llisen tyÃ¶nkulun arkkitehtuuri**

```mermaid
graph TD
    A[Initial Input] --> B[Stage 1: Analysis Agent]
    B --> C[Checkpoint 1]
    C --> D[Stage 2: Processing Agent]
    D --> E[Checkpoint 2]
    E --> F[Stage 3: Validation Agent]
    F --> G[Final Output]
    
    H[State Context] --> B
    H --> D
    H --> F
    
    I[GitHub Models API] --> B
    I --> D
    I --> F
```

**Keskeiset komponentit:**
- **JÃ¤rjestelmÃ¤lliset agentit**: Erikoistuneet agentit jokaiselle kÃ¤sittelyvaiheelle
- **Tilakonteksti**: SÃ¤ilyttÃ¤Ã¤ kertyneet tiedot ja pÃ¤Ã¤tÃ¶kset vaiheiden vÃ¤lillÃ¤
- **Tarkistuspisteet**: Validointipisteet vaiheiden vÃ¤lillÃ¤ laadun ja johdonmukaisuuden varmistamiseksi
- **GitHub-mallien asiakas**: Johdonmukainen AI-mallien kÃ¤yttÃ¶ kaikissa tyÃ¶nkulun vaiheissa

## ğŸ¨ **JÃ¤rjestelmÃ¤lliset tyÃ¶nkulun suunnittelumallit**

### ğŸ“ **AsiakirjakÃ¤sittelyputki**
```
Raw Document â†’ Content Extraction â†’ Analysis â†’ Validation â†’ Structured Output
```

### ğŸ¯ **SisÃ¤llÃ¶ntuotantotyÃ¶nkulku**
```
Brief/Requirements â†’ Research â†’ Content Creation â†’ Review â†’ Final Polish
```

### ğŸ” **Laadunvarmistusputki**
```
Initial Review â†’ Technical Validation â†’ Compliance Check â†’ Final Approval
```

### ğŸ’¼ **Liiketoimintatiedon tyÃ¶nkulku**
```
Data Collection â†’ Processing â†’ Analysis â†’ Report Generation â†’ Distribution
```

## ğŸ¢ **Yritystason jÃ¤rjestelmÃ¤llisten tyÃ¶nkulkujen edut**

### ğŸ¯ **Luotettavuus ja laatu**
- **Deterministinen kÃ¤sittely**: Johdonmukaiset ja toistettavat tulokset rakenteellisten vaiheiden avulla
- **Laatuportit**: Validointitarkistukset varmistavat laadun jokaisessa vaiheessa
- **Virheiden eristÃ¤minen**: Yhden vaiheen ongelmat eivÃ¤t vaikuta seuraaviin vaiheisiin
- **AuditointijÃ¤ljet**: TÃ¤ydellinen seuranta pÃ¤Ã¤tÃ¶ksistÃ¤ ja muunnoksista jokaisessa vaiheessa

### ğŸ“ˆ **Laajennettavuus ja suorituskyky**
- **Modulaarinen suunnittelu**: Jokainen vaihe voidaan optimoida itsenÃ¤isesti
- **Resurssien hallinta**: Tehokas AI-mallien resurssien jakaminen vaiheiden vÃ¤lillÃ¤
- **Tilan optimointi**: VÃ¤hÃ¤inen tilansiirto vaiheiden vÃ¤lillÃ¤ optimaalisen suorituskyvyn saavuttamiseksi
- **Rinnakkaiset vaiheryhmÃ¤t**: Useat jÃ¤rjestelmÃ¤lliset tyÃ¶nkulut voivat toimia rinnakkain

### ğŸ”’ **Turvallisuus ja vaatimustenmukaisuus**
- **Vaihekohtainen turvallisuus**: Eri turvallisuuskÃ¤ytÃ¤nnÃ¶t eri kÃ¤sittelyvaiheille
- **Tietojen validointi**: Varmista tietojen eheys ja vaatimustenmukaisuus jokaisessa tarkistuspisteessÃ¤
- **PÃ¤Ã¤synhallinta**: Tarkat kÃ¤yttÃ¶oikeudet eri tyÃ¶nkulun vaiheille
- **SÃ¤Ã¤ntelyvaatimusten tÃ¤yttÃ¤minen**: TÃ¤ytÃ¤ sÃ¤Ã¤ntelyvaatimukset rakenteellisen kÃ¤sittelyn avulla

### ğŸ“Š **Seuranta ja analytiikka**
- **Vaihekohtaiset mittarit**: Suorituskyvyn seuranta jokaiselle tyÃ¶nkulun vaiheelle
- **Pullonkaulojen tunnistaminen**: Tunnista ja optimoi hitaat vaiheet
- **Laatumittarit**: Seuraa laatua ja onnistumisprosentteja jokaisessa vaiheessa
- **Prosessin optimointi**: Jatkuva parantaminen vaihekohtaisten analytiikkatietojen perusteella

Rakennetaan vankkoja jÃ¤rjestelmÃ¤llisiÃ¤ AI-kÃ¤sittelyputkia! ğŸš€

## ğŸ’» Koodin suorittaminen

TÃ¤ydellinen toteutus lÃ¶ytyy tiedostosta `02.dotnet-agent-framework-workflow-ghmodel-sequential.cs`. TÃ¤mÃ¤ tiedosto esittelee **kolmivaiheisen huonekaluanalyysin tyÃ¶nkulun**:

1. **Vaihe 1 - Myyntiagentti**: Analysoi huonekalukuvia ja antaa ostosuosituksia
2. **Vaihe 2 - Hinta-agentti**: Tarjoaa yksityiskohtaisen hintajaon ja budjettivaihtoehtoja
3. **Vaihe 3 - Tarjousagentti**: Luo ammattimaisen tarjousdokumentin Markdown-muodossa

### ğŸ—ï¸ **TyÃ¶nkulun arkkitehtuuri**

```
Image Input â†’ Sales Analysis â†’ Price Estimation â†’ Quote Generation â†’ Final Output
```

Jokainen agentti:
- Saa edellisen vaiheen tuloksen kontekstina
- Rakentaa edellisen analyysin pÃ¤Ã¤lle erikoistuneella osaamisella
- SÃ¤ilyttÃ¤Ã¤ tyÃ¶nkulun jatkuvuuden tilanhallinnan avulla

### ğŸš€ Esimerkin suorittaminen

**Esivaatimukset:**
- Aseta huonekalukuva polkuun `../imgs/home.png` (tai pÃ¤ivitÃ¤ `imgPath`-muuttuja)
- Konfiguroi `.env`-tiedostosi GitHub-mallien tunnuksilla

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 02.dotnet-agent-framework-workflow-ghmodel-sequential.cs

# Run the sequential workflow
./02.dotnet-agent-framework-workflow-ghmodel-sequential.cs
```

Tai Windowsissa:
```powershell
dotnet run 02.dotnet-agent-framework-workflow-ghmodel-sequential.cs
```

### ğŸ“ Odotettu tulos

TyÃ¶nkulku suorittaa seuraavat vaiheet:
1. **Myyntiagentti**: Tunnistaa huonekalut kuvasta ja antaa suosituksia
2. **Hinta-agentti**: LisÃ¤Ã¤ yksityiskohtaisen hintaanalyysin budjettitasoineen ja ostosuosituksineen
3. **Tarjousagentti**: Luo muotoillun tarjousdokumentin, joka sisÃ¤ltÃ¤Ã¤ kaikki tiedot yhteen koottuna

Lopullinen tulos on kattava ja ammattimainen huonekalutarjous, joka perustuu kuva-analyysiin.

### ğŸ”§ Muokkausvaihtoehdot

**Muokkaa agentin toimintaa:**
```csharp
// Adjust agent instructions to change their focus
const string SalesAgentInstructions = "Your custom instructions...";
```

**Muuta jÃ¤rjestelmÃ¤llistÃ¤ tyÃ¶nkulkua:**
```csharp
// Add or reorder workflow stages
var workflow = new WorkflowBuilder(salesagent)
    .AddEdge(salesagent, priceagent)
    .AddEdge(priceagent, quoteagent)
    .AddEdge(quoteagent, newAgent)  // Add another stage
    .Build();
```

**KÃ¤ytÃ¤ eri syÃ¶tettÃ¤:**
```csharp
// Process text instead of images
ChatMessage userMessage = new ChatMessage(ChatRole.User, [
    new TextContent("Analyze pricing for a modern living room set")
]);
```

### ğŸ¯ Todelliset sovellukset

TÃ¤mÃ¤ jÃ¤rjestelmÃ¤llinen malli sopii erinomaisesti:
- **Verkkokauppa**: Tuoteanalyysi â†’ Hinnoittelu â†’ Tarjouksen luominen
- **KiinteistÃ¶t**: KiinteistÃ¶analyysi â†’ Arviointi â†’ Ilmoituksen luominen
- **Vakuutus**: Vahinkojen analyysi â†’ Arviointi â†’ Tarjouksen luominen
- **SisÃ¤llÃ¶ntuotanto**: Tutkimus â†’ Kirjoittaminen â†’ Editointi â†’ Julkaisu

### ğŸ” Tilavirran ymmÃ¤rtÃ¤minen

Jokainen jÃ¤rjestelmÃ¤llisen tyÃ¶nkulun agentti saa:
- **AlkuperÃ¤inen syÃ¶te**: KÃ¤yttÃ¤jÃ¤n alkuperÃ¤inen viesti (kuva + teksti)
- **Edellisten agenttien tulokset**: Kaikki aiempien agenttien vastaukset keskusteluhistoriassa
- **KertyvÃ¤ konteksti**: TÃ¤ydellinen tila, joka sÃ¤ilyy koko tyÃ¶nkulun ajan

TÃ¤mÃ¤ mahdollistaa monimutkaisen monivaiheisen kÃ¤sittelyn, jossa jokainen agentti rakentaa kattavan kontekstin pohjalta, joka sisÃ¤ltÃ¤Ã¤ kaikki aiemmat vaiheet.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Vastuuvapauslauseke**:  
TÃ¤mÃ¤ asiakirja on kÃ¤Ã¤nnetty kÃ¤yttÃ¤mÃ¤llÃ¤ tekoÃ¤lypohjaista kÃ¤Ã¤nnÃ¶spalvelua [Co-op Translator](https://github.com/Azure/co-op-translator). Vaikka pyrimme tarkkuuteen, huomioithan, ettÃ¤ automaattiset kÃ¤Ã¤nnÃ¶kset voivat sisÃ¤ltÃ¤Ã¤ virheitÃ¤ tai epÃ¤tarkkuuksia. AlkuperÃ¤inen asiakirja sen alkuperÃ¤isellÃ¤ kielellÃ¤ tulisi pitÃ¤Ã¤ ensisijaisena lÃ¤hteenÃ¤. TÃ¤rkeissÃ¤ tiedoissa suositellaan ammattimaista ihmiskÃ¤Ã¤nnÃ¶stÃ¤. Emme ole vastuussa vÃ¤Ã¤rinkÃ¤sityksistÃ¤ tai virhetulkinnoista, jotka johtuvat tÃ¤mÃ¤n kÃ¤Ã¤nnÃ¶ksen kÃ¤ytÃ¶stÃ¤.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->