<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:16:50+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "br"
}
-->
# âš¡ Fluxos de Trabalho Concorrentes com Modelos do GitHub (.NET)

## ğŸ“‹ Tutorial de Processamento Paralelo de Alta Performance

Este notebook demonstra **padrÃµes de fluxos de trabalho concorrentes** usando o Microsoft Agent Framework para .NET e Modelos do GitHub. VocÃª aprenderÃ¡ a construir fluxos de trabalho de processamento paralelo de alta performance que maximizam a capacidade ao executar mÃºltiplos agentes de IA simultaneamente, mantendo a coordenaÃ§Ã£o e a consistÃªncia dos dados.

## ğŸ¯ Objetivos de Aprendizado

### ğŸš€ **Fundamentos do Processamento Concorrente**
- **ExecuÃ§Ã£o Paralela de Agentes**: Execute mÃºltiplos agentes de IA simultaneamente para obter o mÃ¡ximo desempenho
- **PadrÃµes Async/Await**: Aproveite o modelo de programaÃ§Ã£o assÃ­ncrona do .NET para uma concorrÃªncia eficiente
- **IntegraÃ§Ã£o com Modelos do GitHub**: Coordene mÃºltiplas chamadas concorrentes ao serviÃ§o de inferÃªncia de modelos de IA do GitHub
- **Gerenciamento de Recursos**: Gerencie eficientemente os recursos dos modelos de IA em operaÃ§Ãµes concorrentes

### ğŸ—ï¸ **Arquitetura AvanÃ§ada de ConcorrÃªncia**
- **Paralelismo Baseado em Tarefas**: Utilize a Biblioteca de Paralelismo de Tarefas do .NET para execuÃ§Ã£o concorrente otimizada
- **PadrÃµes de SincronizaÃ§Ã£o**: Coordene agentes concorrentes evitando condiÃ§Ãµes de corrida
- **Balanceamento de Carga**: Distribua o trabalho eficientemente entre a capacidade de processamento concorrente disponÃ­vel
- **TolerÃ¢ncia a Falhas**: Lide com falhas individuais de agentes sem interromper todo o fluxo de trabalho

### ğŸ¢ **AplicaÃ§Ãµes Empresariais Concorrentes**
- **Processamento de Documentos em Alta Volume**: Processe mÃºltiplos documentos simultaneamente
- **AnÃ¡lise de ConteÃºdo em Tempo Real**: Analise fluxos de dados em tempo real de forma concorrente
- **OtimizaÃ§Ã£o de Processamento em Lote**: Maximize a capacidade em operaÃ§Ãµes de processamento de dados em larga escala
- **AnÃ¡lise Multimodal**: Processamento paralelo de diferentes tipos e formatos de conteÃºdo

## âš™ï¸ PrÃ©-requisitos e ConfiguraÃ§Ã£o

### ğŸ“¦ **Pacotes NuGet NecessÃ¡rios**

Pacotes essenciais para fluxos de trabalho concorrentes de alta performance:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **ConfiguraÃ§Ã£o dos Modelos do GitHub**

**ConfiguraÃ§Ã£o do Ambiente (arquivo .env):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**ConsideraÃ§Ãµes sobre Processamento Concorrente:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Arquitetura de Fluxo de Trabalho Concorrente**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**Componentes Principais:**
- **Biblioteca de Paralelismo de Tarefas**: Suporte integrado do .NET para operaÃ§Ãµes concorrentes
- **Pool de Agentes**: MÃºltiplas instÃ¢ncias de agentes para processamento paralelo
- **AgregaÃ§Ã£o de Resultados**: CoordenaÃ§Ã£o e fusÃ£o dos resultados dos agentes concorrentes
- **Pontos de SincronizaÃ§Ã£o**: Garantir a consistÃªncia dos dados em operaÃ§Ãµes concorrentes

## ğŸ¨ **PadrÃµes de Design de Fluxos de Trabalho Concorrentes**

### ğŸ” **Pesquisa e AnÃ¡lise Paralela**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Processamento de Dados de MÃºltiplas Fontes**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Pipeline de GeraÃ§Ã£o de ConteÃºdo**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Processamento Fan-Out/Fan-In**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **BenefÃ­cios de Performance Empresarial**

### âš¡ **Capacidade e Escalabilidade**
- **Escalabilidade Linear de Desempenho**: Adicione mais agentes concorrentes para aumentar a capacidade
- **UtilizaÃ§Ã£o de Recursos**: MÃ¡xima eficiÃªncia da capacidade disponÃ­vel dos modelos de IA
- **ReduÃ§Ã£o do Tempo de Processamento**: ReduÃ§Ã£o significativa do tempo por meio de execuÃ§Ã£o paralela
- **Escalabilidade ElÃ¡stica**: Ajuste dinamicamente o nÃºmero de agentes concorrentes com base na carga de trabalho

### ğŸ›¡ï¸ **Confiabilidade e ResiliÃªncia**
- **Isolamento de Falhas**: Falhas individuais de agentes nÃ£o afetam outras operaÃ§Ãµes concorrentes
- **DegradaÃ§Ã£o Gradual**: O sistema continua operando com capacidade reduzida de agentes
- **RecuperaÃ§Ã£o de Erros**: Mecanismos automÃ¡ticos de repetiÃ§Ã£o para operaÃ§Ãµes concorrentes que falharam
- **DistribuiÃ§Ã£o de Carga**: DistribuiÃ§Ã£o uniforme do trabalho entre os agentes disponÃ­veis

### ğŸ“Š **Monitoramento de Performance**
- **MÃ©tricas de ExecuÃ§Ã£o Concorrente**: Acompanhe o desempenho de todas as operaÃ§Ãµes paralelas
- **AnÃ¡lise de Uso de Recursos**: Monitore o uso de CPU, memÃ³ria e rede
- **AnÃ¡lise de Capacidade**: MeÃ§a os ganhos de eficiÃªncia com o processamento concorrente
- **DetecÃ§Ã£o de Gargalos**: Identifique e resolva restriÃ§Ãµes de desempenho

### ğŸ”§ **Desenvolvimento e OperaÃ§Ãµes**
- **Modelo de ProgramaÃ§Ã£o AssÃ­ncrona**: Aproveite os padrÃµes maduros de async/await do .NET
- **CoordenaÃ§Ã£o de Tarefas**: Capacidades integradas de gerenciamento e coordenaÃ§Ã£o de tarefas
- **Tratamento de ExceÃ§Ãµes**: Tratamento abrangente de erros em operaÃ§Ãµes concorrentes
- **Suporte para DepuraÃ§Ã£o**: Ferramentas de depuraÃ§Ã£o do Visual Studio para fluxos de trabalho concorrentes

Vamos construir fluxos de trabalho de IA concorrentes de alta performance com .NET! ğŸš€

## ğŸ’» Executando o CÃ³digo

A implementaÃ§Ã£o completa estÃ¡ disponÃ­vel em `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Este arquivo demonstra um **fluxo de trabalho concorrente Fan-Out/Fan-In** para planejamento de viagens:

### ğŸ—ï¸ **Arquitetura do Fluxo de Trabalho**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**Componentes Principais:**

1. **ConcurrentStartExecutor**: Transmite a solicitaÃ§Ã£o do usuÃ¡rio para todos os agentes simultaneamente
2. **Agente Pesquisador**: Analisa destinos e atraÃ§Ãµes de forma concorrente
3. **Agente Planejador**: Cria planos de viagem detalhados de forma concorrente
4. **ConcurrentAggregationExecutor**: Coleta e mescla os resultados de ambos os agentes

### ğŸ¯ **PadrÃ£o Fan-Out/Fan-In**

Este fluxo de trabalho demonstra o clÃ¡ssico padrÃ£o **Fan-Out/Fan-In**:
- **Fan-Out**: Uma mensagem de entrada Ã© transmitida para mÃºltiplos agentes simultaneamente
- **Processamento Concorrente**: MÃºltiplos agentes trabalham em paralelo na mesma tarefa
- **Fan-In**: Resultados de todos os agentes sÃ£o coletados e agregados em uma Ãºnica saÃ­da

### ğŸš€ Executando o Exemplo

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Ou no Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ SaÃ­da Esperada

O fluxo de trabalho irÃ¡:
1. **Transmitir SolicitaÃ§Ã£o**: Enviar "Planeje uma viagem para Seattle em dezembro" para ambos os agentes
2. **Processamento Concorrente**: Ambos os agentes trabalham simultaneamente:
   - Pesquisador identifica atraÃ§Ãµes e detalhes
   - Planejador cria itinerÃ¡rio e logÃ­stica
3. **AgregaÃ§Ã£o**: Combinar ambas as respostas em uma saÃ­da abrangente
4. **Exibir Resultados**: Mostrar o plano de viagem mesclado com todas as informaÃ§Ãµes

### ğŸ”§ OpÃ§Ãµes de PersonalizaÃ§Ã£o

**Adicionar Mais Agentes Concorrentes:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Modificar InstruÃ§Ãµes dos Agentes:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Alterar a Tarefa:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ AplicaÃ§Ãµes no Mundo Real

Este padrÃ£o concorrente Ã© ideal para:
- **CriaÃ§Ã£o de ConteÃºdo**: MÃºltiplos escritores criando diferentes seÃ§Ãµes simultaneamente
- **RevisÃ£o de CÃ³digo**: MÃºltiplos revisores analisando cÃ³digo de diferentes perspectivas
- **Pesquisa de Mercado**: AnÃ¡lise paralela de diferentes segmentos de mercado
- **Processamento de Documentos**: ExtraÃ§Ã£o, anÃ¡lise e validaÃ§Ã£o concorrentes
- **AnÃ¡lise Multiperspectiva**: ObtenÃ§Ã£o de diferentes pontos de vista sobre a mesma entrada

### ğŸ” Entendendo os Executores Personalizados

**ConcurrentStartExecutor:**
- Implementa `IMessageHandler<string>` para aceitar entrada de texto
- Transmite mensagens para todos os agentes conectados
- Envia `TurnToken` para acionar o processamento concorrente

**ConcurrentAggregationExecutor:**
- Implementa `IMessageHandler<ChatMessage>` para receber respostas dos agentes
- Coleta mensagens de forma segura para threads
- Agrega quando todas as respostas esperadas chegam
- Gera a saÃ­da final usando `context.YieldOutputAsync()`

### âš¡ BenefÃ­cios de Performance

**Concorrente vs Sequencial:**
- Sequencial: Agente1 (30s) â†’ Agente2 (30s) = **60 segundos no total**
- Concorrente: Agente1 (30s) || Agente2 (30s) = **30 segundos no total**

**Melhoria de Capacidade**: AtÃ© NÃ— mais rÃ¡pido para N agentes concorrentes (dependendo da carga de trabalho e dos recursos)

### ğŸ›¡ï¸ Tratamento de Erros

O fluxo de trabalho lida com falhas individuais de agentes de forma eficiente:
- Se um agente falhar, os outros continuam processando
- O agregador pode implementar lÃ³gica de timeout
- Resultados parciais podem ser retornados, se necessÃ¡rio

### ğŸ“Š Recursos AvanÃ§ados

**Quantidade DinÃ¢mica de Agentes:**
Modifique a lÃ³gica de agregaÃ§Ã£o para suportar contagens variÃ¡veis de agentes:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Este padrÃ£o de fluxo de trabalho concorrente Ã© essencial para construir sistemas de agentes de IA escalÃ¡veis e de alta performance!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Aviso Legal**:  
Este documento foi traduzido utilizando o serviÃ§o de traduÃ§Ã£o por IA [Co-op Translator](https://github.com/Azure/co-op-translator). Embora nos esforcemos para garantir a precisÃ£o, esteja ciente de que traduÃ§Ãµes automatizadas podem conter erros ou imprecisÃµes. O documento original em seu idioma nativo deve ser considerado a fonte autoritativa. Para informaÃ§Ãµes crÃ­ticas, recomenda-se a traduÃ§Ã£o profissional humana. NÃ£o nos responsabilizamos por quaisquer mal-entendidos ou interpretaÃ§Ãµes incorretas decorrentes do uso desta traduÃ§Ã£o.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->