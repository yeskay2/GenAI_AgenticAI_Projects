<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b9c6e32c9b5f2fed20b6916984440d88",
  "translation_date": "2025-11-11T13:23:40+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/03.dotnet-agent-framework-workflow-ghmodel-concurrent.md",
  "language_code": "nl"
}
-->
# âš¡ Gelijktijdige Agent Workflows met GitHub Modellen (.NET)

## ğŸ“‹ Handleiding voor Hoge-Snelheid Parallelle Verwerking

Deze notebook demonstreert **gelijktijdige workflowpatronen** met behulp van het Microsoft Agent Framework voor .NET en GitHub Modellen. Je leert hoe je workflows kunt bouwen voor hoge-snelheid, parallelle verwerking die de doorvoer maximaliseren door meerdere AI-agents tegelijkertijd uit te voeren, terwijl coÃ¶rdinatie en gegevensconsistentie behouden blijven.

## ğŸ¯ Leerdoelen

### ğŸš€ **Basisprincipes van Gelijktijdige Verwerking**
- **Parallelle Agentuitvoering**: Voer meerdere AI-agents tegelijkertijd uit voor maximale prestaties
- **Async/Await Patronen**: Maak gebruik van het async-programmeermodel van .NET voor efficiÃ«nte gelijktijdigheid
- **GitHub Modellen Integratie**: CoÃ¶rdineer meerdere gelijktijdige oproepen naar de AI-model inferentie service van GitHub
- **Resourcebeheer**: Beheer AI-modelbronnen efficiÃ«nt tijdens gelijktijdige operaties

### ğŸ—ï¸ **Geavanceerde Architectuur voor Gelijktijdigheid**
- **Taakgebaseerde Parallelisme**: Gebruik de .NET Task Parallel Library voor optimale gelijktijdige uitvoering
- **Synchronisatiepatronen**: CoÃ¶rdineer gelijktijdige agents en voorkom racecondities
- **Load Balancing**: Verdeel werk efficiÃ«nt over beschikbare gelijktijdige verwerkingscapaciteit
- **Fouttolerantie**: Behandel individuele agentfouten zonder de hele workflow te stoppen

### ğŸ¢ **Gelijktijdige Toepassingen voor Bedrijven**
- **Documentverwerking op Hoge-Snelheid**: Verwerk meerdere documenten tegelijkertijd
- **Realtime Inhoudsanalyse**: Gelijktijdige analyse van inkomende datastromen
- **Batchverwerkingsoptimalisatie**: Maximaliseer de doorvoer voor grootschalige gegevensverwerkingsoperaties
- **Multi-Modale Analyse**: Parallelle verwerking van verschillende inhoudstypen en formaten

## âš™ï¸ Vereisten & Setup

### ğŸ“¦ **Benodigde NuGet Packages**

EssentiÃ«le pakketten voor workflows met hoge-snelheid gelijktijdige verwerking:

```xml
<!-- Core AI Framework with Async Support -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Client Model Abstractions for API Communication -->
<PackageReference Include="System.ClientModel" Version="1.6.1.0" />

<!-- Azure Identity and Async LINQ for Advanced Operations -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />

<!-- Local Agent Framework References -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions with async support -->
<!-- Microsoft.Agents.AI.OpenAI.dll - GitHub Models integration with concurrency -->
```

### ğŸ”‘ **GitHub Modellen Configuratie**

**Omgevingsinstellingen (.env bestand):**
```env
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_ENDPOINT=https://models.inference.ai.azure.com
GITHUB_MODEL_ID=gpt-4o-mini
```

**Overwegingen voor Gelijktijdige Verwerking:**
```csharp
// Configure for concurrent operations
var clientOptions = new OpenAIClientOptions()
{
    Endpoint = new Uri(githubEndpoint),
    // Configure connection pooling for concurrent requests
    NetworkTimeout = TimeSpan.FromMinutes(5)
};
```

### ğŸ—ï¸ **Architectuur van Gelijktijdige Workflows**

```mermaid
graph TD
    A[Workflow Input] --> B[Task Distribution]
    B --> C[Concurrent Agent Pool]
    C --> D[Agent Task 1]
    C --> E[Agent Task 2]
    C --> F[Agent Task 3]
    C --> G[Agent Task N]
    
    D --> H[Result Aggregation]
    E --> H
    F --> H
    G --> H
    
    H --> I[Synchronized Output]
    
    J[GitHub Models API] --> D
    J --> E
    J --> F
    J --> G
    
    K[.NET Task Scheduler] --> C
```

**Belangrijke Componenten:**
- **Task Parallel Library**: Ingebouwde ondersteuning van .NET voor gelijktijdige operaties
- **Agent Pool**: Meerdere agent-instanties voor parallelle verwerking
- **Resultaataggregatie**: CoÃ¶rdinatie en samenvoeging van resultaten van gelijktijdige agents
- **Synchronisatiepunten**: Zorg voor gegevensconsistentie tijdens gelijktijdige operaties

## ğŸ¨ **Ontwerp Patronen voor Gelijktijdige Workflows**

### ğŸ” **Parallel Onderzoek & Analyse**
```
Research Topic â†’ Concurrent Research Agents â†’ Result Synthesis â†’ Final Report
```

### ğŸ“Š **Multi-Bron Gegevensverwerking**
```
Data Sources â†’ Parallel Processing Agents â†’ Data Integration â†’ Unified Output
```

### ğŸ­ **Inhoud Generatie Pipeline**
```
Content Requirements â†’ Concurrent Content Generators â†’ Quality Review â†’ Final Content
```

### ğŸ”„ **Fan-Out/Fan-In Verwerking**
```
Single Input â†’ Multiple Concurrent Processors â†’ Result Aggregation â†’ Single Output
```

## ğŸ¢ **Voordelen voor Bedrijfsprestaties**

### âš¡ **Doorvoer & Schaalbaarheid**
- **Lineaire Prestatie Schaling**: Voeg meer gelijktijdige agents toe om de doorvoer te verhogen
- **Resourcegebruik**: Maximale efficiÃ«ntie van beschikbare AI-modelcapaciteit
- **Verminderde Verwerkingstijd**: Significante tijdsreductie door parallelle uitvoering
- **Elastische Schaling**: Pas het aantal gelijktijdige agents dynamisch aan op basis van de werklast

### ğŸ›¡ï¸ **Betrouwbaarheid & Veerkracht**
- **Foutisolatie**: Individuele agentfouten beÃ¯nvloeden andere gelijktijdige operaties niet
- **Geleidelijke Degradatie**: Het systeem blijft werken met verminderde agentcapaciteit
- **Foutherstel**: Automatische retry-mechanismen voor mislukte gelijktijdige operaties
- **Werkverdeling**: Gelijke verdeling van werk over beschikbare agents

### ğŸ“Š **Prestatiemonitoring**
- **Gelijktijdige Uitvoeringsstatistieken**: Volg de prestaties van alle parallelle operaties
- **Resourcegebruik Analyse**: Monitor CPU-, geheugen- en netwerkgebruik
- **Doorvoer Analyse**: Meet efficiÃ«ntiewinst door gelijktijdige verwerking
- **Knelpunt Detectie**: Identificeer en los prestatiebeperkingen op

### ğŸ”§ **Ontwikkeling & Operaties**
- **Async Programmeermodel**: Maak gebruik van de volwassen async/await patronen van .NET
- **TaakcoÃ¶rdinatie**: Ingebouwde taakbeheer- en coÃ¶rdinatiemogelijkheden
- **Foutafhandeling**: Uitgebreide foutafhandeling voor gelijktijdige operaties
- **Debugging Ondersteuning**: Visual Studio debugging tools voor gelijktijdige workflows

Laten we gelijktijdige AI-workflows met hoge prestaties bouwen met .NET! ğŸš€

## ğŸ’» Code Uitvoeren

De volledige implementatie is beschikbaar in `03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs`. Dit bestand demonstreert een **Fan-Out/Fan-In gelijktijdige workflow** voor reisplanning:

### ğŸ—ï¸ **Workflow Architectuur**

```
User Request â†’ ConcurrentStartExecutor â†’ [Researcher Agent || Planner Agent] â†’ ConcurrentAggregationExecutor â†’ Final Output
```

**Belangrijke Componenten:**

1. **ConcurrentStartExecutor**: Zendt het gebruikersverzoek gelijktijdig naar alle agents
2. **Researcher Agent**: Analyseert bestemmingen en attracties gelijktijdig
3. **Planner Agent**: Maakt gedetailleerde reisplannen gelijktijdig
4. **ConcurrentAggregationExecutor**: Verzamelt en voegt resultaten van beide agents samen

### ğŸ¯ **Fan-Out/Fan-In Patroon**

Deze workflow demonstreert het klassieke **Fan-Out/Fan-In** patroon:
- **Fan-Out**: EÃ©n invoerbericht wordt gelijktijdig naar meerdere agents verzonden
- **Gelijktijdige Verwerking**: Meerdere agents werken parallel aan dezelfde taak
- **Fan-In**: Resultaten van alle agents worden verzameld en samengevoegd tot Ã©Ã©n uitvoer

### ğŸš€ Voorbeeld Uitvoeren

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs

# Run the concurrent workflow
./03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

Of op Windows:
```powershell
dotnet run 03.dotnet-agent-framework-workflow-ghmodel-concurrent.cs
```

### ğŸ“ Verwachte Uitvoer

De workflow zal:
1. **Verzoek Verzenden**: Stuur "Plan een reis naar Seattle in december" naar beide agents
2. **Gelijktijdige Verwerking**: Beide agents werken tegelijkertijd:
   - Researcher identificeert attracties en details
   - Planner maakt een reisroute en logistiek
3. **Aggregatie**: Combineer beide reacties tot een uitgebreide uitvoer
4. **Resultaten Tonen**: Toon het samengevoegde reisplan met alle informatie

### ğŸ”§ Aanpassingsopties

**Voeg Meer Gelijktijdige Agents Toe:**
```csharp
// Create additional specialized agents
AIAgent budgetAgent = openAIClient.GetChatClient(github_model_id).CreateAIAgent(
    name: "Budget-Agent", instructions: "Calculate travel costs...");

// Add to fan-out
var workflow = new WorkflowBuilder(startExecutor)
    .AddFanOutEdge(startExecutor, targets: [researcherAgent, plannerAgent, budgetAgent])
    .AddFanInEdge(aggregationExecutor, sources: [researcherAgent, plannerAgent, budgetAgent])
    .WithOutputFrom(aggregationExecutor)
    .Build();

// Update aggregation count
if (this._messages.Count == 3) { ... }
```

**Wijzig Agent Instructies:**
```csharp
const string ResearcherAgentInstructions = "Your custom instructions for research...";
const string PlanAgentInstructions = "Your custom instructions for planning...";
```

**Verander de Taak:**
```csharp
StreamingRun run = await InProcessExecution.StreamAsync(
    workflow, 
    "Plan a European vacation for 2 weeks in summer"
);
```

### ğŸ¯ Toepassingen in de Praktijk

Dit gelijktijdige patroon is ideaal voor:
- **Inhoud Creatie**: Meerdere schrijvers die verschillende secties tegelijkertijd maken
- **Code Review**: Meerdere reviewers die code vanuit verschillende perspectieven analyseren
- **Marktonderzoek**: Parallelle analyse van verschillende marktsegmenten
- **Documentverwerking**: Gelijktijdige extractie, analyse en validatie
- **Multi-Perspectief Analyse**: Diverse standpunten verkrijgen over dezelfde invoer

### ğŸ” Begrip van Aangepaste Executors

**ConcurrentStartExecutor:**
- Implementeert `IMessageHandler<string>` om string-invoer te accepteren
- Zendt berichten naar alle verbonden agents
- Stuurt `TurnToken` om gelijktijdige verwerking te activeren

**ConcurrentAggregationExecutor:**
- Implementeert `IMessageHandler<ChatMessage>` om agentreacties te ontvangen
- Verzamelt berichten op een thread-safe manier
- Voegt samen wanneer alle verwachte reacties binnen zijn
- Levert de uiteindelijke uitvoer met `context.YieldOutputAsync()`

### âš¡ Prestatievoordelen

**Gelijktijdig vs Sequentieel:**
- Sequentieel: Agent1 (30s) â†’ Agent2 (30s) = **60 seconden totaal**
- Gelijktijdig: Agent1 (30s) || Agent2 (30s) = **30 seconden totaal**

**Doorvoerverbetering**: Tot NÃ— sneller voor N gelijktijdige agents (afhankelijk van werklast en resources)

### ğŸ›¡ï¸ Foutafhandeling

De workflow behandelt individuele agentfouten op een elegante manier:
- Als Ã©Ã©n agent faalt, blijven anderen doorgaan
- Aggregator kan time-outlogica implementeren
- Gedeeltelijke resultaten kunnen indien nodig worden geretourneerd

### ğŸ“Š Geavanceerde Functies

**Dynamisch Aantal Agents:**
Pas de aggregatielogica aan om variabele aantallen agents te ondersteunen:

```csharp
private int _expectedAgentCount;
private readonly List<ChatMessage> _messages = [];

public async ValueTask HandleAsync(ChatMessage message, IWorkflowContext context)
{
    this._messages.Add(message);
    if (this._messages.Count == _expectedAgentCount)
    {
        // Process aggregation
    }
}
```

Dit gelijktijdige workflowpatroon is essentieel voor het bouwen van AI-agent systemen met hoge prestaties en schaalbaarheid!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Disclaimer**:  
Dit document is vertaald met behulp van de AI-vertalingsservice [Co-op Translator](https://github.com/Azure/co-op-translator). Hoewel we streven naar nauwkeurigheid, dient u zich ervan bewust te zijn dat geautomatiseerde vertalingen fouten of onnauwkeurigheden kunnen bevatten. Het originele document in de oorspronkelijke taal moet worden beschouwd als de gezaghebbende bron. Voor kritieke informatie wordt professionele menselijke vertaling aanbevolen. Wij zijn niet aansprakelijk voor eventuele misverstanden of verkeerde interpretaties die voortvloeien uit het gebruik van deze vertaling.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->