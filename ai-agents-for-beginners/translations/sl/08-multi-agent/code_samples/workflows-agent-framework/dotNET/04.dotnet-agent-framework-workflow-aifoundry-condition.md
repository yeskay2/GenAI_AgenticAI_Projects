<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8abd335151cee553293b637ee3d80d10",
  "translation_date": "2025-11-11T12:32:46+00:00",
  "source_file": "08-multi-agent/code_samples/workflows-agent-framework/dotNET/04.dotnet-agent-framework-workflow-aifoundry-condition.md",
  "language_code": "sl"
}
-->
# ğŸ”€ Pogojni delovni tokovi agentov z Azure AI Foundry (.NET)

## ğŸ“‹ Vadnica za inteligentne delovne tokove na podlagi odloÄitev

Ta zvezek prikazuje **vzorce pogojnih delovnih tokov** z uporabo Azure AI Foundry in Microsoft Agent Framework za .NET. NauÄili se boste, kako zgraditi napredne delovne tokove, ki temeljijo na odloÄitvah, in inteligentno usmerjajo obdelavo na podlagi analize AI, poslovnih pravil ter dinamiÄnih pogojev za avtomatizacijo na ravni podjetja.

## ğŸ¯ Cilji uÄenja

### ğŸ§  **Arhitektura inteligentnih odloÄitev**
- **Implementacija pogojne logike**: Zgradite kompleksna drevesa odloÄitev z veÄ toÄkami razvejanja
- **Usmerjanje na podlagi AI**: Uporabite modele Azure AI Foundry za sprejemanje inteligentnih odloÄitev o usmerjanju
- **DinamiÄna prilagoditev delovnega toka**: Spremenite vedenje delovnega toka na podlagi analize in pogojev med izvajanjem
- **Integracija poslovnih pravil**: VkljuÄite poslovno logiko in zahteve skladnosti v delovne tokove

### ğŸ”€ **Napredni vzorci pogojnih odloÄitev**
- **OdloÄanje na podlagi veÄ kriterijev**: Ocenite veÄ dejavnikov za odloÄitve o usmerjanju
- **Obdelava, ki se zaveda konteksta**: Sprejemajte odloÄitve na podlagi akumuliranega konteksta in zgodovine delovnega toka
- **Prilagodljiva sprememba delovnega toka**: DinamiÄno prilagodite poti obdelave na podlagi pogojev v realnem Äasu
- **Integracija pogonskega sistema pravil**: Implementirajte napredne pogonske sisteme poslovnih pravil v delovne tokove

### ğŸ¢ **Pogojne aplikacije na ravni podjetja**
- **RazvrÅ¡Äanje in usmerjanje dokumentov**: Samodejno razvrÅ¡Äanje in usmerjanje dokumentov v ustrezne delovne tokove
- **RazvrÅ¡Äanje storitev za stranke**: Inteligentno usmerjanje povpraÅ¡evanj strank v specializirane ekipe za obravnavo
- **Obdelava skladnosti in tveganj**: Uporaba razliÄnih procesov validacije in pregleda na podlagi ocene tveganja
- **Delovni tokovi za zagotavljanje kakovosti**: Usmerjanje vsebine skozi ustrezne procese pregleda na podlagi meril kakovosti

## âš™ï¸ Predpogoji in nastavitev

### ğŸ“¦ **Potrebni NuGet paketi**

Napredni paketi za obdelavo pogojnih delovnih tokov:

```xml
<!-- Core AI Framework -->
<PackageReference Include="Microsoft.Extensions.AI" Version="9.9.0" />

<!-- Azure AI Agents with Persistent State -->
<PackageReference Include="Azure.AI.Agents.Persistent" Version="1.2.0-beta.5" />

<!-- Azure Identity and Utilities -->
<PackageReference Include="Azure.Identity" Version="1.15.0" />
<PackageReference Include="System.Linq.Async" Version="6.0.3" />
<PackageReference Include="DotNetEnv" Version="3.1.1" />

<!-- Local Workflow Framework References -->
<!-- Microsoft.Agents.Workflows.dll - Advanced workflow orchestration -->
<!-- Microsoft.Agents.AI.AzureAI.dll - Azure AI Foundry integration -->
<!-- Microsoft.Agents.AI.dll - Core agent abstractions -->
```

### ğŸ”‘ **Konfiguracija Azure AI Foundry**

**Potrebni Azure viri:**
- Delovni prostor Azure AI Foundry z modeli za pogojno obdelavo
- NaroÄnina na Azure z ustreznimi kvotami in dovoljenji za raÄunalniÅ¡ke vire
- NameÅ¡Äeni AI modeli za sprejemanje odloÄitev in analizo vsebine
- (Neobvezno) Povezava z Bing Search API za zmoÅ¾nosti utemeljevanja

**Konfiguracija okolja (.env datoteka):**
```env
# Azure AI Foundry Configuration
AZURE_AI_PROJECT_ENDPOINT=https://your-project.cognitiveservices.azure.com/
BING_CONNECTION_ID=your-bing-connection-id
```

**Nastavitev avtentikacije:**
```csharp
// Azure CLI or Managed Identity authentication
using Azure.Identity;
var credential = new AzureCliCredential();

// Load environment configuration
DotNetEnv.Env.Load("../../../.env");
```

### ğŸ—ï¸ **Arhitektura pogojnega delovnega toka**

```mermaid
graph TD
    A[Input: Content Outline] --> B[Draft Executor]
    B --> C[Content Review Executor]
    C --> D{Review Decision}
    
    D -->|Yes - Approved| E[Publish Executor]
    D -->|No - Rejected| F[Send Review Executor]
    
    E --> G[Save as Markdown File]
    F --> H[Notify for Revisions]
    
    I[Azure AI Foundry] --> B
    I --> C
    I --> E
    
    J[Bing Grounding] --> B
```

**KljuÄne komponente:**
- **Draft Executor**: AI agent, ki ustvarja zaÄetne osnutke vsebine iz orisov
- **Content Review Executor**: AI agent, ki ocenjuje kakovost in skladnost osnutkov
- **Conditional Routing**: Logika odloÄanja, ki usmerja na podlagi rezultatov pregleda
- **Poti za objavo/pregled**: LoÄene poti obdelave za odobreno in zavrnjeno vsebino
- **Upravljanje stanja**: Ohranja kontekst vsebine in pregleda skozi celoten delovni tok

## ğŸ¨ **Vzorci oblikovanja pogojnih delovnih tokov**

### ğŸ“‹ **Produkcija vsebine z vrati kakovosti**
```
Outline â†’ Draft Creation â†’ Quality Review â†’ {Approve: Publish | Reject: Revise}
```

### ğŸ¯ **Obdelava dokumentov na podlagi tveganja**
```
Document â†’ Risk Assessment â†’ {Low: Standard | High: Enhanced Review}
```

### ğŸ” **Inteligentno usmerjanje storitev za stranke**
```
Customer Query â†’ Analysis â†’ {Simple: FAQ Bot | Complex: Human Agent}
```

### ğŸ’¼ **Delovni tokovi, ki temeljijo na skladnosti**
```
Content â†’ Compliance Check â†’ {Pass: Publish | Fail: Legal Review}
```

## ğŸ¢ **Prednosti pogojnih delovnih tokov na ravni podjetja**

### ğŸ¯ **Inteligentna avtomatizacija**
- **Pametno sprejemanje odloÄitev**: OdloÄitve o usmerjanju na podlagi analize vsebine in konteksta
- **Prilagodljiva obdelava**: Delovni tokovi, ki se samodejno prilagajajo spreminjajoÄim se pogojem
- **Uveljavljanje poslovnih pravil**: Samodejna uporaba kompleksne poslovne logike in politik
- **Usmerjanje, ki se zaveda konteksta**: OdloÄitve na podlagi celotne zgodovine delovnega toka in akumuliranega konteksta

### ğŸ“ˆ **Operativna odliÄnost**
- **Optimizirana dodelitev virov**: Usmerjanje dela k najbolj ustreznim strokovnjakom in procesom
- **ZmanjÅ¡anje roÄnega posredovanja**: Avtomatizirano sprejemanje odloÄitev zmanjÅ¡uje potrebo po ÄloveÅ¡kem usmerjanju
- **HitrejÅ¡i Äasi reÅ¡evanja**: Neposredno usmerjanje k ustrezni strokovnosti in zmogljivostim obdelave
- **Dosledna uporaba**: Enotna uporaba poslovnih pravil in kriterijev odloÄanja

### ğŸ›¡ï¸ **Upravljanje tveganj in skladnosti**
- **Samodejna ocena tveganja**: AI-podprta ocena vsebine in ravni tveganja situacije
- **Uveljavljanje skladnosti**: Samodejno usmerjanje skozi zahtevane regulativne procese
- **Uporaba varnostnih protokolov**: IzboljÅ¡ani varnostni ukrepi, uporabljeni na podlagi ocene tveganja
- **VzdrÅ¾evanje revizijske sledi**: Popolna dokumentacija odloÄitev o usmerjanju in njihove utemeljitve

### ğŸ“Š **Analitika in stalne izboljÅ¡ave**
- **Analitika odloÄitev**: Sledenje uÄinkovitosti in natanÄnosti odloÄitev o usmerjanju
- **Prepoznavanje vzorcev**: Identifikacija trendov in vzorcev v odloÄitvah o usmerjanju skozi Äas
- **Optimizacija zmogljivosti**: Stalne izboljÅ¡ave kriterijev odloÄanja in uÄinkovitosti usmerjanja
- **Poslovna inteligenca**: Vpogledi v znaÄilnosti vsebine in zahteve obdelave

### ğŸ”§ **TehniÄna odliÄnost**
- **Vztrajno upravljanje stanja**: Ohranjanje kompleksnega stanja skozi izvajanje delovnega toka
- **RazÅ¡irljiva arhitektura**: Obvladovanje zahtev po obdelavi velikega obsega pogojnih procesov
- **ZmoÅ¾nosti integracije**: Brezhibna integracija z obstojeÄimi poslovnimi sistemi in procesi
- **Sledenje in opazovanje**: Celovito spremljanje zmogljivosti delovnega toka in odloÄitev

Zgradimo inteligentne, odloÄitveno usmerjene delovne tokove za podjetja z .NET! ğŸš€

## ğŸ’» Zagon kode

Celotna implementacija je na voljo v datoteki `04.dotnet-agent-framework-workflow-aifoundry-condition.cs`. Ta prikazuje **delovni tok produkcije vsebine z vrati kakovosti**:

### ğŸ—ï¸ **Arhitektura delovnega toka**

```
Content Outline â†’ Draft Creation â†’ Quality Review â†’ Conditional Routing:
                                                      â”œâ”€ Approved (>200 words) â†’ Publish
                                                      â””â”€ Rejected (<200 words) â†’ Review Notification
```

**Agenti v delovnem toku:**
1. **Evangelist Agent**: Ustvari osnutke vadnic iz orisov z Bing utemeljevanjem
2. **Content Reviewer Agent**: Ocenjuje kakovost osnutkov (Å¡tevilo besed, popolnost)
3. **Publisher Agent**: Shrani odobreno vsebino kot Markdown datoteke z Å¾igom Äasa

**Prilagojeni izvajalci:**
1. **DraftExecutor**: Orkestrira ustvarjanje osnutkov
2. **ContentReviewExecutor**: Izvaja oceno kakovosti
3. **PublishExecutor**: Upravlja objavo odobrene vsebine
4. **SendReviewExecutor**: Upravlja obvestila o zavrnjeni vsebini

### ğŸš€ Zagon primera

**Predpogoji:**
- Konfiguriran delovni prostor Azure AI Foundry
- Avtentikacija prek Azure CLI (`az login`)
- (Neobvezno) Povezava z Bing Search za utemeljevanje

```bash
# Make the script executable (Unix/Linux/macOS)
chmod +x 04.dotnet-agent-framework-workflow-aifoundry-condition.cs

# Run the conditional workflow
./04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

Ali na Windows:
```powershell
dotnet run 04.dotnet-agent-framework-workflow-aifoundry-condition.cs
```

### ğŸ“ PriÄakovani izhod

Delovni tok bo:
1. **Ustvaril agente**: Inicializiral tri specializirane agente Azure AI Foundry
2. **Ustvaril osnutek**: Evangelist agent ustvari osnutek vadnice iz orisa
3. **Pregledal vsebino**: Content Reviewer oceni kakovost osnutka
4. **Pogojno usmerjanje**:
   - **ÄŒe odobreno (>200 besed)**: Publish executor shrani kot Markdown datoteko
   - **ÄŒe zavrnjeno (<200 besed)**: Send review executor poÅ¡lje obvestilo o pregledu
5. **Prikazal rezultate**: PrikaÅ¾e konÄni izid delovnega toka

### ğŸ”§ MoÅ¾nosti prilagoditve

**Spremenite kriterije pregleda:**
```csharp
const string ContentReviewerInstructions = @"
You are a content reviewer...
1. Check if content is more than 500 words (instead of 200)
2. Verify technical accuracy
3. Ensure proper formatting
...";
```

**Dodajte veÄ pogojnih poti:**
```csharp
var workflow = new WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, contentReviewerExecutor)
    .AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Excellent"))
    .AddEdge(contentReviewerExecutor, editExecutor, condition: GetCondition("Good"))
    .AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("Poor"))
    .Build();
```

**Spremenite zahteve za vsebino:**
```csharp
string OUTLINE_Content = @"
# Your Custom Topic
## Section 1
https://your-reference-url
## Section 2
...
";
```

### ğŸ¯ ResniÄne aplikacije

Ta vzorec pogojnega delovnega toka je idealen za:
- **Sisteme za upravljanje vsebine**: Avtomatizirani uredniÅ¡ki delovni tokovi z vrati kakovosti
- **Obdelavo dokumentov**: Usmerjanje dokumentov na podlagi razvrÅ¡Äanja in skladnosti
- **Podpora strankam**: Inteligentno usmerjanje zahtevkov na podlagi kompleksnosti in nujnosti
- **Pravni pregled**: Usmerjanje pogodb na podlagi ocene tveganja in vrednosti
- **HR procesi**: Usmerjanje prijav skozi ustrezne delovne tokove za pregled

### ğŸ” Razumevanje pogojne logike

**Funkcija pogoja:**
```csharp
public Func<object?, bool> GetCondition(string expectedResult) =>
    reviewResult => reviewResult is ReviewResult review && review.Result == expectedResult;
```

Ta funkcija ustvari predikat, ki:
1. Preveri, ali je rezultat tipa `ReviewResult`
2. Primerja lastnost `Result` z priÄakovano vrednostjo
3. Vrne true/false za doloÄitev usmerjanja

**Poti delovnega toka s pogoji:**
```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, sendReviewerExecutor, condition: GetCondition("No"))
```

### ğŸ“Š Napredne funkcije

**Validacija JSON sheme:**
Delovni tok uporablja JSON sheme za zagotavljanje strukturiranih odgovorov:

```csharp
// Define response structure
public class ReviewResult
{
    [JsonPropertyName("review_result")]
    public string Result { get; set; } = string.Empty;
    
    [JsonPropertyName("reason")]
    public string Reason { get; set; } = string.Empty;
    
    [JsonPropertyName("draft_content")]
    public string DraftContent { get; set; } = string.Empty;
}

// Apply to agent
ResponseFormat = ChatResponseFormat.ForJsonSchema(
    AIJsonUtilities.CreateJsonSchema(typeof(ReviewResult)), 
    "ReviewResult", 
    "Review Result From DraftContent"
)
```

**Integracija Bing utemeljevanja:**
Evangelist agent uporablja Bing utemeljevanje za dostop do informacij v realnem Äasu:

```csharp
var bingGroundingConfig = new BingGroundingSearchConfiguration(bing_conn_id);
BingGroundingToolDefinition bingGroundingTool = new(
    new BingGroundingSearchToolParameters([bingGroundingConfig])
);
```

To omogoÄa agentu, da sledi URL-jem v orisu in pridobi aktualne informacije.

### ğŸ›¡ï¸ Upravljanje napak

Delovni tok vkljuÄuje robustno upravljanje napak za zavrnjeno vsebino:
- Napake pregleda sproÅ¾ijo alternativno pot
- Obvestila zagotavljajo jasne razloge za zavrnitev
- Vsebina je ohranjena za revizijo

### ğŸ”„ RazÅ¡iritev delovnega toka

**Dodajte zanko za revizijo:**
Ustvarite povratno zanko, ki samodejno ponovno ustvari osnutek vsebine:

```csharp
.AddEdge(contentReviewerExecutor, publishExecutor, condition: GetCondition("Yes"))
.AddEdge(contentReviewerExecutor, draftExecutor, condition: GetCondition("No")) // Loop back
```

**Implementirajte veÄstopenjski pregled:**
Dodajte veÄ stopenj pregleda z razliÄnimi kriteriji:

```csharp
.AddEdge(draftExecutor, technicalReviewer)
.AddEdge(technicalReviewer, editorialReviewer, condition: GetCondition("TechPass"))
.AddEdge(editorialReviewer, publishExecutor, condition: GetCondition("EditPass"))
```

Ta vzorec pogojnega delovnega toka zagotavlja osnovo za gradnjo naprednih, inteligentnih avtomatizacijskih sistemov na ravni podjetja! ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Omejitev odgovornosti**:  
Ta dokument je bil preveden z uporabo storitve za prevajanje AI [Co-op Translator](https://github.com/Azure/co-op-translator). ÄŒeprav si prizadevamo za natanÄnost, vas prosimo, da upoÅ¡tevate, da lahko avtomatizirani prevodi vsebujejo napake ali netoÄnosti. Izvirni dokument v njegovem maternem jeziku je treba obravnavati kot avtoritativni vir. Za kljuÄne informacije priporoÄamo profesionalni ÄloveÅ¡ki prevod. Ne odgovarjamo za morebitna nesporazumevanja ali napaÄne razlage, ki izhajajo iz uporabe tega prevoda.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->